<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<title>BCD-UI 5</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
:not(pre)>code.nobreak{word-wrap:normal}
:not(pre)>code.nowrap{white-space:nowrap}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
td.tableblock>.content>:last-child.sidebarblock{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style type="text/css">
  html, body {
    font-size: 95%;
  }
  .listingblock pre.prettyprint {
     width: 1024px;
     font-size: 90%;
  }
  .CodeRay .comment {
    color: blue;
  }
  dl dt {
    margin-bottom: 0em;
    color: rgba(191, 52, 0, 1);
    font-weight: normal;
    font-family: "Open Sans","DejaVu Sans",sans-serif
  }
  h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 {
    font-weight: 400;
  }
  pre code[data-lang='javascript'], pre code[data-lang='xml'], pre code[data-lang='html'] {
    font-size: 0.9em;
  }
  *:not(pre) > code {
    background-color: #f8f8f8;
  }
  h5, h6 {
    font-weight: 600;
  }
  ol > li p, ul > li p, ul dd, ol dd, .olist .olist, .ulist .ulist, .ulist .olist, .olist .ulist {
    margin-bottom: 0.5em;
  }
  .menuseq {
    background-color: #f8f8f8;
    padding: 0px 5px;
    border-right: 2px;
  }
  #searchInput {
    margin: 0px 0px 10px 0px;
    border: #555 1px solid;
    border-radius: 3px;
    padding: 3px 5px;
  }
  .toc2#toc > ul {
    margin-bottom: 30px;
  }

  /* Smooth collapse-expand for matching toc items */
  #toc ul {
    margin-top: 0px;
  }
  #toc li {
    -webkit-transition: 0.3s;
    -moz-transition: 0.3s;
    -ms-transition: 0.3s;
    -o-transition: 0.3s;
    transition: 0.3s;
  }
  #toc li.invis {
    overflow: hidden;
    line-height: 0;
    margin: 0;
    opacity: 0;
  }
</style>
<script type="application/javascript">
  // Only show matching toc entries (and their ancestors)
  window.addEventListener( "DOMContentLoaded", function() {
    // Create an input filed for search term
    var toc = document.getElementById("toc");

    // Add an input field for a search expression and limit sidebar to matches
    var input = document.createElement("input");
    input.setAttribute( "id", "searchInput" );
    input.setAttribute( "placeholder", "Search" );
    input.setAttribute( "type", "search" );
    // On each change, search matching links, and hide others
    input.oninput = function() {
      var inputValue=this.value.toUpperCase();
      [].forEach.call( document.querySelectorAll('#toc ul li a'),
        function(elem) {
          if( elem.textContent.toUpperCase().indexOf(inputValue) != -1 ) {
            elem = elem.parentElement;
            while( elem.id != 'toc' ) {
              elem.classList.remove("invis");
              elem = elem.parentElement;
            }
          }
          else {
            elem.parentElement.classList.add("invis");
          }
        }
      )
    };
    toc.insertBefore( input, toc.firstChild );

    // A click on an item in toc will expand all sub-nodes
    toc.querySelector('ul').addEventListener( "click", function( event ) {
      var tocItem = event.srcElement.parentNode;
      [].forEach.call(tocItem.querySelectorAll('li'), function ( elem ) {
        elem.classList.remove("invis");
      })
    });
  });
</script>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>BCD-UI 5</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#DocAbout">1. About BCD-UI 5</a>
<ul class="sectlevel2">
<li><a href="#_overview">1.1. Overview</a></li>
<li><a href="#_what_about_jquery_or_angular">1.2. What about jQuery or Angular?</a></li>
<li><a href="#_is_there_commercial_support">1.3. Is there commercial support?</a></li>
</ul>
</li>
<li><a href="#DocGettingStarted">2. Getting Started</a>
<ul class="sectlevel2">
<li><a href="#_step_by_step">2.1. Step by step</a>
<ul class="sectlevel3">
<li><a href="#_create_simple_request_page">Create Simple Request Page</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#DocSimpleReq">3. Your first BCD-UI page</a>
<ul class="sectlevel2">
<li><a href="#_overview_2">3.1. Overview</a></li>
<li><a href="#_step_by_step_2">3.2. Step by step</a>
<ul class="sectlevel3">
<li><a href="#_set_the_page_up">Set the page up</a></li>
<li><a href="#_add_static_data">Add static data</a></li>
<li><a href="#_add_a_renderer">Add a Renderer</a></li>
<li><a href="#_load_data_from_database">Load data from database</a></li>
<li><a href="#_add_a_periodchooser">Add a PeriodChooser</a></li>
<li><a href="#_the_important_guistatus">The important <em>guiStatus</em></a></li>
<li><a href="#_add_a_singleselect">Add a SingleSelect</a></li>
<li><a href="#_two_way_binding_of_widgets">Two-way binding of widgets</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#DocMinimalCube">4. Minimal cube setup</a>
<ul class="sectlevel2">
<li><a href="#_overview_3">4.1. Overview</a></li>
<li><a href="#_step_by_step_3">4.2. Step by step</a>
<ul class="sectlevel3">
<li><a href="#_definition_of_the_logical_data_model">Definition of the logical data model</a></li>
<li><a href="#_page_setup">Page setup</a></li>
<li><a href="#_add_a_report_filter">Add a report filter</a></li>
<li><a href="#_define_the_cube">Define the cube</a></li>
<li><a href="#_add_a_cubes_drag_and_drop_area">Add a cube&#8217;s drag and drop area</a></li>
<li><a href="#_testing_the_report">Testing the report</a></li>
<li><a href="#_where_to_go_from_here">Where to go from here</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#DocCoreArtifacts">5. Core concepts of BCD-UI</a>
<ul class="sectlevel2">
<li><a href="#_using_bcd_ui">5.1. Using BCD-UI</a>
<ul class="sectlevel3">
<li><a href="#_page_core_components">Page core components</a></li>
<li><a href="#_server_core_components">Server core components</a></li>
<li><a href="#_delivered_sources">Delivered sources</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#DocComponents">6. Components</a>
<ul class="sectlevel2">
<li><a href="#_overview_4">6.1. Overview</a></li>
<li><a href="#DocCube">6.2. Cube Component</a>
<ul class="sectlevel3">
<li><a href="#_cubes">Cubes</a></li>
</ul>
</li>
<li><a href="#DocScorecard">6.3. ScoreCard Component</a>
<ul class="sectlevel3">
<li><a href="#_scorecard_overview">Scorecard overview</a></li>
<li><a href="#_configuration">Configuration</a></li>
<li><a href="#_data_storage">Data storage</a></li>
</ul>
</li>
<li><a href="#DocTreeReport">6.4. Tree Report Component</a>
<ul class="sectlevel3">
<li><a href="#_tree_report_overview">Tree Report Overview</a></li>
<li><a href="#_fixed_depth_trees">Fixed depth trees</a></li>
<li><a href="#_trees_of_variable_depths">Trees of variable depths</a></li>
</ul>
</li>
<li><a href="#DocCharts">6.5. Chart Component</a>
<ul class="sectlevel3">
<li><a href="#_charts_overview">Charts Overview</a></li>
<li><a href="#_usage">Usage</a></li>
<li><a href="#_sample_charts">Sample charts</a></li>
<li><a href="#_auto_charts">Auto Charts</a></li>
<li><a href="#_options">Options</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#DocWidgets">7. Widgets Overview</a>
<ul class="sectlevel2">
<li><a href="#_widgets_overview">7.1. Widgets Overview</a>
<ul class="sectlevel3">
<li><a href="#_creation">Creation</a></li>
</ul>
</li>
<li><a href="#_overview_bcdui_widgetng">7.2. Overview bcdui.WidgetNg</a>
<ul class="sectlevel3">
<li><a href="#_button">Button</a></li>
<li><a href="#_checkbox">Checkbox</a></li>
<li><a href="#_connectable">Connectable</a></li>
<li><a href="#_date_input">Date Input</a></li>
<li><a href="#_input">Input</a></li>
<li><a href="#_sidebyside_chooser">SideBySide Chooser</a></li>
<li><a href="#_single_select">Single Select</a></li>
<li><a href="#_suggest_input">Suggest Input</a></li>
<li><a href="#_text_area">Text Area</a></li>
</ul>
</li>
<li><a href="#_overview_bcdui_widget">7.3. Overview bcdui.widget</a>
<ul class="sectlevel3">
<li><a href="#_blind_updown">Blind UpDown</a></li>
<li><a href="#_contex_menu">Contex Menu</a></li>
<li><a href="#_dimension_chooser">Dimension Chooser</a></li>
<li><a href="#_formula_editor">Formula Editor</a></li>
<li><a href="#_input_field">Input Field</a></li>
<li><a href="#_login_form">Login Form</a></li>
<li><a href="#_menu">Menu</a></li>
<li><a href="#_multi_select">Multi Select</a></li>
<li><a href="#_period_chooser">Period Chooser</a></li>
<li><a href="#_single_select_2">Single Select</a></li>
<li><a href="#_tab">Tab</a></li>
<li><a href="#_tooltip">Tooltip</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#DocPageStructure">8. Client infrastructure</a>
<ul class="sectlevel2">
<li><a href="#_page_live_cycle">8.1. Page live-cycle</a></li>
<li><a href="#_guistatus_singelton">8.2. guiStatus Singelton</a></li>
<li><a href="#DataProviders">8.3. DataProviders</a>
<ul class="sectlevel3">
<li><a href="#_available_data_providers">Available data providers</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#DocThemes">9. Themes</a>
<ul class="sectlevel2">
<li><a href="#_themes_overview">9.1. Themes overview</a>
<ul class="sectlevel3">
<li><a href="#_adjusting">Adjusting</a></li>
</ul>
</li>
<li><a href="#_implementation">9.2. Implementation</a>
<ul class="sectlevel3">
<li><a href="#_defining_a_new_theme">Defining a new theme</a></li>
<li><a href="#_themes_folder_structure">Themes folder structure</a></li>
<li><a href="#_page_structuring">Page structuring</a></li>
</ul>
</li>
<li><a href="#_theme_sample">9.3. Theme Sample</a>
<ul class="sectlevel3">
<li><a href="#_theme_sample_2">Theme Sample</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#DocI18n">10. Internationalization</a>
<ul class="sectlevel2">
<li><a href="#_internationalization">10.1. Internationalization</a>
<ul class="sectlevel3">
<li><a href="#_i18n_setup">I18n Setup</a></li>
<li><a href="#_i18n_on_client_side">I18n on client side</a></li>
<li><a href="#_i18n_during_data_access">I18n during data access</a></li>
<li><a href="#_i18n_interpolation">i18n interpolation</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#DocExports">11. Exports</a>
<ul class="sectlevel2">
<li><a href="#_detail_exports">11.1. Detail exports</a>
<ul class="sectlevel3">
<li><a href="#_sylk_slk_format">Sylk .slk format</a></li>
<li><a href="#_plain_data_export">Plain data export</a></li>
<li><a href="#_cube_and_scorecard_detail_export">Cube and Scorecard Detail Export</a></li>
<li><a href="#_more_on_export">More On Export</a></li>
</ul>
</li>
<li><a href="#_wysiwyg_exports">11.2. WYSIWYG exports</a>
<ul class="sectlevel3">
<li><a href="#_spread_sheet">Spread sheet</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#DocXsltLibrary">12. XSLT library</a>
<ul class="sectlevel2">
<li><a href="#_overview_5">12.1. Overview</a></li>
<li><a href="#_list_of_utils">12.2. List of utils</a>
<ul class="sectlevel3">
<li><a href="#_data_transformation">Data Transformation</a></li>
<li><a href="#_data_manipulation">Data Manipulation</a></li>
<li><a href="#_data_visualization">Data Visualization</a></li>
<li><a href="#_parametrization">Parametrization</a></li>
<li><a href="#_javascript_counterparts">Javascript counterparts</a></li>
<li><a href="#_string_utilites">String Utilites</a></li>
<li><a href="#_transformation_into_non_wrs">Transformation into non-WRS</a></li>
</ul>
</li>
<li><a href="#_using_exsltnode_set">12.3. Using exslt:node-set()</a></li>
<li><a href="#_xsd_schema">12.4. XSD Schema</a></li>
</ul>
</li>
<li><a href="#DocApi">13. Api in different languages</a>
<ul class="sectlevel2">
<li><a href="#_apis_overview">13.1. Apis Overview</a></li>
<li><a href="#_javascript_api">13.2. JavaScript API</a></li>
<li><a href="#_html5_custom_elements_api">13.3. HTML5 Custom Elements API</a></li>
<li><a href="#_jsp_api">13.4. JSP API</a></li>
<li><a href="#_xslt_api">13.5. XSLT API</a></li>
<li><a href="#_xapi_api">13.6. XAPI API</a></li>
<li><a href="#_create_your_own_domain_specific_language_dsl">13.7. Create your own Domain Specific Language DSL</a></li>
</ul>
</li>
<li><a href="#DocSecurity">14. Security</a>
<ul class="sectlevel2">
<li><a href="#_security_overview">14.1. Security Overview</a></li>
<li><a href="#_security_access_filter">14.2. Security access filter</a>
<ul class="sectlevel3">
<li><a href="#_developers_view">Developer&#8217;s view</a></li>
<li><a href="#_shiro_permissions">Shiro permissions</a></li>
<li><a href="#_login_form_and_logging">Login form and logging</a></li>
<li><a href="#_define_users_in_web_xml">Define users in web.xml</a></li>
<li><a href="#_define_users_in_database">Define users in database</a></li>
<li><a href="#_oauth2_azure_google">OAuth2 / Azure / Google</a></li>
</ul>
</li>
<li><a href="#_configuration_2">14.3. Configuration</a>
<ul class="sectlevel3">
<li><a href="#_kerberos_windows_sso_windows_authentication_enterpriseedition">Kerberos / Windows SSO / Windows Authentication (EnterpriseEdition)</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#DocCaching">15. Caching</a>
<ul class="sectlevel2">
<li><a href="#_caching_overview">15.1. Caching overview</a>
<ul class="sectlevel3">
<li><a href="#_disable_caching">Disable Caching</a></li>
</ul>
</li>
<li><a href="#_client_side_caching">15.2. Client side caching</a>
<ul class="sectlevel3">
<li><a href="#_other_headers">Other headers</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#DocBinding">16. Bindings</a>
<ul class="sectlevel2">
<li><a href="#_bindings_overview">16.1. Bindings Overview</a></li>
<li><a href="#_bindingset_features">16.2. BindingSet features</a>
<ul class="sectlevel3">
<li><a href="#_row_level_security">Row-level-security</a></li>
<li><a href="#_bindings_write_protection">Bindings write-protection</a></li>
<li><a href="#_write_pre_processing">Write pre-processing</a></li>
<li><a href="#_bindinginclude_xinclude">BindingInclude / XInclude</a></li>
<li><a href="#_relations">Relations</a></li>
<li><a href="#_bindingsetgroup">BindingSetGroup</a></li>
<li><a href="#_details">Details</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#DocContext">17. Application context and settings</a>
<ul class="sectlevel2">
<li><a href="#_unified_expression_language">17.1. Unified Expression Language</a>
<ul class="sectlevel3">
<li><a href="#_usage_scenarios">Usage scenarios</a></li>
<li><a href="#_el_variables_and_functions">EL variables and functions</a></li>
<li><a href="#_using_el_within_custom_servlets">Using EL within custom servlets</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#DocXmlData">18. WebRowSet</a>
<ul class="sectlevel2">
<li><a href="#_webrowset_wrs_overview">18.1. WebRowSet Wrs Overview</a>
<ul class="sectlevel3">
<li><a href="#_webrowset_format">WebRowSet format</a></li>
<li><a href="#_request_document">Request document</a></li>
<li><a href="#_filter_format">Filter format</a></li>
<li><a href="#_faults">Faults</a></li>
</ul>
</li>
<li><a href="#_cell_addressing">18.2. Cell addressing</a></li>
<li><a href="#_xsd_schema_2">18.3. XSD Schema</a>
<ul class="sectlevel3">
<li><a href="#_details_2">Details</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#DocFilter">19. Servlets / Filters</a>
<ul class="sectlevel2">
<li><a href="#_overview_6">19.1. Overview</a>
<ul class="sectlevel3">
<li><a href="#_bcd_ui_filters_and_servlets">BCD-UI Filters and Servlets</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#DocVfs">20. Virtual File System (VFS)</a>
<ul class="sectlevel2">
<li><a href="#_virtual_file_system_vfs">20.1. Virtual File System (VFS)</a>
<ul class="sectlevel3">
<li><a href="#_vfs_setup">VFS Setup</a></li>
<li><a href="#_vfs_reading_writing_refreshing_and_vfs_bindings">VFS reading, writing, refreshing and VFS Bindings</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#DocDebug">21. Debugging</a>
<ul class="sectlevel2">
<li><a href="#_debug_facilities">21.1. Debug facilities</a></li>
<li><a href="#_common_error_messages">21.2. Common error messages</a></li>
</ul>
</li>
<li><a href="#DocBootstrap">22. Bootstrap</a>
<ul class="sectlevel2">
<li><a href="#_get_the_tools">22.1. Get the tools</a></li>
<li><a href="#_xml_schema_xsd_catalog">22.2. XML schema xsd catalog</a></li>
</ul>
</li>
<li><a href="#DocAppsetup">23. Application Setup</a>
<ul class="sectlevel2">
<li><a href="#_adding_bcd_ui">23.1. Adding BCD-UI</a></li>
<li><a href="#_bcd_ui_folder_layout">23.2. BCD-UI folder layout</a></li>
</ul>
</li>
<li><a href="#DocGradle">24. Use Gradle to set up a BCD-UI project</a>
<ul class="sectlevel2">
<li><a href="#_overview_7">24.1. Overview</a></li>
<li><a href="#_step_by_step_4">24.2. Step by Step</a>
<ul class="sectlevel3">
<li><a href="#_gradle_plugin">Gradle plugin</a></li>
<li><a href="#_add_gradle_build_to_the_project">Add Gradle.build to the project</a></li>
<li><a href="#_configure_gradle_support_for_the_project">Configure Gradle support for the project</a></li>
<li><a href="#_refresh_dependencies">Refresh dependencies</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#DocGeneralFeatures">25. General Features</a>
<ul class="sectlevel2">
<li><a href="#_general_features">25.1. General Features</a></li>
<li><a href="#_transactions_and_connection_pooling">25.2. Transactions and connection pooling</a></li>
<li><a href="#_xml_inclusion">25.3. XML Inclusion</a>
<ul class="sectlevel3">
<li><a href="#_use_cases">Use cases</a></li>
<li><a href="#_implementation_2">Implementation</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#DocCompatibility">26. Compatibility</a>
<ul class="sectlevel2">
<li><a href="#_compatibility">26.1. Compatibility</a></li>
<li><a href="#_known_browser_incompatibilites">26.2. Known browser incompatibilites</a></li>
<li><a href="#_working_with_webkit_browsers">26.3. Working with webkit browsers</a></li>
</ul>
</li>
<li><a href="#DocConfiguration">27. Configuration</a>
<ul class="sectlevel2">
<li><a href="#_configuration_overview">27.1. Configuration overview</a></li>
<li><a href="#_dbproperties_setup">27.2. DbProperties setup</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="DocAbout">1. About BCD-UI 5</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview">1.1. Overview</h3>
<div class="paragraph">
<p>BCD-UI 5 is a full-stack framework for building rich enterprise web applications.
It bases on HTML5 and Java technologies and provides many artifacts typically needed in such environments.</p>
</div>
<div class="paragraph">
<p>BCD-UI can be used in any regular Java Jakarta EE application with at least web profile, for example a Tomcat is enough. Developers who today already deliver or plan to deliver such applications and find it hard to develop all functionality with only jQuery, React or Angular, will profit from using BCD-UI.</p>
</div>
<div class="paragraph">
<p>Some of BCD-UI&#8217;s features are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Configurable server side <a href="#DocBinding">database access</a> and data exchange via ready-to-use <a href="#DocXmlData">web services</a></p>
</li>
<li>
<p>Client-side <a href="#DocCoreArtifacts">models</a>, called DataProviders for retrieving, <a href="#DocXsltLibrary">working</a> with and displaying data</p>
</li>
<li>
<p>Several elaborated <a href="#DocWidgets">widgets</a> needed in enterprise environments with two-way bindings to the data models</p>
</li>
<li>
<p>Ready-to-use components like <a href="#DocCube">pivot reports</a>, <a href="#DocCharts">charts</a>, <a href="#DocScorecard">scorecards</a>, smart data uploading and editable data grids to name some</p>
</li>
<li>
<p>Export of <a href="#DocExports">WYSIWYG and detail data</a></p>
</li>
<li>
<p>Infrastructure for <a href="#DocI18n">internationalization</a>, <a href="#DocSecurity">security</a>, <a href="#DocThemes">themeing</a>, page lifcycle</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>and many more as you will learn in this tutorial.</p>
</div>
<div class="paragraph">
<p>Assume you want to provide the user with the option of setting up a report
by defining dimensions and measures and filter data by time and location like this:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/about_pivot.png" alt="Sample page with a pivot report" width="800" height="532">
</div>
</div>
<div class="paragraph">
<p>You will be surprised how easy you achieve that with BCD-UI.<br>
And going further and tweak the application to your needs is where BCD-UI continues supporting you,
so you can provide solutions with higher complexity with less effort, less bugs and less performance issues than ever.</p>
</div>
<div class="paragraph">
<p>With BCD-UI you are free to extend in any direction needed using standard technologies.
While you are not at all limited to BCD-UI components, you will often find an 80% solution already provided ready-to-use.</p>
</div>
</div>
<div class="sect2">
<h3 id="_what_about_jquery_or_angular">1.2. What about jQuery or Angular?</h3>
<div class="paragraph">
<p>Good question, should you not rather use jQuery?
In fact, when using BCD-UI you will be using jQuery a lot directly and indirectly as BCD-UI itself is built with the help of jQuery and understands jQuery objects.<br>
And while not using Angular directly, BCD-UI uses <em>web-components</em>, which is also the basis for Angular modules,
and you will find the basic approach of Angular when dealing with data the on client and building reusable modules is very similar.</p>
</div>
<div class="paragraph">
<p>Yet, both libraries, like many others, limit themselves to somewhat low-level development and client side topics.<br>
jQuery thankfully provides an API, which should have been part of the browser already, plus a rich set of UI-widgets.
Angular brought architecture to a JavaScript client, where before many solutions tried without.
Both aspects are very important for enterprise applications and both are also part of BCD-UI.</p>
</div>
<div class="paragraph">
<p>But in the end, they do not provide you with database access, components on higher abstraction levels,
security or ready-to-use components and leave these complex parts for you to be solved.<br>
Still, BCD-UI combines freely with of today&#8217;s standard libraries, as is itself comprised of standard technologies easy to integrate with everything else.</p>
</div>
</div>
<div class="sect2">
<h3 id="_is_there_commercial_support">1.3. Is there commercial support?</h3>
<div class="paragraph">
<p>Commercial support for BCD-UI if necessary can be provided by <a href="http://www.business-code.de" target="_blank" rel="noopener">BusinessCode GmbH</a>, an independent software vendor in Germany.
We already delivered literally hundreds of solutions based on different versions of BCD-UI,
ranging from temporary installations to cover transitions up to a number of large scale installations
with over 10.000 distinct users for enterprise-critical scenarios.
There is even a BCD-UI Enterprise Edition: BCD-UI-EE available, providing even more features and full life-cycle support.
In most cases we think though the Community Edition available on GitHub and described here is fully supporting you use case.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="DocGettingStarted">2. Getting Started</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To start developing with BCD-UI, just follow these steps:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Set up your development environment </dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Get Java &gt;=11, your favorite IDE and a Jakarta EE web server like Tomcat up and running</p>
</li>
<li>
<p>Have a look at  <a href="#DocBootstrap">Bootstrap</a> on how to improve Eclipse support for BCD-UI by importing config some BCD-UI specific files.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Set up a web application using BCD-UI</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Create a standard web application with your IDE, test it</p>
</li>
<li>
<p>Add bcd-ui-core.jar and bcd-ui-theme.jar to your dependencies</p>
</li>
<li>
<p>Copy some entries into your web.xml</p>
</li>
<li>
<p>Define database connection and default in context.xml</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>This is all. See chapter <a href="#DocAppsetup">Application Setup</a> for these steps. There we also discuss the internal layout of BCD-UI jar files.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Add pages to your web application </dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>BCD-UI pages are just plain standard HTML pages, and a single bcdui.js file being loaded</p>
</li>
<li>
<p>See chapter <a href="#DocSimpleReq">Simple request</a> or <a href="#DocMinimalCube">Minimal Cube</a> for this</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="sect2">
<h3 id="_step_by_step">2.1. Step by step</h3>
<div class="paragraph">
<p>Once your application is set up following <a href="#DocAppsetup">Application Setup</a>, you can start developing.</p>
</div>
<div class="sect3">
<h4 id="_create_simple_request_page">Create Simple Request Page</h4>
<div class="paragraph">
<p>Let&#8217;s continue by creating our <a href="#DocSimpleReq">first page</a> with BCD-UI.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="DocSimpleReq">3. Your first BCD-UI page</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this section we create a small BCD-UI application and explain some core concepts.<br></p>
</div>
<div class="sect2">
<h3 id="_overview_2">3.1. Overview</h3>
<div class="paragraph">
<p>These are the steps of this section:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Page Setup: Set an HTML frame for over-all layout</p>
</li>
<li>
<p>Use a <em>SimpleModel</em> to load static data from an XML file</p>
</li>
<li>
<p>Add a <em>Renderer</em> to transform data to HTML</p>
</li>
<li>
<p>Use an <em>AutoModel</em> to dynamically load data from the database</p>
</li>
<li>
<p>Add a <em>PeriodChooser</em> an apply button to reload the page with data of the selected date</p>
</li>
<li>
<p>Use a <em>SingleSelect</em> to further filter the data</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_step_by_step_2">3.2. Step by step</h3>
<div class="sect3">
<h4 id="_set_the_page_up">Set the page up</h4>
<div class="paragraph">
<p>While you are totally free in your page layout, here makes sense to use BCD-UI&#8217;s default layout as a start.<br>
Add WebContent/simpleReq/index.html with BCD-UI capability to your application and adjust the urls at the beginning from <code>./</code> to <code>../</code></p>
</div>
<div class="listingblock">
<div class="title">A blank BCD-UI page</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
<strong class="highlighted">6</strong>
7
8
9
10
11
12
13
14
15
16
17
18
<strong class="highlighted">19</strong>
<strong class="highlighted">20</strong>
21
22
23
24
<strong class="highlighted">25</strong>
<strong class="highlighted">26</strong>
27
28
29
30
<strong class="highlighted">31</strong>
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
</pre></td>
  <td class="code"><pre><span class="doctype">&lt;!DOCTYPE HTML&gt;</span>
<span class="tag">&lt;html&gt;</span>
<span class="tag">&lt;head&gt;</span>
  <span class="tag">&lt;meta</span> <span class="attribute-name">charset</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">UTF-8</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
  <span class="tag">&lt;title&gt;</span>Blank Page<span class="tag">&lt;/title&gt;</span>
  <span class="tag">&lt;link</span> <span class="attribute-name">rel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">shortcut icon</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">./favicon.ico</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
  <span class="tag">&lt;script</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text/javascript</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">./bcdui/bcdui.js</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/script&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="tag">&lt;/head&gt;</span>
<span class="tag">&lt;body&gt;</span>
<span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcd__outer-wrapper</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span> <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcd__wrapper</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcd__horizontal-split</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>

      <span class="comment">&lt;!-- Header --&gt;</span>
      <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcd__header</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcd__header__upper</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
          <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcd__header__logo</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">../bcdui/theme/images/bcd_logo.png</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">alt</span>=<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/div&gt;</span>
          <span class="tag">&lt;div&gt;</span><span class="tag">&lt;/div&gt;</span>
        <span class="tag">&lt;/div&gt;</span>
        <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcd__header__navigation</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/div&gt;</span> <i class="conum" data-value="3"></i><b>(3)</b>
      <span class="tag">&lt;/div&gt;</span>

      <span class="comment">&lt;!-- Main area --&gt;</span>
      <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcd__vertical-split</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>

        <span class="comment">&lt;!-- Sidebar --&gt;</span> <i class="conum" data-value="4"></i><b>(4)</b>
        <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcd__sidebar-left</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
          <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcd__sidebar-left__inner</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcd__sidebar-left-collaps-toggle-wrapper</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;button</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcd__sidebar-left-collaps-toggle bcd__sidebar-left-collaps-toggle--collapsed</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;i</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">fas fa-caret-left</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/i&gt;</span><span class="tag">&lt;/button&gt;</span><span class="tag">&lt;/div&gt;</span>

            <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcd__form-container</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
              <span class="comment">&lt;!-- place your sidebar widgets here --&gt;</span>
              <span class="tag">&lt;section&gt;</span>
                <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcd__form-group</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                  <span class="tag">&lt;label</span> <span class="attribute-name">for</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">s1</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Apply<span class="tag">&lt;/label&gt;</span>
                  <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcd__select-container</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                    <span class="tag">&lt;div</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">applyDiv</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/div&gt;</span>
                   <span class="tag">&lt;/div&gt;</span>
                <span class="tag">&lt;/div&gt;</span>
              <span class="tag">&lt;/section&gt;</span>
            <span class="tag">&lt;/div&gt;</span>

          <span class="tag">&lt;/div&gt;</span>
        <span class="tag">&lt;/div&gt;</span>

        <span class="comment">&lt;!-- Main content area --&gt;</span> <i class="conum" data-value="5"></i><b>(5)</b>
        <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcd__content-container</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
          <span class="tag">&lt;h1&gt;</span>Blank Page<span class="tag">&lt;/h1&gt;</span>

          <span class="tag">&lt;div</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">myDataDiv</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/div&gt;</span> <i class="conum" data-value="6"></i><b>(6)</b>
        <span class="tag">&lt;/div&gt;</span>

      <span class="tag">&lt;/div&gt;</span>

      <span class="comment">&lt;!-- Footer --&gt;</span>
      <span class="tag">&lt;footer&gt;</span>
        <span class="tag">&lt;p&gt;</span><span class="entity">&amp;copy;</span> 2021 BusinessCode GmbH<span class="tag">&lt;/p&gt;</span>
        <span class="tag">&lt;nav&gt;</span>
          <span class="tag">&lt;ul&gt;</span>
            <span class="tag">&lt;li&gt;</span><span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Imprint<span class="tag">&lt;/a&gt;</span><span class="tag">&lt;/li&gt;</span>
            <span class="tag">&lt;li&gt;</span><span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Privacy<span class="tag">&lt;/a&gt;</span><span class="tag">&lt;/li&gt;</span>
          <span class="tag">&lt;/ul&gt;</span>
        <span class="tag">&lt;/nav&gt;</span>
      <span class="tag">&lt;/footer&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;/div&gt;</span>
<span class="tag">&lt;/div&gt;</span>
<i class="conum" data-value="7"></i><b>(7)</b>
<span class="tag">&lt;script&gt;</span>
<span class="tag">&lt;/script&gt;</span>
<span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></pre></td>
</tr></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Loads BCD-UI library including theme</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Root of page structure of BCD-UI theme</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Menu will go here</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>This we call 'SideBar', this is where we will later place the report filters</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Here we will place the data output and show the guiStatus' content</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Here we will display out output</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>Any of your local JavaScript code goes here</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Now we already have an empty but fully styled page, open it in a browser.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/simpleReq_blankPage.png" alt="simpleReq blankPage">
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
BCD-UI theme has 2 parts.<br>
One is responsible for the overall page layout and seen here. It is fully optional, use your favorite structure and classes for this.<br>
The part that styles widgets and components is mandatory but fully independent of this.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_add_static_data">Add static data</h4>
<div class="paragraph">
<p>Add a file <code>staticData.xml</code> with the following content to the /simpleReq:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;Wrs</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.businesscode.de/schema/bcdui/wrs-1.0.0</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;Header&gt;</span>
    <span class="tag">&lt;Columns&gt;</span>
      <span class="tag">&lt;C</span> <span class="attribute-name">pos</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">CTR</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">dimId</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">CTR</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Country</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">VARCHAR</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;C</span> <span class="attribute-name">pos</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">2</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">CW</span><span class="delimiter">&quot;</span></span>              <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">C/W</span><span class="delimiter">&quot;</span></span>     <span class="attribute-name">type-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">INTEGER</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;C</span> <span class="attribute-name">pos</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">3</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">LOW</span><span class="delimiter">&quot;</span></span>             <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Low</span><span class="delimiter">&quot;</span></span>     <span class="attribute-name">type-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">NUMERIC</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;C</span> <span class="attribute-name">pos</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">4</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">HIGH</span><span class="delimiter">&quot;</span></span>            <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Heigh</span><span class="delimiter">&quot;</span></span>   <span class="attribute-name">type-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">NUMERIC</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;C</span> <span class="attribute-name">pos</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">5</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">HIGH2</span><span class="delimiter">&quot;</span></span>           <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Heigh2</span><span class="delimiter">&quot;</span></span>  <span class="attribute-name">type-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">NUMERIC</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/Columns&gt;</span>
  <span class="tag">&lt;/Header&gt;</span>
  <span class="tag">&lt;Data&gt;</span>
    <span class="tag">&lt;R</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;C&gt;</span>BE<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>23<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>1200<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>1300<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>-20<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;/R&gt;</span>
    <span class="tag">&lt;R</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">2</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;C&gt;</span>CZ<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>24<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>1234<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>1434<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>-15<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;/R&gt;</span>
    <span class="tag">&lt;R</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">3</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;C&gt;</span>DE<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>25<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>1321<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>1421<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>0<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;/R&gt;</span>
    <span class="tag">&lt;R</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">4</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;C&gt;</span>ES<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>26<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>1102<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>1202<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>20<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;/R&gt;</span>
    <span class="tag">&lt;R</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">5</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;C&gt;</span>FR<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>27<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>1234<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>1334<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>30.5<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;/R&gt;</span>
    <span class="tag">&lt;R</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">6</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;C&gt;</span>GB<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>28<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>1243<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>1343<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>45<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;/R&gt;</span>
    <span class="tag">&lt;R</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">7</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;C&gt;</span>HU<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>29<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>1453<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>1553<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>52<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;/R&gt;</span>
    <span class="tag">&lt;R</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">8</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;C&gt;</span>NO<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>30<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>1862<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>1962<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>58<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;/R&gt;</span>
    <span class="tag">&lt;R</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">9</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;C&gt;</span>US<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>31<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>1913<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>2013<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>64<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;/R&gt;</span>
  <span class="tag">&lt;/Data&gt;</span>
<span class="tag">&lt;/Wrs&gt;</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Above XML is a sample of a BCD-UI&#8217;s <em>WebRowSet</em> format Wrs, which is used to transfer data.<br>
Many parts of BCD-UI understand this format and show smart behaviour if you use it also for static files.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Now add the following script block to end of the page:</p>
</div>
<div class="listingblock">
<div class="title">Load static data</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="keyword">var</span> staticData = <span class="keyword">new</span> bcdui.core.SimpleModel(<span class="string"><span class="delimiter">&quot;</span><span class="content">staticData.xml</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>A <a href="../jsdoc/bcdui.core.SimpleModel.html" target="_blank" rel="noopener">bcdui.core.SimpleModel</a> is used to load data from the server.
Like all models it is loaded lazy, so it is not loaded to the client until a displaying component requests it.</p>
</div>
</div>
<div class="sect3">
<h4 id="_add_a_renderer">Add a Renderer</h4>
<div class="paragraph">
<p>Create a <a href="../jsdoc/bcdui.core.Renderer.html" target="_blank" rel="noopener">bcdui.core.Renderer</a> to display the data.
A <em>Renderer</em> expects a <em>DataProvider</em> (our SimpleModel is a <em>DataProvider</em>) plus an HTML element id (targetHtml) where the show the output.</p>
</div>
<div class="listingblock">
<div class="title">A typical renderer created with JavaScript</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="keyword">var</span> renderer = <span class="keyword">new</span> bcdui.core.Renderer({
  <span class="key">inputModel</span>: staticData,
  <span class="key">targetHtml</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">myDataDiv</span><span class="delimiter">&quot;</span></span>
});</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
By default, the result is rendered as a plain table. You will often want to provide some other layout. To do this, you create a custom XSLTs JavaScript or doT.js file turning Wrs into HTML and provide it to the renderer.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The result is:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/simpleReq_renderer_only.png" alt="simpleReq renderer only">
</div>
</div>
<div class="paragraph">
<p>Congratulations, this is already your first BCD-UI page!</p>
</div>
<div class="sect4">
<h5 id="_use_an_html_custom_tag_instead">Use an HTML custom tag instead</h5>
<div class="paragraph">
<p>You can also use a custom HTML tag to create a renderer. The advantage is that it goes right where it will appear. To do this, replace <code>&lt;div id="myDataDiv"&gt;&lt;/div&gt;</code> with</p>
</div>
<div class="listingblock">
<div class="title">A typical renderer created with JavaScript</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;bcd-renderer</span> <span class="attribute-name">inputModel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">staticData</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/bcd-renderer&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>While the JavaScript version above references the JavaScript variable <code>staticData</code> directly, the custom tag only knows the id of the input model. You register your DataProviders simply by giving them an <code>ìd</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="keyword">var</span> staticData = <span class="keyword">new</span> bcdui.core.SimpleModel({ <span class="key">id</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">staticData</span><span class="delimiter">&quot;</span></span>, <span class="key">url</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">staticData.xml</span><span class="delimiter">&quot;</span></span> });</code></pre>
</div>
</div>
<div class="paragraph">
<p>While the JavaScript variable and the id are both <code>staticData</code> in this example, they are completely separate things and do not need to be identical.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_load_data_from_database">Load data from database</h4>
<div class="paragraph">
<p>Instead of reading the data from a static file, we will now access the database.</p>
</div>
<div class="sect4">
<h5 id="_connect_to_a_database">Connect to a database</h5>
<div class="paragraph">
<p><a href="#DocBinding">BindingSets</a> connect BCD-UI to your database. Each database access is mediated by a BindingSet. For the following you obviously need a database and some data. Please identify or create a table with some columns including a date column. Make sure to also have the right database driver in your java dependencies</p>
</div>
<div class="paragraph">
<p>Add the following as testData.xml to <code>WEB-INF/bcdui/bindings</code>, and adjust it to your table.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;BindingSet</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.businesscode.de/schema/bcdui/bindings-1.0.0</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">carRepairs</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">table</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">car_repairs</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>  <i class="conum" data-value="1"></i><b>(1)</b> <i class="conum" data-value="2"></i><b>(2)</b>

  <span class="tag">&lt;C</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Id</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">isKey</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span> <i class="conum" data-value="3"></i><b>(3)</b>
    <span class="tag">&lt;Column&gt;</span>id<span class="tag">&lt;/Column&gt;</span> <i class="conum" data-value="4"></i><b>(4)</b>
  <span class="tag">&lt;/C&gt;</span>
  <span class="tag">&lt;C</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">dy</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Dy</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;Column&gt;</span>dy<span class="tag">&lt;/Column&gt;</span>
  <span class="tag">&lt;/C&gt;</span>
  <span class="tag">&lt;C</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">yr</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Year</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;Column&gt;</span>EXTRACT( YEAR from dy)<span class="tag">&lt;/Column&gt;</span> <i class="conum" data-value="5"></i><b>(5)</b>
  <span class="tag">&lt;/C&gt;</span>
  <span class="tag">&lt;C</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">country</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Country</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;Column&gt;</span>country<span class="tag">&lt;/Column&gt;</span>
  <span class="tag">&lt;/C&gt;</span>
  <span class="tag">&lt;C</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">station</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Station</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;Column&gt;</span>station<span class="tag">&lt;/Column&gt;</span>
  <span class="tag">&lt;/C&gt;</span>
  <span class="tag">&lt;C</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">carsSold</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Cars sold</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;Column&gt;</span>cars_sold<span class="tag">&lt;/Column&gt;</span>
  <span class="tag">&lt;/C&gt;</span>
  <span class="tag">&lt;C</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">carsRepaired</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Cars repaired</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;Column&gt;</span>cars_repaired<span class="tag">&lt;/Column&gt;</span>
  <span class="tag">&lt;/C&gt;</span>
<span class="tag">&lt;/BindingSet&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>id</code>: The BindingSet&#8217;s logical name in the application</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>table</code>: The real table name in your database</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>A logical BindingItem name</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The real column name in you database</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>You may also use a valid column expression here</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_create_an_automodel">Create an AutoModel</h5>
<div class="paragraph">
<p>The following <a href="../jsdoc/bcdui.core.AutoModel.html">bcdui.core.AutoModel</a> sends a request referencing a <em>BindingSet</em> and retrieves the listed <em>BindingItems</em> from your data.<br>
The requested data can be filtered by country or by dy. We will add filters later.</p>
</div>
<div class="paragraph">
<p>Add this to the script block at the end of the page:</p>
</div>
<div class="listingblock">
<div class="title">For simple requests, AutoModels may be enough</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="keyword">var</span> carRepairs = <span class="keyword">new</span> bcdui.core.AutoModel({
  <span class="key">bRefs</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">dy country station carsSold carsRepaired</span><span class="delimiter">&quot;</span></span>,
  <span class="key">filterBRefs</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">country dy</span><span class="delimiter">&quot;</span></span>,
  <span class="key">bindingSetId</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">carRepairs</span><span class="delimiter">&quot;</span></span>,
  <span class="key">isDistinct</span>: <span class="predefined-constant">true</span>
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>To let the renderer show this data, change the renderer&#8217;s parameter to <code>inputModel: carRepairs</code>.<br></p>
</div>
<div class="paragraph">
<p>Reload the page: Now you are already using your database!</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_add_a_periodchooser">Add a PeriodChooser</h4>
<div class="paragraph">
<p>In this section we add a <a href="../jsdoc/bcdui.widget.PeriodChooser.html" target="_blank" rel="noopener">bcdui.widget.PeriodChooser</a> to retrieve a subset of our data specified by a date range. We also add an apply button to reload the page with this filter setting.</p>
</div>
<div class="paragraph">
<p>To place the period chooser and the apply button on the page, add the two sections like the following to the element with class bcd__sidebar-left__inner.</p>
</div>
<div class="listingblock">
<div class="title">Section in the sidebar</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;section&gt;</span>
  <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcd__form-group</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;label</span> <span class="attribute-name">for</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">s1</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Period Chooser<span class="tag">&lt;/label&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcd__select-container</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;div</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">periodChooserDiv</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/div&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;/div&gt;</span>
<span class="tag">&lt;/section&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The chooser and the button are then created with JavaScript as follows:</p>
</div>
<div class="listingblock">
<div class="title">Sample for creating widgets via JavaScript</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">bcdui.widget.createPeriodChooser({
  <span class="key">targetModelXPath</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">$guiStatus/*/f:Filter/f:And[@id = 'myPeriodChooser']</span><span class="delimiter">&quot;</span></span>, <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="key">targetHtml</span>: <span class="string"><span class="delimiter">'</span><span class="content">periodChooser</span><span class="delimiter">'</span></span>, <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="key">isWeekSelectable</span>: <span class="predefined-constant">true</span> <i class="conum" data-value="3"></i><b>(3)</b>
});
bcdui.widgetNg.createButton({
  <span class="key">onClickAction</span>: bcdui.core.lifecycle.applyAction,
  <span class="key">targetHtml</span>: <span class="string"><span class="delimiter">'</span><span class="content">apply</span><span class="delimiter">'</span></span>,
  <span class="key">caption</span>: <span class="string"><span class="delimiter">'</span><span class="content">Apply</span><span class="delimiter">'</span></span>
});</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This tells the PeriodChooser to write its selected result into the model named guiStatus</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>This is the HTML element where the widget is displayed</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>These are further widget specific settings</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Voila! data loaded from database with a filter.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/simpleReq_period_chooser.png" alt="simpleReq period chooser">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The PeriodChooser works on well-known <em>BindingItem</em> names to support automatic date calculations. It is mandatory to name date related BindingSet items on of <code>dy, cw, cwyr, mo, qr, yr</code> with an optional postfix.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;C</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">dy</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;Column&gt;</span>booking_date<span class="tag">&lt;/Column&gt;</span><span class="tag">&lt;/C&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_the_important_guistatus">The important <em>guiStatus</em></h4>
<div class="paragraph">
<p>BCD-UI creates a page-wide singleton model named <code>guiStatus</code>, accessible via <code>bcdui.wkModels.guiStatus</code> (or by name), which serves as the default place to store user interaction.</p>
</div>
<div class="paragraph">
<p>To get an impression on how this guiStatus model looks like, add the following debugging utility to the JavaScript section in our page. Also add the target div with id <code>myGuiStatusDiv</code> in the main area within bcd__content-container:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">bcdui.widget.visualizeXml.visualizeModel({
  <span class="key">inputModel</span>: bcdui.wkModels.guiStatus,
  <span class="key">targetHtml</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">myGuiStatusDiv</span><span class="delimiter">&quot;</span></span>
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>This utility widget simply displays the content of the guiStatus to div#myGuiStatusDiv. Play with the period chooser and see the filter change.<br>
This is done with the help of <em>two-way binding</em> of widgets and models. If the widget changes the model changes, but if the model changes it also propagates the changes back to the widget. We see more of this in the coming section.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/simpleReq_guiStatusWidget.png" alt="simpleReq guiStatusWidget">
</div>
</div>
<div class="paragraph">
<p>When the apply button is clicked, the <em>guiStatus</em> document is sent to the sever, which uses f:Filter for limiting loaded data.
You should see that the url has a guiStatus parameter with the (compressed) guiStatus.</p>
</div>
<div class="paragraph">
<p>So when you set up a widget to create a filter, the targetXPath argument describes what filter elements are written to the guiStatus.
So our example filter f:Filter translates to</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql"><span class="class">SELECT</span> ... <span class="keyword">FROM</span> mytable <span class="keyword">WHERE</span> booking_date <span class="keyword">BETWEEN</span> <span class="string"><span class="delimiter">'</span><span class="content">2021-01-01</span><span class="delimiter">'</span></span> <span class="keyword">AND</span> <span class="string"><span class="delimiter">'</span><span class="content">2021-01-31</span><span class="delimiter">'</span></span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Further details on Wrs requests and f:Filters can be found <a href="#DocXmlData">below</a></p>
</div>
<div class="paragraph">
<p>In praxis, you will debug the <em>guiStatus</em> by opening the JavaScript console of your browser and entering</p>
</div>
<div class="listingblock">
<div class="content">
<pre>bcdui.wkModels.guiStatus.getData()</pre>
</div>
</div>
<div class="paragraph">
<p>you can then see the content written by the period chooser</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/simpleReq_debugGuistatus.png" alt="simpleReq debugGuistatus">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_add_a_singleselect">Add a SingleSelect</h4>
<div class="paragraph">
<p>We do now add a more complex filter <a href="../jsdoc/bcdui.widgetNg.html#.createSingleSelect" target="_blank" rel="noopener">bcdui.widgetNg.SingleSelect:</a>, which is using data for displaying a selection to the user.</p>
</div>
<div class="paragraph">
<p>Create a model from small static inline data with country data. Depending on your data you want to filter you may adjust this to some other values.</p>
</div>
<div class="listingblock">
<div class="title">StaticModel for inline data</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="keyword">var</span> countriesModel= <span class="keyword">new</span> bcdui.core.StaticModel({
  <span class="key">id</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">countriesModel</span><span class="delimiter">&quot;</span></span>,
  <span class="key">data</span>: <span class="string"><span class="delimiter">'</span><span class="content">&lt;Wrs xmlns=&quot;http://www.businesscode.de/schema/bcdui/wrs-1.0.0&quot;&gt;&lt;Data&gt;</span><span class="delimiter">'</span></span> +
      <span class="string"><span class="delimiter">'</span><span class="content"> &lt;R&gt;&lt;C caption=&quot;Germany&quot;&gt;DE&lt;/C&gt;&lt;/R&gt;</span><span class="delimiter">'</span></span> +
      <span class="string"><span class="delimiter">'</span><span class="content"> &lt;R&gt;&lt;C caption=&quot;USA&quot;&gt;US&lt;/C&gt;&lt;/R&gt;</span><span class="delimiter">'</span></span> +
      <span class="string"><span class="delimiter">'</span><span class="content"> &lt;R&gt;&lt;C caption=&quot;Spain&quot;&gt;ES&lt;/C&gt;&lt;/R&gt;</span><span class="delimiter">'</span></span> +
      <span class="string"><span class="delimiter">'</span><span class="content">&lt;/Data&gt;&lt;/Wrs&gt;</span><span class="delimiter">'</span></span>
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <a href="../jsdoc/bcdui.core.StaticModel.html" target="_blank" rel="noopener">bcdui.core.StaticModel</a> gets a static inline string which is parsed and made available. The <code>id</code> attribute makes the model available not only as a JavaScript object but also by name. We make use of that below.</p>
</div>
<div class="paragraph">
<p>The SingleSelect widget we want to use here must be added to bcd__sidebar-left__inner div, similar for the apply button and the period chooser.</p>
</div>
<div class="paragraph">
<p>The SingleSelect widget is again created with JavaScript in the script block. Note that the values available are defined as XPath expressions into the model. You should make yourself familiar with XPaths as they are used quite often..</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">bcdui.widgetNg.createSingleSelect({
  <span class="key">targetHtml</span>: <span class="string"><span class="delimiter">'</span><span class="content">countryChooserDiv</span><span class="delimiter">'</span></span>,
  <span class="key">targetModelXPath</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">/*/f:Filter/f:Expression[@bRef = 'country' and @op = '=']/@value</span><span class="delimiter">&quot;</span></span>,
  <span class="key">optionsModelXPath</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">$countriesModel/wrs:Wrs/wrs:Data/wrs:R/wrs:C/@caption</span><span class="delimiter">&quot;</span></span>,
  <span class="key">optionsModelRelativeValueXPath</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">..</span><span class="delimiter">&quot;</span></span>
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>The optional optionsModelXPath argument specifies the data source for the options presented to the user.
Because optionsModelXPath is a string attribute we have to set an explicit id for the StaticModel. We choose 'countriesModel'.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
References to a DataProviders in XPaths are built with a <code>$</code> followed by the DataProvider&#8217;s id, like <code>$countriesModel</code>.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Sample for HTML custom elements</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;label&gt;</span>Country<span class="tag">&lt;/label&gt;</span>
<span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcd__select-container</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;bcd-singleselectng</span>
      <span class="attribute-name">targetModelXPath</span> = <span class="string"><span class="delimiter">&quot;</span><span class="content">/*/f:Filter/f:Expression[@bRef = 'country' and @op = '=']/@value</span><span class="delimiter">&quot;</span></span>
      <span class="attribute-name">optionsModelXPath</span> = <span class="string"><span class="delimiter">&quot;</span><span class="content">$countriesModel/wrs:Wrs/wrs:Data/wrs:R/wrs:C/@caption</span><span class="delimiter">&quot;</span></span><span class="error">,</span>
      <span class="attribute-name">optionsModelRelativeValueXPath</span> = <span class="string"><span class="delimiter">&quot;</span><span class="content">..</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/bcd-singleselectng&gt;</span>
<span class="tag">&lt;/div&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The chosen item will be stored in the guiStatus (because it&#8217;s the default) using the targetXPath position.
In this case we write a filter on the "country" <em>BindingItem</em>.
You can find more about widgets <a href="#DocWidgets">here</a>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/simpleReq_simpleReq.png" alt="simpleReq simpleReq">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_two_way_binding_of_widgets">Two-way binding of widgets</h4>
<div class="paragraph">
<p>If you have both versions of the country chooser (JavaScript and custom HTML) on the page, you will notice that they are always in sync. That is, if you change one, the other changes as well. This shows an important feature of BCD-UI.<br>
When a chooser is writing to its target model, which is <em>guiStatus</em> here since it is the default for widgets, the <em>guiStatus</em> informs all listeners depending on it about a change. This gives them the chance to reflect the value correctly at any time.<br>
While here the target model is the <em>guiStatus</em>, this concept works with any of your models.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="DocMinimalCube">4. Minimal cube setup</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this section we will use one of BCD-UI&#8217;s powerful components, the <a href="#DocCube">Cube</a>.<br>
Now that you already managed create your first page in the previous section,
we will also take the chance and explain things in more detail.</p>
</div>
<div class="sect2">
<h3 id="_overview_3">4.1. Overview</h3>
<div class="paragraph">
<p>A <em>cube</em> allows for slicing and dicing data by free dimensions easily and quickly in a pivot-like manner.
The following steps are necessary to create a report page:<br></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Define BindingSets for the logical data model</dt>
<dd>
<p>To access the database, you define BindingSets as the application&#8217;s logical view to the database.</p>
</dd>
<dt class="hdlist1">Set up a page</dt>
<dd>
<p>Load bcdui.js onto you HTML page and add the predefined divs needed by the theme</p>
</dd>
<dt class="hdlist1">Add report filters to the page</dt>
<dd>
<p>This allows you to define which data is taken into account for the report.</p>
</dd>
<dt class="hdlist1">Add a cube component on the page</dt>
<dd>
<p>This allows you to choose the dimensions and measures you want to see.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_step_by_step_3">4.2. Step by step</h3>
<div class="sect3">
<h4 id="_definition_of_the_logical_data_model">Definition of the logical data model</h4>
<div class="paragraph">
<p>BCD-UI uses BindingSets to access the underlying database.
A BindingSet defines the logical names and constraints, which apply when accessing the database.<br>
We start with the BindingSet for the country list. Add the following file to <code>WEB-INF/bcdui/bindings/myGeoData.xml</code>, adjusted o a table you have:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;BindingSet</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.businesscode.de/schema/bcdui/bindings-1.0.0</span><span class="delimiter">&quot;</span></span>
            <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">myGeoData</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">table</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">mb_test_md_geo</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>   <i class="conum" data-value="1"></i><b>(1)</b> <i class="conum" data-value="2"></i><b>(2)</b> <i class="conum" data-value="3"></i><b>(3)</b>

  <span class="tag">&lt;C</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">country</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">isKey</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Country</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span> <i class="conum" data-value="4"></i><b>(4)</b>
    <span class="tag">&lt;Column&gt;</span>country<span class="tag">&lt;/Column&gt;</span> <i class="conum" data-value="5"></i><b>(5)</b>
  <span class="tag">&lt;/C&gt;</span>
<span class="tag">&lt;/BindingSet&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>BindingSet root element namespace need to be correct</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>id</code> is the logical name within the application</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>table</code> is the physical name of the table or view it the database</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Each <code>bnd:C</code> is a <em>BindingItem</em> represents an individual column, you give it a logical id and you can enforce some attributes</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>This is the column expression for the database, often simply the column name but in can also be something more complex like <code>substr(colame,2)</code></td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
BindingSets are located in <code>WEB-INF/bcdui/bindings</code> or  sub-folder and are evaluated by BCD-UI on start time.
Information like the data type can be given in the file, otherwise it is derived from the column&#8217;s physical data type. But you can always overwrite this in the BindingSet if you need to.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To define a BindingSet for the table (or view) holding the data that shall be shown in a cube,
create a file <code>WEB-INF/bcdui/bindings/myReportData1.xml</code> and adjust the following content to your table and column names:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;BindingSet</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.businesscode.de/schema/bcdui/bindings-1.0.0</span><span class="delimiter">&quot;</span></span>
            <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">myReportData1</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">table</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">MB_TEST_DEMO_SHIPMENT</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>

  <span class="tag">&lt;C</span> <span class="attribute-name">isKey</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">transport_id</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Transport Id</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">VARCHAR</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;Column&gt;</span>ITEM_ID<span class="tag">&lt;/Column&gt;</span>
  <span class="tag">&lt;/C&gt;</span>
  <span class="tag">&lt;C</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">orig_country</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Origin Country</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">VARCHAR</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;Column&gt;</span>ORIG_CTR<span class="tag">&lt;/Column&gt;</span>
  <span class="tag">&lt;/C&gt;</span>
  <span class="tag">&lt;C</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">orig_area</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Origin Area</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">VARCHAR</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;Column&gt;</span>ORIG_GEO_1<span class="tag">&lt;/Column&gt;</span>
  <span class="tag">&lt;/C&gt;</span>
  <span class="tag">&lt;C</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">dest_country</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Destination Country</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">VARCHAR</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;Column&gt;</span>DEST_CTR<span class="tag">&lt;/Column&gt;</span>
  <span class="tag">&lt;/C&gt;</span>
  <span class="tag">&lt;C</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">dest_area</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Destination Area</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">VARCHAR</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;Column&gt;</span>DEST_GEO_1<span class="tag">&lt;/Column&gt;</span>
  <span class="tag">&lt;/C&gt;</span>
  <span class="tag">&lt;C</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">product_code</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Product code</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">VARCHAR</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;Column&gt;</span>PRODUCT<span class="tag">&lt;/Column&gt;</span>
  <span class="tag">&lt;/C&gt;</span>
  <span class="tag">&lt;C</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">dy</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Date</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">DATE</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;Column&gt;</span>dy<span class="tag">&lt;/Column&gt;</span>
  <span class="tag">&lt;/C&gt;</span>
  <span class="tag">&lt;C</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">yr</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">YR</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">INTEGER</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;Column&gt;</span>YR<span class="tag">&lt;/Column&gt;</span>
  <span class="tag">&lt;/C&gt;</span>
  <span class="tag">&lt;C</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">mo</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">MO</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">INTEGER</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;Column&gt;</span>MO<span class="tag">&lt;/Column&gt;</span>
  <span class="tag">&lt;/C&gt;</span>
  <span class="tag">&lt;C</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">cost</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Cost</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;Column&gt;</span>cost<span class="tag">&lt;/Column&gt;</span>
  <span class="tag">&lt;/C&gt;</span>
  <span class="tag">&lt;C</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">weight</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Weight</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;Column&gt;</span>weight<span class="tag">&lt;/Column&gt;</span>
  <span class="tag">&lt;/C&gt;</span>
  <span class="tag">&lt;C</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">volume</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Volume</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;Column&gt;</span>shipment_size<span class="tag">&lt;/Column&gt;</span>
  <span class="tag">&lt;/C&gt;</span>
<span class="tag">&lt;/BindingSet&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_page_setup">Page setup</h4>
<div class="paragraph">
<p>Add a page <code>WebContent/minimalCube/index.html</code> to your application.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="doctype">&lt;!DOCTYPE HTML&gt;</span>
<span class="tag">&lt;html&gt;</span>
<span class="tag">&lt;head&gt;</span>
  <span class="tag">&lt;meta</span> <span class="attribute-name">charset</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">UTF-8</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
  <span class="tag">&lt;title&gt;</span>Blank Page<span class="tag">&lt;/title&gt;</span>
  <span class="tag">&lt;link</span> <span class="attribute-name">rel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">shortcut icon</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">./favicon.ico</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
  <span class="tag">&lt;script</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text/javascript</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">./bcdui/bcdui.js</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/script&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="tag">&lt;/head&gt;</span>
<span class="tag">&lt;body&gt;</span>
<span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcd__outer-wrapper</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span> <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcd__wrapper</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcd__horizontal-split</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>

      <span class="comment">&lt;!-- Header --&gt;</span>
      <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcd__header</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcd__header__upper</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
          <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcd__header__logo</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">../bcdui/theme/images/bcd_logo.png</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">alt</span>=<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/div&gt;</span>
          <span class="tag">&lt;div&gt;</span><span class="tag">&lt;/div&gt;</span>
        <span class="tag">&lt;/div&gt;</span>
        <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcd__header__navigation</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/div&gt;</span> <i class="conum" data-value="3"></i><b>(3)</b>
      <span class="tag">&lt;/div&gt;</span>

      <span class="comment">&lt;!-- Main area --&gt;</span>
      <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcd__vertical-split</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>

        <span class="comment">&lt;!-- Sidebar --&gt;</span> <i class="conum" data-value="4"></i><b>(4)</b>
        <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcd__sidebar-left</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
          <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcd__sidebar-left__inner</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcd__sidebar-left-collaps-toggle-wrapper</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;button</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcd__sidebar-left-collaps-toggle bcd__sidebar-left-collaps-toggle--collapsed</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;i</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">fas fa-caret-left</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/i&gt;</span><span class="tag">&lt;/button&gt;</span><span class="tag">&lt;/div&gt;</span>

            <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcd__form-container</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
              <span class="comment">&lt;!-- place your sidebar widgets here --&gt;</span>
              <span class="tag">&lt;section&gt;</span>
                <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcd__form-group</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                  <span class="tag">&lt;label</span> <span class="attribute-name">for</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">s1</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Apply<span class="tag">&lt;/label&gt;</span>
                  <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcd__select-container</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                    <span class="tag">&lt;div</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">applyDiv</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/div&gt;</span>
                   <span class="tag">&lt;/div&gt;</span>
                <span class="tag">&lt;/div&gt;</span>
              <span class="tag">&lt;/section&gt;</span>
            <span class="tag">&lt;/div&gt;</span>

          <span class="tag">&lt;/div&gt;</span>
        <span class="tag">&lt;/div&gt;</span>

        <span class="comment">&lt;!-- Main content area --&gt;</span> <i class="conum" data-value="5"></i><b>(5)</b>
        <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcd__content-container</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
          <span class="tag">&lt;h1&gt;</span>Blank Page<span class="tag">&lt;/h1&gt;</span>

          <span class="tag">&lt;div</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">myDataDiv</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/div&gt;</span> <i class="conum" data-value="6"></i><b>(6)</b>
        <span class="tag">&lt;/div&gt;</span>

      <span class="tag">&lt;/div&gt;</span>

      <span class="comment">&lt;!-- Footer --&gt;</span>
      <span class="tag">&lt;footer&gt;</span>
        <span class="tag">&lt;p&gt;</span><span class="entity">&amp;copy;</span> 2021 BusinessCode GmbH<span class="tag">&lt;/p&gt;</span>
        <span class="tag">&lt;nav&gt;</span>
          <span class="tag">&lt;ul&gt;</span>
            <span class="tag">&lt;li&gt;</span><span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Imprint<span class="tag">&lt;/a&gt;</span><span class="tag">&lt;/li&gt;</span>
            <span class="tag">&lt;li&gt;</span><span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Privacy<span class="tag">&lt;/a&gt;</span><span class="tag">&lt;/li&gt;</span>
          <span class="tag">&lt;/ul&gt;</span>
        <span class="tag">&lt;/nav&gt;</span>
      <span class="tag">&lt;/footer&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;/div&gt;</span>
<span class="tag">&lt;/div&gt;</span>
<i class="conum" data-value="7"></i><b>(7)</b>
<span class="tag">&lt;script&gt;</span>
<span class="tag">&lt;/script&gt;</span>
<span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Load bcdui/bcdui.js, that&#8217;s all.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>BCD-UI theme requires some HTML elements for the layout</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>This area, <em>sidebar</em>, will hold our choosers, it is convenient for styling but not necessary for function</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>This is the main page part of the theme</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Place any JavaScript code here</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You should now be able to see a styled page if you navigate to it with the browser.
Otherwise, you probably missed adding bcdui.jar and the web.xml entries, <a href="#DocGettingStarted">application setup</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_add_a_report_filter">Add a report filter</h4>
<div class="paragraph">
<p>Report filters are widgets allowing the user to restrict data to be shown in a report.
Many filters show values to choose from based on reference data.<br>
The filter in this example uses a list of countries to choose from.
To add a model with the available data, add the following code to your script block at page bottom:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">  <span class="comment">// Load the geo data for the chooser</span>
  <span class="keyword">var</span> autoModel = <span class="keyword">new</span> bcdui.core.AutoModel({
    <span class="key">id</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">geoData</span><span class="delimiter">&quot;</span></span>, <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="key">bindingSetId</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">myGeoData</span><span class="delimiter">&quot;</span></span>, <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="key">bRefs</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">country</span><span class="delimiter">&quot;</span></span>, <i class="conum" data-value="3"></i><b>(3)</b>
    <span class="key">isDistinct</span>: <span class="predefined-constant">true</span>
  });</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Id of the loaded data if referenced in an XPath via $geoData</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Id of the BindingSet used to retrieve the data</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Space separated ids of the BindingItems of the BindingSet</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For the widget, if we create it via JavaScript, we need a place in HTML, where it should appear.
We will add 2 widgets: A country chooser and a button to re-run the report.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html">    <span class="tag">&lt;div</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcdSideBarContainer</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>  <i class="conum" data-value="1"></i><b>(1)</b>
      <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcdSection</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;span</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcdSectionCaption</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Settings<span class="tag">&lt;/span&gt;</span>
        <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcdItem</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
          <span class="tag">&lt;span</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcdCaption</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Origin Country<span class="tag">&lt;/span&gt;</span>
          <span class="tag">&lt;div</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">geoChooserTH</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/div&gt;</span> <i class="conum" data-value="2"></i><b>(2)</b>
          <span class="tag">&lt;span</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcdCaption</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Run<span class="tag">&lt;/span&gt;</span>
          <span class="tag">&lt;div</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">applyTH</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/div&gt;</span>
        <span class="tag">&lt;/div&gt;</span>
      <span class="tag">&lt;/div&gt;</span>
    <span class="tag">&lt;/div&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This is the container for the theme&#8217;s <em>sidebar</em></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>This is where the country chooser goes</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <em>sidebar</em> is an extra area of the theme, often used for widgets.
BCD-UI theme helps creating such an area, but there is no technical need to use it, you may place choosers anywhere on your page.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Create the widgets:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">  <span class="comment">// Create a chooser for geo data</span>
  bcdui.widgetNg.createSingleSelect({
    <span class="key">targetHtml</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">geoChooserTH</span><span class="delimiter">&quot;</span></span>, <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="key">targetModelXPath</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">$guiStatus/*/f:Filter/f:Expression[@bRef = 'orig_country' and @op = '=']/@value</span><span class="delimiter">&quot;</span></span>, <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="key">optionsModelXPath</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">$geoData//wrs:Data/wrs:R/wrs:C[1]</span><span class="delimiter">&quot;</span></span> <i class="conum" data-value="3"></i><b>(3)</b>
  });
  <span class="comment">// Create a button to re-execute the page</span>
  bcdui.widgetNg.createButton({
    <span class="key">onClickAction</span>: bcdui.core.lifecycle.applyAction, <i class="conum" data-value="4"></i><b>(4)</b>
    <span class="key">targetHtml</span>: <span class="string"><span class="delimiter">'</span><span class="content">applyTH</span><span class="delimiter">'</span></span>,
    <span class="key">caption</span>: <span class="string"><span class="delimiter">'</span><span class="content">Apply</span><span class="delimiter">'</span></span>
  });</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>targetHtml</code> tells us where to place the widget.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>targetModelXPath</code> defines where the output will be stored.
Note that this is an XPath and $guiStatus refers to a DataProvider with id 'guiStatus'.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>optionsModelXPath</code> tells us where the values to select from come from</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td><code>bcdui.core.lifecycle.applyAction</code> is a function that comes with BCD-UI for re-loading the page with the current guiStatus</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="images/minimalCube_chooser.png" alt="minimalCube chooser">
</div>
<div class="title">Figure 1. After page reload, you should see this</div>
</div>
<div class="paragraph">
<p>The chosen item will be stored in the guiStatus using the targetModelXPath&#8217;s form and position.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If a chooser uses f:Filter format for its output and places its output in guiStatus below <code>/guiStatus:Status/f:Filter</code>,
it is automatically picked up by the cube to limit the data retrieved from the server.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can find more widgets <a href="#DocWidgets">here</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_define_the_cube">Define the cube</h4>
<div class="paragraph">
<p>By default, the cube uses a file called <code>cubeConfiguration.xml</code> in the same folder as your HTML page.
This configuration file holds the Cube&#8217;s information about dimensions and measures and the source BindingSet.<br>
If your BindingItems are different, adjust them here.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;cube:CubeConfiguration</span> <span class="attribute-name">xmlns:cube</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.businesscode.de/schema/bcdui/cube-2.0.0</span><span class="delimiter">&quot;</span></span>
                        <span class="attribute-name">xmlns:calc</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.businesscode.de/schema/bcdui/calc-1.0.0</span><span class="delimiter">&quot;</span></span>
                        <span class="attribute-name">xmlns:dm</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.businesscode.de/schema/bcdui/dimmeas-1.0.0</span><span class="delimiter">&quot;</span></span>
                        <span class="attribute-name">xmlns:wrq</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.businesscode.de/schema/bcdui/wrs-request-1.0.0</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>

  <span class="tag">&lt;wrq:BindingSet&gt;</span>myReportData1<span class="tag">&lt;/wrq:BindingSet&gt;</span>
  <span class="tag">&lt;cube:Dimensions&gt;</span>
    <span class="tag">&lt;dm:LevelRef</span> <span class="attribute-name">bRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">orig_country</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">total</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">trailing</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Origin Country</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;dm:LevelRef</span> <span class="attribute-name">bRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">orig_area</span><span class="delimiter">&quot;</span></span>    <span class="attribute-name">total</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">trailing</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Origin Area</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;dm:LevelRef</span> <span class="attribute-name">bRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">dest_country</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">total</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">trailing</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Destination Country</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;dm:LevelRef</span> <span class="attribute-name">bRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">dest_area</span><span class="delimiter">&quot;</span></span>    <span class="attribute-name">total</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">trailing</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Destination Area</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;dm:LevelRef</span> <span class="attribute-name">bRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">product_code</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">total</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">trailing</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Product Code</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;dm:LevelRef</span> <span class="attribute-name">bRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">dy</span><span class="delimiter">&quot;</span></span>           <span class="attribute-name">total</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">trailing</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Day</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;dm:LevelRef</span> <span class="attribute-name">bRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">yr</span><span class="delimiter">&quot;</span></span>           <span class="attribute-name">total</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">trailing</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Year</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;dm:LevelRef</span> <span class="attribute-name">bRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">mo</span><span class="delimiter">&quot;</span></span>           <span class="attribute-name">total</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">trailing</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Month</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
  <span class="tag">&lt;/cube:Dimensions&gt;</span>
  <span class="tag">&lt;dm:Measures&gt;</span>
    <span class="tag">&lt;dm:Measure</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">cost</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Cost</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;calc:Calc</span> <span class="attribute-name">type-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">NUMERIC</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">scale</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;calc:ValueRef</span> <span class="attribute-name">idRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">cost</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">aggr</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">sum</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;/calc:Calc&gt;</span>
    <span class="tag">&lt;/dm:Measure&gt;</span>
    <span class="tag">&lt;dm:Measure</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">weight</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Weight</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;calc:Calc</span> <span class="attribute-name">type-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">NUMERIC</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">unit</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">kg</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;calc:ValueRef</span> <span class="attribute-name">idRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">weight</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">aggr</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">sum</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;/calc:Calc&gt;</span>
    <span class="tag">&lt;/dm:Measure&gt;</span>
    <span class="tag">&lt;dm:Measure</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">volume</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Volume [cbm]</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;calc:Calc</span> <span class="attribute-name">type-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">NUMERIC</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">scale</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;calc:ValueRef</span> <span class="attribute-name">idRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">volume</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">aggr</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">sum</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;/calc:Calc&gt;</span>
    <span class="tag">&lt;/dm:Measure&gt;</span>
    <span class="tag">&lt;dm:Measure</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">volumeAvg</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Avg. Cost</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;calc:Calc</span> <span class="attribute-name">type-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">NUMERIC</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">scale</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;calc:ValueRef</span> <span class="attribute-name">idRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">volume</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">aggr</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">avg</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;/calc:Calc&gt;</span>
    <span class="tag">&lt;/dm:Measure&gt;</span>
    <span class="tag">&lt;dm:Measure</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">weightPerVolume</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Weight/Vol.</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;calc:Calc</span> <span class="attribute-name">type-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">NUMERIC</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">scale</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">3</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;calc:Div&gt;</span>
          <span class="tag">&lt;calc:ValueRef</span> <span class="attribute-name">idRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">weight</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">aggr</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">sum</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
          <span class="tag">&lt;calc:ValueRef</span> <span class="attribute-name">idRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">volume</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">aggr</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">sum</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;/calc:Div&gt;</span>
      <span class="tag">&lt;/calc:Calc&gt;</span>
    <span class="tag">&lt;/dm:Measure&gt;</span>
  <span class="tag">&lt;/dm:Measures&gt;</span>
<span class="tag">&lt;/cube:CubeConfiguration&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Further options available for cubes are described <a href="#DocCube">here</a>.</p>
</div>
<div class="paragraph">
<p>We already prepared the HTML to contain a div with id <code>myData</code>, this is where we will show our cube&#8217;s output.<br>
Add the following to the script at the page bottom:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">  <span class="comment">// Create a Cube component</span>
  <span class="keyword">var</span> cube = <span class="keyword">new</span> bcdui.component.cube.Cube({ <span class="key">targetHtml</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">cubeTH</span><span class="delimiter">&quot;</span></span> });</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you load the page for the first time, no data is displayed, because we did not yet tell the cube which one to show.
You can do this statically or let the user decide, we go for the second option and add a powerful user interface.</p>
</div>
</div>
<div class="sect3">
<h4 id="_add_a_cubes_drag_and_drop_area">Add a cube&#8217;s drag and drop area</h4>
<div class="paragraph">
<p>To create a CubeConfigurator, add a file <code>dimensionsAndMeasures.xml</code> to your folder.
This one tells the CubConfigurator to just derive its content from dimensionsAndMeasures.xml.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="comment">&lt;!-- Use the Cube's config for CubeConfigurator --&gt;</span>
<span class="tag">&lt;cube:CubeConfiguration</span> <span class="attribute-name">xmlns:cube</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.businesscode.de/schema/bcdui/cube-2.0.0</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;xi:include</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">./cubeConfiguration.xml</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xpointer</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/*/*</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:xi</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/XInclude</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/cube:CubeConfiguration&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Add this to the JavaScript area to create the actual cube component:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">  <span class="comment">// Create CubeConfigutator in form of a Drag and Drop Area</span>
  bcdui.component.createCubeConfigurator({
    <span class="key">targetHtml</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">cubeConfiguratorTH</span><span class="delimiter">&quot;</span></span>,
    <span class="key">cubeRenderer</span>: cube.id,
    <span class="key">contextMenu</span>: <span class="predefined-constant">true</span>,
    <span class="key">isDefaultHtmlLayout</span>: <span class="predefined-constant">true</span>
  });</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_testing_the_report">Testing the report</h4>
<div class="paragraph">
<p>Congratulations, these were all steps required to  set up a reporting cube.
You can now test the report!</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/minimalCube_cube.png" alt="minimalCube cube">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_where_to_go_from_here">Where to go from here</h4>
<div class="ulist">
<ul>
<li>
<p><a href="#DocExports">More about the Cube and export</a></p>
</li>
<li>
<p><a href="#DocCharts">Charts</a></p>
</li>
<li>
<p><a href="#DocMenu">Menu</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="DocCoreArtifacts">5. Core concepts of BCD-UI</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_using_bcd_ui">5.1. Using BCD-UI</h3>
<div class="sect3">
<h4 id="_page_core_components">Page core components</h4>
<div class="paragraph">
<p>The following components are core on the client side of BCD-UI. They follow the well-known Model/View/Control architecture:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">DataProvider</dt>
<dd>
<p>DataProviders are client side <em>models</em> containing the data of the client, like reporting data, reference data and data reflecting user selections.
On the client, models store their data per default as XML documents, on server side data is stored in a relational database.
Models provide options for loading and changing data, informing listener about changes and saving data back to the server. Data is loaded lazily, i.e. only once it is needed.</p>
</dd>
<dt class="hdlist1">Renderer</dt>
<dd>
<p>Renderers are the <em>views</em> providing the visual parts of the application like reports, edit grids, charts or widgets.
Renderer are implemented in XSLT, JavaScript or doT.js, taking a DataProvider as input and output HTML which is placed on the page.
The default renderer outputs data as a table and can be extended or replace by custom logic.</p>
</dd>
<dt class="hdlist1">Controller</dt>
<dd>
<p>The controller reacts on user interaction, like a button click or a drag and drop activity.
Controllers are small chunks of code implemented in JavaScript.
This code can be provided by the BCD-UI library or by the project.
Not only user interaction but also events thrown by models loading and changing can be used to trigger a controller.</p>
</dd>
<dt class="hdlist1">Widgets</dt>
<dd>
<p>Widgets are small views for user information and interaction like input fields, the menu and fly-overs.
Widgets store their status per default in a page-wide <em>guiStatus</em> to make it and change events centrally available for all parts of the page.</p>
</dd>
<dt class="hdlist1">Components</dt>
<dd>
<p>Components are more complex views, for example cubes or charts, usually requiring a configuration XML.
Components in most cases consist of multiple views and widgets working together.</p>
</dd>
<dt class="hdlist1">Page infrastructure</dt>
<dd>
<p>Page infrastructure comprises the guiStatus, mechanisms for object life-cycle etc.
The guiStatus is the default model for all widgets and client-side status
and thus usually contains all selections done by the user.
Data requests use the guiStatus to decide which data to retrieve.
This infrastructure also covers generic tasks like client side exports or fly-overs.</p>
</dd>
<dt class="hdlist1">Page layout structure</dt>
<dd>
<p>Page layout structure is a set of HTML elements and css classes making up the over-all look and feel of the page frame in corporate a theme.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_server_core_components">Server core components</h4>
<div class="paragraph">
<p>Core server components are:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">WebServices</dt>
<dd>
<p>WebServices exchange XML with a client&#8217;s DataProvider. <a href="#DocXmlData">WrsServlet</a> is the default service for data model requests.</p>
</dd>
<dt class="hdlist1">BindingSets</dt>
<dd>
<p>BindingSets translate between the logical data model of a BCD-UI application and the physical databases and control access to the data.
WebServices use <a href="#DocBinding">bindings</a> to create the appropriate SQL for data reading and writing.</p>
</dd>
<dt class="hdlist1">Servlets</dt>
<dd>
<p>Several servlets provide all kinds of services to BCD-UI clients.
BCD-UI servlets are usually not addressed from users of BCD-UI directly.
Servlets are listed <a href="#DocFilter">here.</a></p>
</dd>
<dt class="hdlist1">Filter</dt>
<dd>
<p>Filter control the traffic from and to the server under different aspects as security and caching.
Filters are listed <a href="#DocFilter">here.</a></p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_delivered_sources">Delivered sources</h4>
<div class="paragraph">
<p>Because BCD-UI applications are Jakarta EE applications, most artifacts are typical Jakarta EE elements.
BCD-UI is delivered in the form of</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Jakarta EE Server components</dt>
<dd>
<p>Servlets and ServletFilters fulfilling server side tasks, for example access right evaluation or file upload.</p>
</dd>
<dt class="hdlist1">WebServices</dt>
<dd>
<p>WebServices serve for XML exchange with the client mainly for database access.</p>
</dd>
<dt class="hdlist1">JavaScript library</dt>
<dd>
<p>JavaScript code forms the base for the client-side controller of the standard Model/View/Control pattern.</p>
</dd>
<dt class="hdlist1">JSP tag library</dt>
<dd>
<p>JSP tags are wrappers of the JavaScript functionality to ease their use on JSP pages. Usage of JSP is optional.</p>
</dd>
<dt class="hdlist1">XSLT library</dt>
<dd>
<p>XSLT forms the base of views of the standard Model/View/Control pattern.</p>
</dd>
<dt class="hdlist1">Configuration files</dt>
<dd>
<p>Configuration XML files allow to modify the behaviour of BCD-UI&#8217;s components.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Each artifact can be extended or replaced by custom-written Java, and Javascript implementing the given interfaces.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="DocComponents">6. Components</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_4">6.1. Overview</h3>
<div class="paragraph">
<p>BCD-Suite contains several ready-to-use components. Here we describe the following, mode can be found in the online docu.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="#DocCube">Cube</a></dt>
<dd>
<p>Cubes provide an easy way for slicing and dicing data according to dimensions into a report table</p>
</dd>
<dt class="hdlist1"><a href="#DocScorecard">ScoreCard</a></dt>
<dd>
<p>A ScoreCard combines KPIs of several aspects into a cross-division or cross-aspect view giving a comprehensive overview for a manager.</p>
</dd>
<dt class="hdlist1"><a href="#DocTreeReport">Tree report</a></dt>
<dd>
<p>A tree report suites the requirement of showing aggregated data with the option to drill in-place into a more detailed view.
An important option is to defer loading of lower levels to the moment a user actually drills into details.</p>
</dd>
<dt class="hdlist1"><a href="#DocCharts">Charts</a></dt>
<dd>
<p>Charts allow for an easy visualization of data in various common ways.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="DocCube">6.2. Cube Component</h3>
<div class="sect3">
<h4 id="_cubes">Cubes</h4>
<div class="paragraph">
<p>Cubes allow to slice and dice data by free dimensions easily and quick in a pivot-like manner.
For a sample page setup with a cube, please check this <a href="#DocMinimalCube">tutorial</a>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/cube_cubeBody.png" alt="cube cubeBody">
</div>
</div>
<div class="paragraph">
<p>The dimensions and measures can either be preset during development or the user can be given a choice of dimensions and measures for his own selection.</p>
</div>
<div class="sect4">
<h5 id="_features">Features</h5>
<div class="paragraph">
<p>BCD-UI cube and cube configurator offer a variety of features:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Free selectable or preset dimensions and measures</dt>
<dd>
<p>Whether the administrator allows free selection of dimensions or measures partly or totally can be configured</p>
</dd>
<dt class="hdlist1">Row and column dimensions are possible</dt>
<dd>
<p>None, one or many break down dimensions can be selected independently for rows and columns. In addition measures can be shown so that they are only broken down be row dimensions even if also column dimensions are selected.</p>
</dd>
<dt class="hdlist1">WYSIWYG export into PDF and spread sheets</dt>
<dd>
<p>The spread sheet export allows to further work wih the numbers. User formulas are be replaced by the calculation results.</p>
</dd>
<dt class="hdlist1">Sorting</dt>
<dd>
<p>Sorting can be done without the need to re-run the report</p>
</dd>
<dt class="hdlist1">TOP-N</dt>
<dd>
<p>Allows top or bottom n rows dimension/measure selections</p>
</dd>
<dt class="hdlist1">Subtotals and grand totals</dt>
<dd>
<p>Can be added on the fly without the need to re-run the report</p>
</dd>
<dt class="hdlist1">User editable formulas for cell values</dt>
<dd>
<p>Can be added on the fly without the need to re-run the report</p>
</dd>
<dt class="hdlist1">Detail export on cell level</dt>
<dd>
<p>The choosers as well as the cell&#8217;s position is taken into account. This allows to exactly export those details which are behind the cell&#8217;s number. For indicator-like percentage numbers it is possible to export only the failed details.</p>
</dd>
<dt class="hdlist1">Easy combination with graphs</dt>
<dd>
<p>Multi measures or multi-dimensions can easily be turned into series in the graphs.</p>
</dd>
<dt class="hdlist1">Named templates</dt>
<dd>
<p>Named templates allow to offer common selections to the user</p>
</dd>
<dt class="hdlist1">Show numerator and denominator of percentage numbers and fractions in tool tips</dt>
<dd>
<p>This feature allows to understand the volumes behind the percentage without running a new report.</p>
</dd>
<dt class="hdlist1">Optimized performance behavior</dt>
<dd>
<p>Cubes can dynamically choose different data tables with highest aggregation available for the report dynamically with the help of <a href="#DocBinding">BindingSetGroups</a> for performance optimization.</p>
</dd>
</dl>
</div>
<div class="imageblock">
<div class="content">
<img src="images/cube_cubeCalculation.png" alt="cube cubeCalculation">
</div>
</div>
<div class="paragraph">
<p>A context menu supports several actions on the cube or a cell, depending on where it opens.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/cube_context1.png" alt="cube context1">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/cube_context2.png" alt="cube context2">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/cube_context3.png" alt="cube context3">
</div>
</div>
</div>
<div class="sect4">
<h5 id="_cube_configuration_document">Cube Configuration Document</h5>
<div class="paragraph">
<p>The cube needs a configuration file (by default: <code>./cubeConfiguration.xml</code>) which lists the data source (binding set), the current layout (selected dimensions and measures) and the measure definitions.<br>
You can provide a static one like this or let the user build one with the CubeConfigurator, see below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;cube:CubeConfiguration</span> <span class="attribute-name">xmlns:cube</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.businesscode.de/schema/bcdui/cube-2.0.0</span><span class="delimiter">&quot;</span></span>
                        <span class="attribute-name">xmlns:calc</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.businesscode.de/schema/bcdui/calc-1.0.0</span><span class="delimiter">&quot;</span></span>
                        <span class="attribute-name">xmlns:dm</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.businesscode.de/schema/bcdui/dimmeas-1.0.0</span><span class="delimiter">&quot;</span></span>
                        <span class="attribute-name">xmlns:wrq</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.businesscode.de/schema/bcdui/wrs-request-1.0.0</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>

  <span class="tag">&lt;cube:Layout&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="tag">&lt;cube:Dimensions</span> <span class="attribute-name">hideTotals</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">false</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>  <i class="conum" data-value="2"></i><b>(2)</b>
      <span class="tag">&lt;cube:Rows&gt;</span>
        <span class="tag">&lt;dm:LevelRef</span> <span class="attribute-name">total</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">trailing</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">bRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">orig_country</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;dm:LevelRef</span> <span class="attribute-name">total</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">trailing</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">bRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">orig_area</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;/cube:Rows&gt;</span>
      <span class="tag">&lt;cube:Columns&gt;</span>
        <span class="tag">&lt;dm:LevelRef</span> <span class="attribute-name">total</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">trailing</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">bRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">product_code</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;/cube:Columns&gt;</span>
    <span class="tag">&lt;/cube:Dimensions&gt;</span>

    <span class="tag">&lt;cube:Measures&gt;</span>  <i class="conum" data-value="3"></i><b>(3)</b>
      <span class="tag">&lt;cube:RowDims</span><span class="tag">/&gt;</span>
      <span class="tag">&lt;cube:AllDims&gt;</span>
        <span class="tag">&lt;dm:MeasureRef</span> <span class="attribute-name">idRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">cost</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;dm:MeasureRef</span> <span class="attribute-name">idRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">weight</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;/cube:AllDims&gt;</span>
    <span class="tag">&lt;/cube:Measures&gt;</span>

  <span class="tag">&lt;/cube:Layout&gt;</span>

  <span class="tag">&lt;wrq:BindingSet&gt;</span>myReportData1<span class="tag">&lt;/wrq:BindingSet&gt;</span> <i class="conum" data-value="4"></i><b>(4)</b>

  <span class="tag">&lt;dm:Dimensions&gt;</span> <i class="conum" data-value="5"></i><b>(5)</b>
    <span class="tag">&lt;dm:LevelRef</span> <span class="attribute-name">bRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">orig_country</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">total</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">trailing</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Origin Country</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;dm:LevelRef</span> <span class="attribute-name">bRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">orig_area</span><span class="delimiter">&quot;</span></span>    <span class="attribute-name">total</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">trailing</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Origin Area</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;dm:LevelRef</span> <span class="attribute-name">bRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">dest_country</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">total</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">trailing</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Destination Country</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;dm:LevelRef</span> <span class="attribute-name">bRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">dest_area</span><span class="delimiter">&quot;</span></span>    <span class="attribute-name">total</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">trailing</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Destination Area</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;dm:LevelRef</span> <span class="attribute-name">bRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">product_code</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">total</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">trailing</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Product Code</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;dm:LevelRef</span> <span class="attribute-name">bRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">dy</span><span class="delimiter">&quot;</span></span>           <span class="attribute-name">total</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">trailing</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Day</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
  <span class="tag">&lt;/dm:Dimensions&gt;</span>

  <span class="tag">&lt;dm:Measures&gt;</span> <i class="conum" data-value="6"></i><b>(6)</b>
    <span class="tag">&lt;dm:Measure</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">cost</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Cost</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;calc:Calc</span> <span class="attribute-name">type-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">NUMERIC</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">scale</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;calc:ValueRef</span> <span class="attribute-name">idRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">cost</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">aggr</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">sum</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;/calc:Calc&gt;</span>
    <span class="tag">&lt;/dm:Measure&gt;</span>
    <span class="tag">&lt;dm:Measure</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">weight</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Weight</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;calc:Calc</span> <span class="attribute-name">type-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">NUMERIC</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">unit</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">kg</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;calc:ValueRef</span> <span class="attribute-name">idRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">weight</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">aggr</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">sum</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;/calc:Calc&gt;</span>
    <span class="tag">&lt;/dm:Measure&gt;</span>
    <span class="tag">&lt;dm:Measure</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">weightPerVolume</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Weight/Vol.</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;calc:Calc</span> <span class="attribute-name">type-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">NUMERIC</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">scale</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">3</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;calc:Div&gt;</span>
          <span class="tag">&lt;calc:ValueRef</span> <span class="attribute-name">idRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">weight</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">aggr</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">sum</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
          <span class="tag">&lt;calc:ValueRef</span> <span class="attribute-name">idRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">volume</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">aggr</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">sum</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;/calc:Div&gt;</span>
      <span class="tag">&lt;/calc:Calc&gt;</span>
    <span class="tag">&lt;/dm:Measure&gt;</span>
  <span class="tag">&lt;/dm:Measures&gt;</span>

<span class="tag">&lt;/cube:CubeConfiguration&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This is the actual layout of the cube, its elements references items defined in the next sections</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>This are the actual applied dimensions of the report, they can be row, column or both (all)</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>This are the actual applied measures</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>This is the BindingSet from which to get the data, it connects to the database</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>These are the dimensions in principle available. In most cases this included via is <code>xi:include</code> because it is reused</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>These are the measures in principle available. In most cases this included via is <code>xi:include</code> because it is reused</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If you add a <a href="../jsdoc/bcdui.component.cube.Cube.html" target="_blank" rel="noopener">bcdui.component.cube.Cube</a>, this sample leads to:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/cube_fixCube.png" alt="cube fixCube">
</div>
</div>
<div class="paragraph">
<p>See <a href="https://github.com/businesscode/BCD-UI/blob/master/Docu/xsd/cube-2.0.0.xsd" target="_blank" rel="noopener">cube-2.0.0.xsd</a> for the exact format and options.</p>
</div>
</div>
<div class="sect4">
<h5 id="_cubeconfigurator">CubeConfigurator</h5>
<div class="paragraph">
<p>The cube:Layout part above can also be defined by the user via a drag-and-drop area.
This sample shows the drag and drop user interface, also supporting ranking editing and a cube summary display.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/cube_cubeDnD.png" alt="cube cubeDnD">
</div>
</div>
<div class="paragraph">
<p>This configurator also needs a configuration file (by default: <code>./dimensionsAndMeasures.xml</code>) which references dimensions and measures available to the user.
Often, this information is simply derived from <code>cubeConfiguration.xml</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="comment">&lt;!-- Use the Cube's config for CubeConfigurator --&gt;</span>
<span class="tag">&lt;cube:CubeConfiguration</span> <span class="attribute-name">xmlns:cube</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.businesscode.de/schema/bcdui/cube-2.0.0</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;xi:include</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">./cubeConfiguration.xml</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xpointer</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/*/*</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:xi</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/XInclude</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/cube:CubeConfiguration&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="DocScorecard">6.3. ScoreCard Component</h3>
<div class="sect3">
<h4 id="_scorecard_overview">Scorecard overview</h4>
<div class="paragraph">
<p>A ScoreCard is a KPI based, one-stop, comprehensive overview of all aspects of an area of responsibility.<br>
KPIs - key performance indicators - are aggregated values of performance, volumes, productivity, process compliance and other aspects shown plain or in a break-down, often with a target.
Because a ScoreCard covers overview about different aspects and different business objects, a ScoreCard often serves as the entry point into reporting and supports drilling into further analysis.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/scorecard_scoreCardPart.png" alt="scorecard scoreCardPart">
</div>
</div>
<div class="dlist">
<div class="title">Some Terminology</div>
<dl>
<dt class="hdlist1">Measures</dt>
<dd>
<p>Measures are aggregatable, often calculation, values, representing a measurable quantity like a count of pieces or sum of weight.
Measures and indicator measures form the base of KPIs.</p>
</dd>
<dt class="hdlist1">Indicator measures</dt>
<dd>
<p>Indicator measures are special boolean measures, representing for example a process compliance.
For example, whether a contract process was closed in planned time.
Indicator measures inherit all possibilities from ordinary measures but allow additional features.</p>
</dd>
<dt class="hdlist1">KPI</dt>
<dd>
<p>A KPI represents a key performance value and is calculated based on measures.
A KPI has a calculation definition, a unit, which is often percent and a description.
Often it is associated with targets and other attributes.</p>
</dd>
<dt class="hdlist1">Aspects</dt>
<dd>
<p>They describe what aspects of KPIs are shown on a ScoreCard.
Typical aspects are performance or YTD, trends or achievements.
Calculation rules of aspects are not dependent on a specific KPI but they can make use of KPI specific data and calculations.
There are three types of aspects:</p>
<div class="ulist">
<ul>
<li>
<p>Kpi aspects modify the KPI calculation in some way, for example YTD or previous-period performance and re-execute the clients KPI calculation.</p>
</li>
<li>
<p>Attribute aspects load additional data like targets or comments for each KPI. They don&#8217;t aggregate up.</p>
</li>
<li>
<p>Meta aspects only use other aspects in their calculation, like trend, using the performance and the previous-period performance.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">KPI Targets</dt>
<dd>
<p>Targets are KPI aspects indicating, what value a KPI should have.
The comparison of a KPI value with the target provides the achievement.</p>
</dd>
<dt class="hdlist1">ScoreCard</dt>
<dd>
<p>A ScoreCard or dashboard shows a set of KPIs together with their attributes and aspects and provides drill over possibilities.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_configuration">Configuration</h4>
<div class="paragraph">
<p>To set up a scorecard, the following steps are required:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Create the definition for the aggregators, i.e. define where and how to find the measures based on BindingSets</p>
</li>
<li>
<p>Optionally create the definition for aspects, i.e. define where and how to find additional information about KPIs like targets or previous-period performance</p>
</li>
<li>
<p>Create the definition for all KPIs, i.e. define the calculation rules for KPIs based on the available measures.</p>
</li>
<li>
<p>Create an HTML page with a <a href="../jsdoc/bcdui.component.scorecard.Scorecard.html" target="_blank" rel="noopener">bcdui.component.scorecard.Scorecard</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The scorecard is configured with following schema <a href="https://github.com/businesscode/BCD-UI/blob/master/Docu/xsd/scorecard-1.0.0.xsd" target="_blank" rel="noopener">scorecard-1.0.0.xsd</a>.
A typical scorecard configuration has the following structure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="tag">&lt;scc:ScorecardConfiguration</span> <span class="attribute-name">xmlns:scc</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.businesscode.de/schema/bcdui/scorecard-1.0.0</span><span class="delimiter">&quot;</span></span>
                            <span class="attribute-name">xmlns:calc</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.businesscode.de/schema/bcdui/calc-1.0.0</span><span class="delimiter">&quot;</span></span>
                            <span class="attribute-name">xmlns:dm</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.businesscode.de/schema/bcdui/dimmeas-1.0.0</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>

  <span class="tag">&lt;scc:Layout&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="tag">&lt;scc:KpiRefs&gt;</span>  <i class="conum" data-value="2"></i><b>(2)</b>
      <span class="tag">&lt;scc:KpiRef</span> <span class="attribute-name">idRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">k01</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
      <span class="tag">&lt;scc:KpiRef</span> <span class="attribute-name">idRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">k02</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
      <span class="tag">&lt;scc:KpiRef</span> <span class="attribute-name">idRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">k03</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;/scc:KpiRefs&gt;</span>

    <span class="tag">&lt;scc:AspectRefs&gt;</span>  <i class="conum" data-value="3"></i><b>(3)</b>
      <span class="tag">&lt;scc:AspectKpi</span><span class="tag">/&gt;</span>
      <span class="tag">&lt;scc:AspectRef</span> <span class="attribute-name">idRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcdYtd</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/scc:AspectRefs&gt;</span>

    <span class="tag">&lt;scc:Dimensions&gt;</span>  <i class="conum" data-value="4"></i><b>(4)</b>
      <span class="tag">&lt;scc:Rows&gt;</span>
        <span class="tag">&lt;scc:LevelKpi</span><span class="tag">/&gt;</span>
      <span class="tag">&lt;/scc:Rows&gt;</span>
      <span class="tag">&lt;scc:Columns&gt;</span>
        <span class="tag">&lt;dm:LevelRef</span> <span class="attribute-name">bRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">yr</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">sort</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">descending</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
        <span class="tag">&lt;dm:LevelRef</span> <span class="attribute-name">bRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">mo</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">sort</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">descending</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">captionBRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">mo_caption</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">sortBy</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">mo</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;/scc:Columns&gt;</span>
    <span class="tag">&lt;/scc:Dimensions&gt;</span>

  <span class="tag">&lt;/scc:Layout&gt;</span>

  <span class="tag">&lt;scc:Kpis</span> <span class="attribute-name">aspectKpiCaption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Actual</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>  <i class="conum" data-value="5"></i><b>(5)</b>

    <span class="tag">&lt;scc:Kpi</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">k01</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">K01 Cpt</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;calc:Calc</span> <span class="attribute-name">scale</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">2</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">NUMERIC</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">zeroIfNullOp</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">unit</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">%</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>  <i class="conum" data-value="6"></i><b>(6)</b>
        <span class="tag">&lt;calc:Div&gt;</span>
          <span class="tag">&lt;calc:ValueRef</span> <span class="attribute-name">idRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">K01.i</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">aggr</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcdSum</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>  <i class="conum" data-value="7"></i><b>(7)</b>
          <span class="tag">&lt;calc:ValueRef</span> <span class="attribute-name">idRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">K01.t</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">aggr</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcdSum</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;/calc:Div&gt;</span>
      <span class="tag">&lt;/calc:Calc&gt;</span>
      <span class="tag">&lt;scc:Categories</span> <span class="attribute-name">geoLevel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">gl</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ibob</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ob</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>  <i class="conum" data-value="8"></i><b>(8)</b>
    <span class="tag">&lt;/scc:Kpi&gt;</span>

    <span class="tag">&lt;scc:Kpi</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">k02</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">K02 Cpt</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;calc:Calc</span> <span class="attribute-name">scale</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">2</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">NUMERIC</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">zeroIfNullOp</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">unit</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">%</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;calc:Div&gt;</span>
          <span class="tag">&lt;calc:ValueRef</span> <span class="attribute-name">idRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">K02.i</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">aggr</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcdSum</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
          <span class="tag">&lt;calc:ValueRef</span> <span class="attribute-name">idRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">K02.t</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">aggr</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcdSum</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;/calc:Div&gt;</span>
      <span class="tag">&lt;/calc:Calc&gt;</span>
      <span class="tag">&lt;scc:Categories</span> <span class="attribute-name">geoLevel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">gl</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ibob</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ib</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/scc:Kpi&gt;</span>

    <span class="tag">&lt;scc:Kpi</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">k03</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">K03 Cpt</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;calc:Calc</span> <span class="attribute-name">scale</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">2</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">NUMERIC</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">zeroIfNullOp</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">unit</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">%</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;calc:Div&gt;</span>
          <span class="tag">&lt;calc:ValueRef</span> <span class="attribute-name">idRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">K03.i</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">aggr</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcdSum</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
          <span class="tag">&lt;calc:ValueRef</span> <span class="attribute-name">idRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">K03.t</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">aggr</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcdSum</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;/calc:Div&gt;</span>
      <span class="tag">&lt;/calc:Calc&gt;</span>
      <span class="tag">&lt;scc:Categories</span> <span class="attribute-name">geoLevel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">reg</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ibob</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ob</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/scc:Kpi&gt;</span>
  <span class="tag">&lt;/scc:Kpis&gt;</span>

  <span class="comment">&lt;!-- Additional aggregators and aspects go here --&gt;</span>  <i class="conum" data-value="9"></i><b>(9)</b>

<span class="tag">&lt;/scc:ScorecardConfiguration&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This is the actual layout, referencing the definitions below</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>List of KPIs to be included in the scorecard</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>List of aspects to be shown, applied to each KPI</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Dimensions if a break-down is requested</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>KPI definitions, usually, this is included via xi:include from a separate file because it is reused</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Each KPI comes with its formula</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td><code>bcdSum</code> refers to a built-in aggregation, using sum and going on BindingSet bcd_sc_kpi</td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td>Categories allow to group KPIs in the layout</td>
</tr>
<tr>
<td><i class="conum" data-value="9"></i><b>9</b></td>
<td>Beside build-in scc:Aspects and scc:Aggregators, you can  set up your own here</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The content of the scc:ScorecardConfiguration is straight forward can easily be  set up by a user or the wizard.<br>
The underlying definitions for scc:Aggregators and scc:Aspects can be seen in the source code and taken as a templyte for own ones.</p>
</div>
<div class="sect4">
<h5 id="_aggregators">Aggregators</h5>
<div class="paragraph">
<p>An aggregator describes how the system can retrieves measures from the database.
It does so by providing a XSLT generating a <a href="#DocXmlData">WrsRequest</a>.
The scorecard provides input to this XSLT at runtime, informing about the measures needed.
It is also providing an optional <code>xsl:param name="customParameterModel"</code>, allowing to provide free additional information.
In many cases, using the built-in scc:Aggregators will be sufficient.</p>
</div>
</div>
<div class="sect4">
<h5 id="_aspects">Aspects</h5>
<div class="paragraph">
<p>Aspects are additional information about KPIs like targets, trends or year-to-date values.
An aspect definition is valid across all KPIs. Aspects can provide their information in three forms.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Aspect WrqModifier</dt>
<dd>
<p>Provides a means of generating a new request from an aggregator&#8217;s request, for example to the KPI table for previous period performance.</p>
</dd>
<dt class="hdlist1">Aspect WrqBuilder</dt>
<dd>
<p>Provides a means of generating a new request from scratch, for example to a table with target information.</p>
</dd>
<dt class="hdlist1">Aspect Calc</dt>
<dd>
<p>A calculation on to of KPI performance and other aspects, for example the trend based on (performance) / (previous period performance) or the achievement based on performance and target.
The calculation can reference values via:</p>
<div class="ulist">
<ul>
<li>
<p><code>calc:KpiRef</code> refers to the KPIs performance, i.e. to the KPI&#8217;s definition.</p>
</li>
<li>
<p><code>calc:AspectRef idRef="asp_</code> refers to the result of the aspect with the id <em>aspId</em> for the current KPI.</p>
</li>
<li>
<p><code>calc:AggregatorRef idRef="agg_</code> refers to a property of the lead measure of the current KPI, taken from the aggregator @aggrId.</p>
</li>
<li>
<p><code>calc:AggregatorRef idRef="asp_</code> refers to a property of the lead measure of the current KPI, taken from the aggregator @aggrId.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="title">Sample for a trend Aspect:</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;scc:Aspect</span> <span class="attribute-name">xmlns:scc</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.businesscode.de/schema/bcdui/scorecard-1.0.0</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:calc</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.businesscode.de/schema/bcdui/calc-1.0.0</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">trend</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Trend</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;calc:Calc&gt;</span>
    <span class="tag">&lt;calc:Div&gt;</span>
      <span class="tag">&lt;calc:KpiRef</span><span class="tag">/&gt;</span>
      <span class="tag">&lt;calc:AspectRef</span> <span class="attribute-name">idRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">asp_previousPeriod_kpi_$</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/calc:Div&gt;</span>
  <span class="tag">&lt;/calc:Calc&gt;</span>
<span class="tag">&lt;/scc:Aspect&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_data_storage">Data storage</h4>
<div class="paragraph">
<p>Measures for the scorecard are stored in columns.
Beside the dimensions and the measure columns, there is a mandatory column @bRef='bcd_measure_id' indicating the measure.
Measures may have multiple properties. In such cases, a row holds one column per such property.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/scorecard_scoreCard.png" alt="scorecard scoreCard">
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="DocTreeReport">6.4. Tree Report Component</h3>
<div class="sect3">
<h4 id="_tree_report_overview">Tree Report Overview</h4>
<div class="paragraph">
<p>A Tree Report allows for rendering data in a tree structure.
This can be done for any Wrs, may it be generated, loaded via a direct <a href="#DocXmlData">Wrq</a> or based on a
<a href="../jsdoc/bcdui.component.cube.CubeModel.html" target="_blank" rel="noopener">CubeModel</a> or a
<a href="../jsdoc/bcdui.component.scorecard.ScorecardModel.html" target="_blank" rel="noopener">ScorecardModel</a> for example.</p>
</div>
</div>
<div class="sect3">
<h4 id="_fixed_depth_trees">Fixed depth trees</h4>
<div class="paragraph">
<p>Assume you have the following data</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/treeReport_plainView.png" alt="treeReport plainView">
</div>
</div>
<div class="paragraph">
<p>from a Wrq or a CubeModel for example, then you can  set up a Render chain like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">    <span class="keyword">var</span> rendererA = <span class="keyword">new</span> bcdui.core.Renderer({
      <span class="key">chain</span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">../bcdui/js/component/treeView/generateTree.xslt</span><span class="delimiter">&quot;</span></span>,
              <span class="string"><span class="delimiter">&quot;</span><span class="content">../bcdui/js/component/treeView/rendering.xslt</span><span class="delimiter">&quot;</span></span>],
      <span class="key">targetHtml</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">myDataPTh</span><span class="delimiter">&quot;</span></span>,
      <span class="key">inputModel</span>: <span class="keyword">new</span> bcdui.core.SimpleModel( <span class="string"><span class="delimiter">&quot;</span><span class="content">parentWrs.xml</span><span class="delimiter">&quot;</span></span> )
    });</code></pre>
</div>
</div>
<div class="paragraph">
<p>And it will display the data in the following way:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/treeReport_treeView.png" alt="treeReport treeView">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_trees_of_variable_depths">Trees of variable depths</h4>
<div class="paragraph">
<p>There is also support for a tree with unknown depth, where each row has a an id column with an optional <code>parentId</code> attribute.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="tag">&lt;wrs:Wrs</span> <span class="attribute-name">xmlns:wrs</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.businesscode.de/schema/bcdui/wrs-1.0.0</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>

  <span class="tag">&lt;wrs:Header&gt;</span>
    <span class="tag">&lt;wrs:Columns&gt;</span>
      <span class="tag">&lt;wrs:C</span> <span class="attribute-name">pos</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">kpi_id</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">KPI</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">dimId</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">kpi_id</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;wrs:A</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">parentId</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">parentId</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>    <i class="conum" data-value="1"></i><b>(1)</b>
      <span class="tag">&lt;/wrs:C&gt;</span>
      <span class="tag">&lt;wrs:C</span> <span class="attribute-name">pos</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">2</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;/wrs:Columns&gt;</span>
  <span class="tag">&lt;/wrs:Header&gt;</span>

  <span class="tag">&lt;wrs:Data&gt;</span>
    <span class="tag">&lt;wrs:R&gt;</span>
      <span class="tag">&lt;wrs:C&gt;</span>Root<span class="tag">&lt;/wrs:C&gt;</span>                         <i class="conum" data-value="2"></i><b>(2)</b>
      <span class="tag">&lt;wrs:C&gt;</span>100%<span class="tag">&lt;/wrs:C&gt;</span>
    <span class="tag">&lt;/wrs:R&gt;</span>

    <span class="tag">&lt;wrs:R&gt;</span>
      <span class="tag">&lt;wrs:C</span> <span class="attribute-name">parentId</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Root</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Child X<span class="tag">&lt;/wrs:C&gt;</span>      <i class="conum" data-value="3"></i><b>(3)</b>
      <span class="tag">&lt;wrs:C&gt;</span>50%<span class="tag">&lt;/wrs:C&gt;</span>
    <span class="tag">&lt;/wrs:R&gt;</span>

    <span class="tag">&lt;wrs:R&gt;</span>
      <span class="tag">&lt;wrs:C</span> <span class="attribute-name">parentId</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Child X</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Child 2a<span class="tag">&lt;/wrs:C&gt;</span>
      <span class="tag">&lt;wrs:C&gt;</span>25%<span class="tag">&lt;/wrs:C&gt;</span>
    <span class="tag">&lt;/wrs:R&gt;</span>
  <span class="tag">&lt;/wrs:Data&gt;</span>

<span class="tag">&lt;/wrs:Wrs&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The id column is the one with the <code>parentId</code> attribute declared</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Having no parentId means being top-level. Multiple top-level rows are allowed</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The <code>parentId</code> attribute connects it to the parent.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If you apply a renderer with the chain if the sample above, the result will be:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/treeReport_parent.png" alt="treeReport parent">
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="DocCharts">6.5. Chart Component</h3>
<div class="sect3">
<h4 id="_charts_overview">Charts Overview</h4>
<div class="paragraph">
<p>Charts can be easily integrated into pages and support the dynamic user experience of BCD-UI.
For example a report allowing to order or filter data can be enhanced by a chart reflecting these changes immediately.
Charts do also support for user interaction.
For example drilling from an item of the chart or exporting data can be developed.</p>
</div>
<div class="ulist">
<div class="title">Some of the core features of BCD-UI graphs are</div>
<ul>
<li>
<p>Supporting all standard chart types: Pie, Line, Point, Area, Bar, Scattered, Stacked Bar and Stacked Area with 1 and 2 y-axes</p>
</li>
<li>
<p>Sensitive to user interaction like hover and click on individual bars or pieces in a pie chart</p>
</li>
<li>
<p>Supporting on-the-fly creation and modification on the client</p>
</li>
<li>
<p>Export as images and to PDF</p>
</li>
<li>
<p>Easy integration with existing reports with custom calculations, as it is re-using client data and sensitive to client side data manipulations</p>
</li>
<li>
<p>Appearance can be controlled via a dynamic model allowing for switching layout and data source on the fly</p>
</li>
<li>
<p>Customer tool tips, on click actions, customer and automatic colors and scaling</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_usage">Usage</h4>
<div class="paragraph">
<p>To use a chart, you need to  set up a chart configuration, provide the data and create the chart itself.</p>
</div>
<div class="paragraph">
<p>Create a file with a sample chart configuration like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;chart:Chart</span> <span class="attribute-name">xmlns:chart</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.businesscode.de/schema/bcdui/charts-1.0.0</span><span class="delimiter">&quot;</span></span>
             <span class="attribute-name">title</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Revenue vs. Volume</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>

  <span class="tag">&lt;chart:XAxis</span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Country</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;chart:Categories</span> <span class="attribute-name">modelId</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">chartData</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">nodes</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/wrs:Wrs/wrs:Data/wrs:R/wrs:C[1]</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="tag">&lt;/chart:XAxis&gt;</span>

  <span class="tag">&lt;chart:YAxis1</span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Revenue</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">unit</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">€</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span> <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="tag">&lt;chart:YAxis2</span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Volume</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">unit</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">cbm</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>

  <span class="tag">&lt;chart:Series&gt;</span>

    <span class="tag">&lt;chart:Series</span> <span class="attribute-name">rgb</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">rgb(220,0,0)</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Volume</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">chartType</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">AREACHART</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span> <i class="conum" data-value="3"></i><b>(3)</b>
      <span class="tag">&lt;chart:YData</span> <span class="attribute-name">modelId</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">chartData</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">nodes</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/wrs:Wrs/wrs:Data/wrs:R/wrs:C[3]</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/chart:Series&gt;</span>

    <span class="tag">&lt;chart:Series</span> <span class="attribute-name">rgb</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#0000EE</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Revenue</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">chartType</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">LINECHART</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">yAxis1Or2</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">2</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;chart:YData</span> <span class="attribute-name">modelId</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">chartData</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">nodes</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/wrs:Wrs/wrs:Data/wrs:R/wrs:C[2]</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/chart:Series&gt;</span>

  <span class="tag">&lt;/chart:Series&gt;</span>

<span class="tag">&lt;/chart:Chart&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This controls the x-axis, which model the data comes from and which nodes to include</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>This controls the y-axis, like unit, size and caption</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Each data series can have a different appearance</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Then add this to your page:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html">      <span class="tag">&lt;div</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcdBodyContainer</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcdCaption</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Chart<span class="tag">&lt;/div&gt;</span>
        <span class="tag">&lt;div</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">chartTH</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">&quot;</span><span class="key">width</span>: <span class="float">400px</span>; <span class="key">height</span>: <span class="float">200px</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/div&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>
      <span class="tag">&lt;/div&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Note that we assigned an explicit size.</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Charts require an explicit size of their target HTML element.
Set it either inside the chart definition or assign it via CSS.
Otherwise 'No data' may be shown though there is data
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>And add this JavaScript code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">    <span class="keyword">var</span> chartConfig = <span class="keyword">new</span> bcdui.core.SimpleModel( <span class="string"><span class="delimiter">&quot;</span><span class="content">chartConfig.xml</span><span class="delimiter">&quot;</span></span> );
    <span class="keyword">var</span> chartData = <span class="keyword">new</span> bcdui.core.SimpleModel( {<span class="key">id</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">chartData</span><span class="delimiter">&quot;</span></span>, <span class="key">url</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">../sampleWrs.xml</span><span class="delimiter">&quot;</span></span> } ); <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="keyword">var</span> chart = <span class="keyword">new</span> bcdui.component.chart.XmlChart({ <span class="key">targetHtml</span>: <span class="string"><span class="delimiter">'</span><span class="content">chartTH</span><span class="delimiter">'</span></span>, <span class="key">config</span>: chartConfig }); <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>In our sample we are using the Wrs, which is shown in <a href="#DocSimpleReq">Your first BCD-UI page</a>, you may also use that and create a file chartData.xml from it.
Note that we assigned an explicit id to the data as it is referenced via id from within chartConfig.xml</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The <a href="../jsdoc/bcdui.component.chart.XmlChart.html" target="_blank" rel="noopener">bcdui.component.chart.XmlChart</a> takes a configuration XML</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>These few lines already result in</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/charts_sample.png" alt="charts sample">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_sample_charts">Sample charts</h4>
<div class="sect4">
<h5 id="_charts_with_2_axes">Charts with 2 axes</h5>
<div class="paragraph">
<p>This sample shows a graph with to different axes and a fly-over on the a chart line when hovering with the mouse over the chart.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/charts_chart2Axes.png" alt="charts chart2Axes">
</div>
</div>
</div>
<div class="sect4">
<h5 id="_scattered_chart">Scattered chart</h5>
<div class="paragraph">
<p>A scattered chart can display three values at a time, here the x-position of a circle shows the size of the customer,
the y position shows the revenue done with the customer and the size of the circle shows the growth of the revenue done
with the customer in the last 12 months.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/charts_scattered.png" alt="charts scattered">
</div>
</div>
</div>
<div class="sect4">
<h5 id="_pie_charts">Pie charts</h5>
<div class="paragraph">
<p>This sample shows that chart can be created with auto-coloring or printer friendly in black-and white.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/charts_pieCharts_ColorPlusBw.png" alt="charts pieCharts ColorPlusBw">
</div>
</div>
</div>
<div class="sect4">
<h5 id="_legend">Legend</h5>
<div class="paragraph">
<p>Charts can have legends.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/charts_chartWithLegend.png" alt="charts chartWithLegend">
</div>
</div>
</div>
<div class="sect4">
<h5 id="_more_examples">More examples</h5>
<div class="paragraph">
<p>There are even more charts available, like stacked bar charts, gauge, marimekko and multi color line charts.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/charts_examples.png" alt="charts examples">
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_auto_charts">Auto Charts</h4>
<div class="paragraph">
<p>Sometimes you may not even need an explicit chart configuration, if a useful chart can be derived from Wrs data alone.</p>
</div>
<div class="paragraph">
<p>Auto charts provide the following heuristics:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">One Measure and one row plus one column dimension</dt>
<dd>
<p>column dimension, row dimension determines the series.</p>
</dd>
<dt class="hdlist1">One Measure and two row-dimensions. Categories</dt>
<dd>
<p>Outer dimension, inner dimension determines the series.</p>
</dd>
<dt class="hdlist1">One Measure and two column-dimensions. Categories</dt>
<dd>
<p>Outer dimension, inner dimension determines the series.</p>
</dd>
<dt class="hdlist1">Multiple Measures and one row dim</dt>
<dd>
<p>Each measure becomes a series. Allows bar, line, point and area (pie in case of 1 measure)</p>
</dd>
<dt class="hdlist1">Multiple Measures and one column dim</dt>
<dd>
<p>Each measure becomes a series. Allows bar, line, point and area (pie in case of 1 measure)</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="title">Where to place the chart</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html">      <span class="tag">&lt;div</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">chartTH</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">&quot;</span><span class="key">width</span>: <span class="float">600px</span>; <span class="key">height</span>: <span class="float">150px</span>; <span class="key">display</span>:<span class="value">inline-block</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/div&gt;</span>
      <span class="tag">&lt;div</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">chartLegendTH</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">&quot;</span><span class="key">width</span>: <span class="float">50px</span>; <span class="key">height</span>: <span class="float">150px</span>; <span class="key">display</span>:<span class="value">inline-block</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/div&gt;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Create the chart itself</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">  <span class="comment">// Create CubeConfigutator in form of a Drag and Drop Area</span>
  <span class="keyword">var</span> chartConfig = <span class="keyword">new</span> bcdui.core.ModelWrapper({
    <span class="key">chain</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">../bcdui/js/component/chart/configurationFromWrs.xslt</span><span class="delimiter">&quot;</span></span>,
    <span class="key">inputModel</span>: cube
  });
  <span class="keyword">var</span> chart = <span class="keyword">new</span> bcdui.component.chart.XmlChart({
    <span class="key">id</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">chart</span><span class="delimiter">&quot;</span></span>,
    <span class="key">targetHtml</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">chartTH</span><span class="delimiter">&quot;</span></span>,
    <span class="key">config</span>: chartConfig
  });
  bcdui.component.chart.createChartLegend( {
    <span class="key">targetHtml</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">chartLegendTH</span><span class="delimiter">&quot;</span></span>,
    <span class="key">chartRendererId</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">chart</span><span class="delimiter">&quot;</span></span>
  });</code></pre>
</div>
</div>
<div class="paragraph">
<p>This chart is dynamically derived from the cube without predefined chart config:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/charts_autoChart_1.png" alt="charts autoChart 1">
</div>
<div class="title">Figure 2. Sample AutoChart with two dimensions and one measure</div>
</div>
<div class="paragraph">
<p>After the user did some new selections in the cube&#8217;s drag and drop area, this one is created.
Note how a second axis was created because the measures have different units.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/charts_autoChart_2.png" alt="charts autoChart 2">
</div>
<div class="title">Figure 3. Sample AutoChart with one dimensions the measure</div>
</div>
</div>
<div class="sect3">
<h4 id="_options">Options</h4>
<div class="paragraph">
<p>For a full list of options, please check the xsd for the charts
<a href="https://github.com/businesscode/BCD-UI/blob/master/Docu/xsd/charts-1.0.0.xsd" target="_blank" rel="noopener">charts-1.0.0.xsd</a>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/charts_chartsXsd.png" alt="charts chartsXsd">
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="DocWidgets">7. Widgets Overview</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_widgets_overview">7.1. Widgets Overview</h3>
<div class="paragraph">
<p>Widgets are small visual objects for user interaction.
Commonly they store their state, the user&#8217;s selection in a target model (by default guiStatus).
The <code>targetModelXPath</code> parameter points to the exact place where data is stored.
Widgets usually work in 2 ways.
If the user clicks/selects/does an action on it, the target value changes.
On the other hand, when you change the value from outside, e.g. via JavaScript,
the widget should update itself visually to be in sync with the value.</p>
</div>
<div class="paragraph">
<p>Some widgets have an options model reference as data source, for example entries in a drop down box.
The option model is referenced via <code>optionsModelXPath</code> and optional <code>optionsModelRelativeValueXPath</code>.
They point to value and caption information used for the widget.</p>
</div>
<div class="sect3">
<h4 id="_creation">Creation</h4>
<div class="paragraph">
<p>As widgets support their API in different languages, widgets can be created in different ways.
All are expecting the same set of parameters. When using js, providing <code>targetHtml</code> is mandatory.</p>
</div>
<div class="listingblock">
<div class="title">Javascript</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">bcdui.widgetNg.createSingleSelect( {
  <span class="key">targetModelXPath</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">/*/f:Filter/f:Expression[@bRef = 'orig_ctr' and @op = '=']/@value</span><span class="delimiter">&quot;</span></span>,
  ...
});</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">As HTML Custom Elements</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;bcd-singleselectng</span>
  <span class="attribute-name">targetModelXPath</span> = <span class="string"><span class="delimiter">&quot;</span><span class="content">/*/f:Filter/f:Expression[@bRef = 'orig_ctr' and @op = '=']/@value</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">...</span> <span class="tag">&gt;</span>
<span class="tag">&lt;/bcd-singleselectng&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Note that some browsers do not allow self-cosing elements ('/&gt;') here</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Used as JSP</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;w:singleSelect</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">myId</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">...</span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Created from XSLT</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;xsl:call-template</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">singleSelect</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;xsl:with-param</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">select</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">'myId'</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
  ...
<span class="tag">&lt;/xsl:call-template&gt;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Called from XAPI</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;xapi:SingleSelect</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">myId</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">...</span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Using JavaScript and HTML Custom Elements is by far the most common way.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
While you can create widges from JavaScript, HTML custom elements, XSLT, XAPI and jsp, the result and behavior is exactly the same.
You can easily derive the parameters from the JavaScript api documentation.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_overview_bcdui_widgetng">7.2. Overview bcdui.WidgetNg</h3>
<div class="sect3">
<h4 id="_button">Button</h4>
<div class="imageblock">
<div class="content">
<img src="images/widgets_ng_button.png" alt="widgets ng button">
</div>
</div>
<div class="paragraph">
<p><a href="../jsdoc/bcdui.widgetNg.html#.createButton" target="_blank" rel="noopener">Button:</a> A button widget for a clickable action</p>
</div>
</div>
<div class="sect3">
<h4 id="_checkbox">Checkbox</h4>
<div class="imageblock">
<div class="content">
<img src="images/widgets_ng_checkbox.png" alt="widgets ng checkbox">
</div>
</div>
<div class="paragraph">
<p><a href="../jsdoc/bcdui.widgetNg.html#.createCheckbox" target="_blank" rel="noopener">Checkbox:</a> A checkbox widget which allows a on/off (true/false, 1/0) switch</p>
</div>
</div>
<div class="sect3">
<h4 id="_connectable">Connectable</h4>
<div class="imageblock">
<div class="content">
<img src="images/widgets_ng_connectable.png" alt="widgets ng connectable">
</div>
</div>
<div class="paragraph">
<p><a href="../jsdoc/bcdui.widgetNg.html#.createConnectable" target="_blank" rel="noopener">Connectable:</a> Connectables, can be used in various ways</p>
</div>
</div>
<div class="sect3">
<h4 id="_date_input">Date Input</h4>
<div class="imageblock">
<div class="content">
<img src="images/widgets_ng_dateInput.png" alt="widgets ng dateInput">
</div>
</div>
<div class="paragraph">
<p><a href="../jsdoc/bcdui.widgetNg.html#.createDateInput" target="_blank" rel="noopener">Date Input:</a> A HTML5 dateinput control</p>
</div>
</div>
<div class="sect3">
<h4 id="_input">Input</h4>
<div class="imageblock">
<div class="content">
<img src="images/widgets_ng_input.png" alt="widgets ng input">
</div>
</div>
<div class="paragraph">
<p><a href="../jsdoc/bcdui.widgetNg.html#.createInput" target="_blank" rel="noopener">Input:</a> A basic input control</p>
</div>
</div>
<div class="sect3">
<h4 id="_sidebyside_chooser">SideBySide Chooser</h4>
<div class="imageblock">
<div class="content">
<img src="images/widgets_ng_sideBySideChooser.png" alt="widgets ng sideBySideChooser">
</div>
</div>
<div class="paragraph">
<p><a href="../jsdoc/bcdui.widgetNg.html#.createSideBySideChooser" target="_blank" rel="noopener">SideBySide Chooser:</a> A side-by-side chooser allowing selection and ordering of items</p>
</div>
</div>
<div class="sect3">
<h4 id="_single_select">Single Select</h4>
<div class="imageblock">
<div class="content">
<img src="images/widgets_ng_singleSelect.png" alt="widgets ng singleSelect">
</div>
</div>
<div class="paragraph">
<p><a href="../jsdoc/bcdui.widgetNg.html#.createSingleSelect" target="_blank" rel="noopener">Single Select:</a> A drop down selector</p>
</div>
</div>
<div class="sect3">
<h4 id="_suggest_input">Suggest Input</h4>
<div class="imageblock">
<div class="content">
<img src="images/widgets_ng_suggestInput.png" alt="widgets ng suggestInput">
</div>
</div>
<div class="paragraph">
<p><a href="../jsdoc/bcdui.widgetNg.html#.createSuggestInput" target="_blank" rel="noopener">Suggest Input:</a> A drop down selector with autocompletion functionality and custom rendering</p>
</div>
</div>
<div class="sect3">
<h4 id="_text_area">Text Area</h4>
<div class="imageblock">
<div class="content">
<img src="images/widgets_ng_textarea.png" alt="widgets ng textarea">
</div>
</div>
<div class="paragraph">
<p><a href="../jsdoc/bcdui.widgetNg.html#.createTextArea" target="_blank" rel="noopener">Text Area:</a> A (resizable) text area field, which allows multiline input</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_overview_bcdui_widget">7.3. Overview bcdui.widget</h3>
<div class="sect3">
<h4 id="_blind_updown">Blind UpDown</h4>
<div class="imageblock">
<div class="content">
<img src="images/widgets_w_blindUpDown.png" alt="widgets w blindUpDown">
</div>
</div>
<div class="paragraph">
<p><a href="../jsdoc/bcdui.widget.html#.createBlindUpDownArea" target="_blank" rel="noopener">Blind UpDown:</a> A collapsable/expandable area</p>
</div>
</div>
<div class="sect3">
<h4 id="_contex_menu">Contex Menu</h4>
<div class="imageblock">
<div class="content">
<img src="images/widgets_w_contextMenu.png" alt="widgets w contextMenu">
</div>
</div>
<div class="paragraph">
<p><a href="../jsdoc/bcdui.widget.html#.createContextMenu" target="_blank" rel="noopener">Context Menu:</a> A context menu which can be linked to a cell</p>
</div>
</div>
<div class="sect3">
<h4 id="_dimension_chooser">Dimension Chooser</h4>
<div class="imageblock">
<div class="content">
<img src="images/widgets_w_dimensionChooser.png" alt="widgets w dimensionChooser">
</div>
</div>
<div class="paragraph">
<p><a href="../jsdoc/bcdui.widget.html#.createDimensionChooser" target="_blank" rel="noopener">Dimension Chooser:</a> A multi level selector</p>
</div>
</div>
<div class="sect3">
<h4 id="_formula_editor">Formula Editor</h4>
<div class="imageblock">
<div class="content">
<img src="images/widgets_w_formulaEditor.png" alt="widgets w formulaEditor">
</div>
</div>
<div class="paragraph">
<p><a href="../jsdoc/bcdui.widget.html#.createFormulaEditor" target="_blank" rel="noopener">Formula Editor:</a> A formula Editor for building custom calculations</p>
</div>
</div>
<div class="sect3">
<h4 id="_input_field">Input Field</h4>
<div class="imageblock">
<div class="content">
<img src="images/widgets_w_inputField.png" alt="widgets w inputField">
</div>
</div>
<div class="paragraph">
<p><a href="../jsdoc/bcdui.widget.html#.createInputField" target="_blank" rel="noopener">Input Field:</a> An autocompletion input widget</p>
</div>
</div>
<div class="sect3">
<h4 id="_login_form">Login Form</h4>
<div class="imageblock">
<div class="content">
<img src="images/widgets_w_loginForm.png" alt="widgets w loginForm">
</div>
</div>
<div class="paragraph">
<p><a href="../jsdoc/bcdui.widget.html" target="_blank" rel="noopener">Login Form:</a> A simple login form widget for username and password</p>
</div>
</div>
<div class="sect3">
<h4 id="_menu">Menu</h4>
<div class="imageblock">
<div class="content">
<img src="images/widgets_w_menu.png" alt="widgets w menu">
</div>
</div>
<div class="paragraph">
<p><a href="../jsdoc/bcdui.widget.html#.createMenu" target="_blank" rel="noopener">Menu:</a> A top menu bar widget</p>
</div>
<div class="paragraph">
<p>To create a menu follow these steps: First create a WEB-INF/bcdui/menu/menu.xml file with the format of
<a href="https://github.com/businesscode/BCD-UI/blob/master/Docu/xsd/menu-1.0.0.xsd" target="_blank" rel="noopener">menu-1.0.0.xsd</a>.
It is picked-up on next restart.</p>
</div>
<div class="listingblock">
<div class="title">Sample menu.xml file</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;Menu</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.businesscode.de/schema/bcdui/menu-1.0.0</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">gettingStarted</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">isDefault</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;Entry</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">home</span><span class="delimiter">&quot;</span></span>      <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Home</span><span class="delimiter">&quot;</span></span>       <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/</span><span class="delimiter">&quot;</span></span>      <span class="attribute-name">title</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">start screen</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
  <span class="tag">&lt;Entry</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">tutorials</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Tutorials</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;Entry</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">scorecard</span><span class="delimiter">&quot;</span></span>   <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Scorecard</span><span class="delimiter">&quot;</span></span>    <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/scorecard</span><span class="delimiter">&quot;</span></span>   <span class="attribute-name">title</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Click here for Scorecard</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;Entry</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">minimalCube</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Minimal Cube</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/minimalCube</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">title</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Click here for Minimal Cube</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;Entry</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">widgets</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Widgets</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/widgets</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">title</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Click here for Widgets</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;Entry</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">button</span><span class="delimiter">&quot;</span></span>       <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Button</span><span class="delimiter">&quot;</span></span>       <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/widgets/button</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;Entry</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">singleSelect</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">SingleSelect</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/widgets/singleSelect</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;Entry</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">multiSelect</span><span class="delimiter">&quot;</span></span>  <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">MultiSelect</span><span class="delimiter">&quot;</span></span>  <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/widgets/multiSelect</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/Entry&gt;</span>
  <span class="tag">&lt;/Entry&gt;</span>
  <span class="tag">&lt;Entry</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">logout</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Logout</span><span class="delimiter">&quot;</span></span>       <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/logout</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">title</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Click here to logout</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/Menu&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>provide a place where to show it, depending on your theme</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;div</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcdMainContainer</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;div</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcdMenuBarArea</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/div&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>and call</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">    bcdui.widget.createMenu({ <span class="key">targetHtml</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">bcdMenuBarArea</span><span class="delimiter">&quot;</span></span> });</code></pre>
</div>
</div>
<div class="paragraph">
<p>The menu is capable of respecting different scopes and even user rights, see XSD for details.</p>
</div>
</div>
<div class="sect3">
<h4 id="_multi_select">Multi Select</h4>
<div class="imageblock">
<div class="content">
<img src="images/widgets_w_multiSelect.png" alt="widgets w multiSelect">
</div>
</div>
<div class="paragraph">
<p><a href="../jsdoc/bcdui.widget.html#.createMultiSelect" target="_blank" rel="noopener">Multi Select:</a> A multiple selection widget (select list or checkbox list)</p>
</div>
</div>
<div class="sect3">
<h4 id="_period_chooser">Period Chooser</h4>
<div class="imageblock">
<div class="content">
<img src="images/widgets_w_periodChooser.png" alt="widgets w periodChooser">
</div>
</div>
<div class="paragraph">
<p><a href="../jsdoc/bcdui.widget.html#.createPeriodChooser" target="_blank" rel="noopener">Period Chooser:</a> A date/date range popup calendar</p>
</div>
</div>
<div class="sect3">
<h4 id="_single_select_2">Single Select</h4>
<div class="imageblock">
<div class="content">
<img src="images/widgets_w_singleSelect.png" alt="widgets w singleSelect">
</div>
</div>
<div class="paragraph">
<p><a href="../jsdoc/bcdui.widget.html#.createSingleSelect" target="_blank" rel="noopener">Single Select:</a> A radio button widget offering single selection</p>
</div>
</div>
<div class="sect3">
<h4 id="_tab">Tab</h4>
<div class="imageblock">
<div class="content">
<img src="images/widgets_w_tab.png" alt="widgets w tab">
</div>
</div>
<div class="paragraph">
<p><a href="../jsdoc/bcdui.widget.html#.createTabMenu" target="_blank" rel="noopener">Tab:</a> Tabs allow to switch different views of the same data or between different data within a page</p>
</div>
</div>
<div class="sect3">
<h4 id="_tooltip">Tooltip</h4>
<div class="imageblock">
<div class="content">
<img src="images/widgets_w_tooltip.png" alt="widgets w tooltip">
</div>
</div>
<div class="paragraph">
<p><a href="../jsdoc/bcdui.widget.html#.createTooltip" target="_blank" rel="noopener">Tooltip:</a> Flyover, Tooltips connected to cells</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="DocPageStructure">8. Client infrastructure</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter describes the life-cycle of BCD-UI artifacts on a client HTML page.
Understanding this flow of events is crucial to working with BCD-UI.</p>
</div>
<div class="sect2">
<h3 id="_page_live_cycle">8.1. Page live-cycle</h3>
<div class="paragraph">
<p>BCD-UI pages are standard HTML pages.
You can mix BCD-UI with any other HTML technology or HTML-based library.<br>
For BCD-UI artifacts, the following flow of events applies.
All events are fully asynchronous.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Page-Loading phase</dt>
<dd>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The page is loaded by the browser</p>
</li>
<li>
<p>BCD-UI live-cycle artifacts are constructed</p>
</li>
<li>
<p><code>bcdui.wkModels.guiStatus</code> singleton, per default holding information of the user&#8217;s selection like chooser settings,
is initialized from the guiStatus parameter of the pages&#8217;s URL.</p>
</li>
<li>
<p><code>bcdui.wkModels.guiStatusEstablished</code> singleton is constructed. It is a frozen copy of guiStatus</p>
</li>
<li>
<p>Any ModelUpdater on guiStatus and guiStatusEstablished are executed and then both become <em>ready</em></p>
</li>
<li>
<p>Renderer on the page responsible for building the visible parts like widgets, edit grids and reports execute themselves.
Only Renderer execute themselves, all other AbstractExecutables wait to be executed.</p>
</li>
<li>
<p>The renderer ask their input and parameter <a href="../jsdoc/bcdui.core.DataProvider.html" target="_blank" rel="noopener">bcdui.core.DataProviders</a> to execute.</p>
</li>
<li>
<p>DataProvider can depend on other data providers as input.
Thus, <strong>DataProviders form dependency trees</strong>, which execute recursively.
Only once all needed input and parameter data providers have become ready, a DataProvider proceeds the execution and becomes ready itself.
See <a href="#DataProviders">chapter on DataProviders</a> below for more details.</p>
</li>
<li>
<p>Once its input is ready, each Renderer creates its associated views and displays it</p>
</li>
</ol>
</div>
</dd>
<dt class="hdlist1">Page-Interaction phase</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>The user can use widgets and views to provide input and settings.</p>
</li>
<li>
<p>Each activity of the user results in some change of a DataProvider.</p>
<div class="ulist">
<ul>
<li>
<p>Changes to the UI, like chooser settings or sorting per default lead to changes in the guiStatus.</p>
</li>
<li>
<p>Changes to business data will be stored separate DataProviders.</p>
</li>
<li>
<p>Please note, no change of model data triggers any change of any view per se.<br>
Instead you  set up listeners, that inform Renderer to refresh, if needed.</p>
</li>
</ul>
</div>
</li>
<li>
<p>A <em>save</em> on a DataProvider event will sending the data to the associated web-service, usually WrsServlet, which then stores the data into the database.</p>
</li>
<li>
<p>Other activities like in-place drill down will lead to additional data being loaded.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Page-Leaving phase</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Pressing apply, menu navigation or drill-over events will cause the browser to leave the page.</p>
</li>
<li>
<p>A call to <a href="https://businesscode.github.io/BCD-UI-Docu/jsdoc/bcdui.core.lifecycle.html#.applyAction" target="_blank" rel="noopener">applyAction</a> will in addition append the current guiStatus as a parameter to the called URL, thus the new page will initialize its settings according to the chooser of the calling page.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_guistatus_singelton">8.2. guiStatus Singelton</h3>
<div class="paragraph">
<p>BCD-UI instantiates a well-known <code>guiStatus</code> along with a frozen guiStatusEstablished copy in each page loading phase.
The guiStatus is a standard StaticModel, but is object of the following extra-handling:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>It can be found at <code>bcdui.wkModels.guiStatus</code> / <code>bcdui.wkModels.guiStatusEstablished</code></p>
</li>
<li>
<p>They have the fixed id <em>guiStatus</em> / <em>guiStatusEstablished</em></p>
</li>
<li>
<p>It is initialized during page load with the guiStatus URL parameter of the page and executed.
It is guaranteed to be <em>ready</em> when executing code in <code>bcdui.core.ready( function() { myCode } )</code>.</p>
</li>
<li>
<p>It is the default target model for widgets, i.e. it applies if an XPath does not start with an explicit $modelId</p>
</li>
<li>
<p>It is an implicit parameter to all transformations, for example in XSLT it can be access with<br>
<code>&lt;xsl:param name="guiStatus"/&gt;;</code></p>
</li>
<li>
<p>The <a href="https://businesscode.github.io/BCD-UI-Docu/jsdoc/bcdui.core.lifecycle.html#.applyAction" target="_blank" rel="noopener">applyAction</a> appends its content to the url of the called page</p>
<div class="ulist">
<ul>
<li>
<p>Base64 encoding is used to make it URL friendly and it is compressed to prevent it from exceeding IE&#8217;s URL length restriction</p>
</li>
</ul>
</div>
</li>
<li>
<p>guiStatusEstablished reflects best the values of the page loading phase and is not influenced by later user activity</p>
</li>
<li>
<p>On server side it is decompressed and decoded by a servlet filter and provided via<br>
<code>getHttpRequest().getAttribute("guiStatusDoc");</code></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="DataProviders">8.3. DataProviders</h3>
<div class="paragraph">
<p>One main concept on client side of the BCDUI library are <a href="../jsdoc/bcdui.core.DataProvider.html" target="_blank" rel="noopener">bcdui.core.DataProviders</a>.<br>
All these objects offer a getData() method returning their data (XML, String etc.), which can be used by other objects.
DataProviders construct their data in different ways</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Some DataProvider like SimpleModel send HTTP GET or POST request to the server when executed.
This can be any URL for a static file for example or a <a href="#DocXmlData">request document</a> to WrsServlet.</p>
<div class="ulist">
<ul>
<li>
<p>On server side for each request, the web services evaluate the request documents and consult the binding definitions for the appropriate places in connected databases.
The <a href="#DocBinding">BindingSets</a> translate the requested logical data ids into physical databases, views, tables and columns.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Some DataProviders, like the ModelWrapper, apply XSLTs and another transformation rules to their input data and provide the result as their data.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_available_data_providers">Available data providers</h4>
<div class="paragraph">
<p>This is the list of available data providers and their action on <code>execute()</code> to become <em>ready</em>.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">SimpleModel</dt>
<dd>
<p>A load data from a url.
The source can be static or a <a href="#DocXmlData">Wrs request document</a> to contact the WrsServlet.
If it is in autoRefresh mode, it will reload whenever the request document changes.
Auto-refresh mode is useful to load for small data immediately on user interaction.</p>
</dd>
<dt class="hdlist1">StaticModel</dt>
<dd>
<p>Receiving its data in form of a string or JSON.</p>
</dd>
<dt class="hdlist1">ModelWrapper</dt>
<dd>
<p>Executes a chain of transformations like XSLTs on its input data.
The input model is not changed.</p>
</dd>
<dt class="hdlist1">ModelUpdater</dt>
<dd>
<p>Similar to ModelWrapper but replaces the target model&#8217;s content with the transformation result.</p>
</dd>
<dt class="hdlist1">Renderer</dt>
<dd>
<p>Executes a chain of transformations like XSLTs and inserts the result into the page&#8217;s HTML at targetHtml.
The input model is not changed.</p>
</dd>
<dt class="hdlist1">ConstantDataProvider</dt>
<dd>
<p>Holds a scalar data type String|Number|Boolean, usefull for parameters</p>
</dd>
<dt class="hdlist1">PromptDataProvider</dt>
<dd>
<p>Prompts the user for a string input.</p>
</dd>
<dt class="hdlist1">DataProviderWithXPath</dt>
<dd>
<p>Gets a source data provider and an xPath and provides the evaluated xPath.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Calling <code>execute(true)</code> on a data provider will enforce the data provider to re-execute even in it is already in ready-state.
DataProviders inform their listeners about change events so that they can update.
You can find the API documentation here <a href="../jsdoc/bcdui.core.DataProvider.html" target="_blank" rel="noopener">bcdui.core.DataProvider</a>.</p>
</div>
<div class="sect4">
<h5 id="_object_registry">Object Registry</h5>
<div class="paragraph">
<p><code>bcdui.factory.objectRegistry</code> is a singleton constructed by BCD-UI in page load.
Objects are registered if they get an explicit id assigned.<br>
DataProviders are plain JavaScript objects, which you can use via their JavaScript API.
But whenever you want to address a DataProvider by id in a declarative API, you need to give the DataProvider an explicit id on creation.
Examples are HTML Custom Element parameters or an XPath in targetModelXPath.<br>
If you provide such an id parameter, the object is centrally registered and can be retrieved by its id later.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="keyword">var</span> m1 = <span class="keyword">new</span> bcdui.core.StaticModel( { <span class="key">data</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;Root a='1'/&gt;</span><span class="delimiter">&quot;</span></span> } ); <i class="conum" data-value="1"></i><b>(1)</b>
<span class="keyword">var</span> m2 = <span class="keyword">new</span> bcdui.core.StaticModel( { <span class="key">id</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">myId</span><span class="delimiter">&quot;</span></span>, <span class="key">data</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;Root a='2'/&gt;</span><span class="delimiter">&quot;</span></span> } ); <i class="conum" data-value="2"></i><b>(2)</b>

m1.execute(); <i class="conum" data-value="3"></i><b>(3)</b>
<span class="keyword">var</span> targetModelXPath = <span class="string"><span class="delimiter">&quot;</span><span class="content">$myId/@a</span><span class="delimiter">&quot;</span></span>; <i class="conum" data-value="4"></i><b>(4)</b>
<span class="keyword">var</span> m22 = bcdui.factory.objectRegistry.getObject(<span class="string"><span class="delimiter">&quot;</span><span class="content">myId</span><span class="delimiter">&quot;</span></span>); <i class="conum" data-value="5"></i><b>(5)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Standard way, no id assigned, the object is not registered</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>An id is assigned for access from declarative APIs. The object is automatically registered.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Ase the StaticModel from JavaScript</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Access by id in an XPath, for example a targetModelXpath of a widget</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Retrieve the JavaScript object from the <code>bcdui.factory.objectRegistry</code>, resulting to m22 === m2.</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_dependency_tree">Dependency Tree</h5>
<div class="paragraph">
<p>DataProviders and Renderers from dependency trees and automatically take care that their input is <em>ready</em> and executed if not.
If you want to use such a DataProvider
See the following examples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="comment">// Dependency tree is automatically taken care for from BCD-UI objects</span>
<span class="keyword">var</span> m1 = <span class="keyword">new</span> bcdui.core.SimpleModel({ <span class="key">url</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">mydata.xml</span><span class="delimiter">&quot;</span></span> }); <i class="conum" data-value="1"></i><b>(1)</b>
<span class="keyword">var</span> mw1 = <span class="keyword">new</span> bcdui.core.ModelWrapper({ <span class="key">inputMidel</span>: m1 }); <i class="conum" data-value="2"></i><b>(2)</b>

<span class="comment">// When accessing from js, you need to make sure the DataProvider is ready</span>
<span class="keyword">var</span> m2 = <span class="keyword">new</span> bcdui.core.SimpleModel({ <span class="key">url</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">mydata.xml</span><span class="delimiter">&quot;</span></span> });
console.log( m2.isReady() ); <span class="comment">// Outputs 'false' </span><i class="conum" data-value="3"></i><b>(3)</b>
<span class="comment">// null === m2.getData(); </span><i class="conum" data-value="4"></i><b>(4)</b>
m2.execute();
m2.onReady(
  <span class="keyword">function</span>() { <i class="conum" data-value="5"></i><b>(5)</b>
    console.log( m2.isReady() ); <span class="comment">// Outputs 'true'</span>
    m2.getData();
  }
);

<span class="comment">// Wait for multile DataProviders</span>
bcdui.factory.objectRegistry.withReadyObjects(  m1, m2, <i class="conum" data-value="6"></i><b>(6)</b>
  <span class="keyword">function</span>() {
    ...
  }
);</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>SimpleModel will nor load until execute() is called by someone</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>BCD-UI objects will call execute() on any of their input, of it finds it not <em>ready</em>.
Here mw1 will execute m1 and wait for m1 to become ready before continuing with its own action.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The newly created SimpleModel m2 is not ready to be used, getData() will return null</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Call execute() explicit in this situation and wait for it to become ready</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Note, execute() is always asynchronous, except for StaticModel</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>There are helper functions to wait for multiple DataProviders</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="DocThemes">9. Themes</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_themes_overview">9.1. Themes overview</h3>
<div class="paragraph">
<p>In order to support different adjustable look and feel of widgets and components, BCD-UI provides theme support.
This allows it to be adjusted to a corporate standard.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Overall Page layout</dt>
<dd>
<p>Defines the common page structure and coloring of all pages
This overall structure provides a div for each major page component, like title, menu, sideBar, body, which are identified via their id.
The default page layout uses basic class definitions from the 960 grid system (<a href="http://960.gs/" class="bare">http://960.gs/</a>).
This is a blank empty page with all major parts:</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="doctype">&lt;!DOCTYPE HTML&gt;</span>
<span class="tag">&lt;html&gt;</span>
<span class="tag">&lt;head&gt;</span>
  <span class="tag">&lt;meta</span> <span class="attribute-name">charset</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">UTF-8</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
  <span class="tag">&lt;title&gt;</span>Blank Page<span class="tag">&lt;/title&gt;</span>
  <span class="tag">&lt;link</span> <span class="attribute-name">rel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">shortcut icon</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">./favicon.ico</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
  <span class="tag">&lt;script</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text/javascript</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">./bcdui/bcdui.js</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/script&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="tag">&lt;/head&gt;</span>
<span class="tag">&lt;body&gt;</span>
<span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcd__outer-wrapper</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span> <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcd__wrapper</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcd__horizontal-split</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>

      <span class="comment">&lt;!-- Header --&gt;</span>
      <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcd__header</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcd__header__upper</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
          <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcd__header__logo</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">../bcdui/theme/images/bcd_logo.png</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">alt</span>=<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/div&gt;</span>
          <span class="tag">&lt;div&gt;</span><span class="tag">&lt;/div&gt;</span>
        <span class="tag">&lt;/div&gt;</span>
        <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcd__header__navigation</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/div&gt;</span> <i class="conum" data-value="3"></i><b>(3)</b>
      <span class="tag">&lt;/div&gt;</span>

      <span class="comment">&lt;!-- Main area --&gt;</span>
      <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcd__vertical-split</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>

        <span class="comment">&lt;!-- Sidebar --&gt;</span> <i class="conum" data-value="4"></i><b>(4)</b>
        <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcd__sidebar-left</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
          <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcd__sidebar-left__inner</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcd__sidebar-left-collaps-toggle-wrapper</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;button</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcd__sidebar-left-collaps-toggle bcd__sidebar-left-collaps-toggle--collapsed</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;i</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">fas fa-caret-left</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/i&gt;</span><span class="tag">&lt;/button&gt;</span><span class="tag">&lt;/div&gt;</span>

            <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcd__form-container</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
              <span class="comment">&lt;!-- place your sidebar widgets here --&gt;</span>
              <span class="tag">&lt;section&gt;</span>
                <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcd__form-group</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                  <span class="tag">&lt;label</span> <span class="attribute-name">for</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">s1</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Apply<span class="tag">&lt;/label&gt;</span>
                  <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcd__select-container</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
                    <span class="tag">&lt;div</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">applyDiv</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/div&gt;</span>
                   <span class="tag">&lt;/div&gt;</span>
                <span class="tag">&lt;/div&gt;</span>
              <span class="tag">&lt;/section&gt;</span>
            <span class="tag">&lt;/div&gt;</span>

          <span class="tag">&lt;/div&gt;</span>
        <span class="tag">&lt;/div&gt;</span>

        <span class="comment">&lt;!-- Main content area --&gt;</span> <i class="conum" data-value="5"></i><b>(5)</b>
        <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcd__content-container</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
          <span class="tag">&lt;h1&gt;</span>Blank Page<span class="tag">&lt;/h1&gt;</span>

          <span class="tag">&lt;div</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">myDataDiv</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/div&gt;</span> <i class="conum" data-value="6"></i><b>(6)</b>
        <span class="tag">&lt;/div&gt;</span>

      <span class="tag">&lt;/div&gt;</span>

      <span class="comment">&lt;!-- Footer --&gt;</span>
      <span class="tag">&lt;footer&gt;</span>
        <span class="tag">&lt;p&gt;</span><span class="entity">&amp;copy;</span> 2021 BusinessCode GmbH<span class="tag">&lt;/p&gt;</span>
        <span class="tag">&lt;nav&gt;</span>
          <span class="tag">&lt;ul&gt;</span>
            <span class="tag">&lt;li&gt;</span><span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Imprint<span class="tag">&lt;/a&gt;</span><span class="tag">&lt;/li&gt;</span>
            <span class="tag">&lt;li&gt;</span><span class="tag">&lt;a</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Privacy<span class="tag">&lt;/a&gt;</span><span class="tag">&lt;/li&gt;</span>
          <span class="tag">&lt;/ul&gt;</span>
        <span class="tag">&lt;/nav&gt;</span>
      <span class="tag">&lt;/footer&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;/div&gt;</span>
<span class="tag">&lt;/div&gt;</span>
<i class="conum" data-value="7"></i><b>(7)</b>
<span class="tag">&lt;script&gt;</span>
<span class="tag">&lt;/script&gt;</span>
<span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Default styles</dt>
<dd>
<p>The theme css files are compiled from scss, see <a href="http://sass-lang.com" class="bare">http://sass-lang.com</a>.<br>
BCD-UI&#8217;s scss files include a default styling for all widget, component, modules and general page layout.</p>
</dd>
</dl>
</div>
<div class="sect3">
<h4 id="_adjusting">Adjusting</h4>
<div class="paragraph">
<p>To use the style, just css-import allStyles.css and make sure you got the well known divs available. Put
all pages content, like choosers or reports in divs with the appropriate id like id="bcdBodyContainer" or id="bcdSideBarContainer".
The theme takes care to position the elements correctly and provide them with the right color and size.
See chapter 'Page structuring' below for details.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_implementation">9.2. Implementation</h3>
<div class="sect3">
<h4 id="_defining_a_new_theme">Defining a new theme</h4>
<div class="paragraph">
<p>A new theme can be defined by creating a theme folder structure identically the generic one.
The images subfolder can hold additional, custom images.
The scss file holds a list of variables which can be used to define custom coloring, custom logos etc.
After setting up the variables, the file holds includes to the default generic scss files and finally you can overwrite specific styles, e.g. for creating a custom menu layout.</p>
</div>
<div class="paragraph">
<p>So if your company layout needs a general coloring of green and red, you modify the 2 variables $corporate-color and $corporate-color-alt. And maybe your body background should be a fixed image, then you can overwrite the body style after importing the default ones.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="scss">[...]
$corporate-color-alt:       #FF0000;  // my new alternative color is red
$corporate-color:           #00FF00;  // my new main color is green
[...]
@import '../../../generic/theme/sass/_standardPage.scss';
[...]
body {
  background: #f1f1f1 url(&quot;../images/bg.jpg&quot;) no-repeat center 0 fixed; // and do some overwriting with a fixed image
}
[...]</code></pre>
</div>
</div>
<div class="paragraph">
<p>All available variables can be found in _constants.scss.</p>
</div>
</div>
<div class="sect3">
<h4 id="_themes_folder_structure">Themes folder structure</h4>
<div class="paragraph">
<p>This is a typical compiled style .jar package structure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="error">\</span>theme
  <span class="error">\</span>css                          &lt;--  Common css parts except page structure definition
    <span class="error">\</span>allStyles.css              &lt;--  compiled css file holding all styles
  <span class="error">\</span>images                       &lt;--  image container</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_page_structuring">Page structuring</h4>
<div class="paragraph">
<p>BCD-UI follows a 960 grid system based layout.
The following shows a standard HTML page which includes the library (and so it includes the styles, too) with footer, body and sidebar areas.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="doctype">&lt;!DOCTYPE HTML&gt;</span>
<span class="tag">&lt;html&gt;</span>

  <span class="tag">&lt;head&gt;</span>
    <span class="tag">&lt;meta</span> <span class="attribute-name">charset</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">UTF-8</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/meta&gt;</span>
    <span class="tag">&lt;title&gt;</span>Hello World Page<span class="tag">&lt;/title&gt;</span>
    <span class="tag">&lt;script</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text/javascript</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">./bcdui/bcdui.js</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/script&gt;</span>
  <span class="tag">&lt;/head&gt;</span>

  <span class="tag">&lt;body&gt;</span>

    <span class="comment">&lt;!-- well known required divs --&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcdContextMenuDiv</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">&quot;</span><span class="key">display</span>: <span class="value">none</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/div&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcdTooltipDiv</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">&quot;</span><span class="key">display</span>: <span class="value">none</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/div&gt;</span>
    <span class="tag">&lt;div</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcdModalBoxDiv</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">&quot;</span><span class="key">display</span>: <span class="value">none</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/div&gt;</span>

    <span class="tag">&lt;div</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcdMainContainer</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;div</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcdHeaderArea</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;div</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcdLogoImageArea</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/div&gt;</span><span class="tag">&lt;/div&gt;</span>
      <span class="tag">&lt;div</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcdMenuBarArea</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="comment">&lt;!-- place your menu here --&gt;</span><span class="tag">&lt;/div&gt;</span>
      <span class="tag">&lt;div</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcdSpacerArea</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="comment">&lt;!-- mainly some vertical space or custom use --&gt;</span><span class="tag">&lt;/div&gt;</span>

      <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcdContentContainer</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>

        <span class="tag">&lt;div</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcdSideBarContainer</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>

          <span class="comment">&lt;!-- place your sidebar sections and widgets here --&gt;</span>
          <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcdSection</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcdSectionCaption</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Section 1<span class="tag">&lt;/div&gt;</span>
            <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcdItem</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
              <span class="tag">&lt;span</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcdCaption</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Widget 1<span class="tag">&lt;/span&gt;</span>
              <span class="tag">&lt;div&gt;</span><span class="comment">&lt;!-- add a widget here --&gt;</span><span class="tag">&lt;/div&gt;</span>
              <span class="tag">&lt;span</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcdCaption</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Widget 2<span class="tag">&lt;/span&gt;</span>
              <span class="tag">&lt;div&gt;</span><span class="comment">&lt;!-- add a widget here --&gt;</span><span class="tag">&lt;/div&gt;</span>
            <span class="tag">&lt;/div&gt;</span>
          <span class="tag">&lt;/div&gt;</span>

          <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcdSection</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcdSectionCaption</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Section 2<span class="tag">&lt;/div&gt;</span>
            <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcdItem</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
              <span class="tag">&lt;span</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcdCaption</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Widget 3<span class="tag">&lt;/span&gt;</span>
              <span class="tag">&lt;div&gt;</span><span class="comment">&lt;!-- add a widget here --&gt;</span><span class="tag">&lt;/div&gt;</span>
              <span class="tag">&lt;span</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcdCaption</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Widget 4<span class="tag">&lt;/span&gt;</span>
              <span class="tag">&lt;div&gt;</span><span class="comment">&lt;!-- add a widget here --&gt;</span><span class="tag">&lt;/div&gt;</span>
            <span class="tag">&lt;/div&gt;</span>
          <span class="tag">&lt;/div&gt;</span>
        <span class="tag">&lt;/div&gt;</span>

        <span class="tag">&lt;div</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcdBodyContainer</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
          <span class="comment">&lt;!-- place your main body information here --&gt;</span>
          <span class="tag">&lt;span</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcdCaption</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Hello World Page<span class="tag">&lt;/span&gt;</span>
          <span class="tag">&lt;p&gt;</span>Hello World<span class="tag">&lt;/p&gt;</span>
        <span class="tag">&lt;/div&gt;</span>

      <span class="tag">&lt;/div&gt;</span>

      <span class="tag">&lt;div</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcdFooterArea</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="comment">&lt;!-- place your footer information here --&gt;</span><span class="tag">&lt;/div&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/html&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Content or theme setup styling is usually affecting the following ids:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">bcdHeaderArea</dt>
<dd>
<p>A top area where usually a logo is placed (bcdLogoImageArea)</p>
</dd>
<dt class="hdlist1">bcdMenuBarArea</dt>
<dd>
<p>A top area below the header where commonly the menu bar is shown</p>
</dd>
<dt class="hdlist1">bcdSideBarContainer</dt>
<dd>
<p>The place where you add your sidebar widgets</p>
</dd>
<dt class="hdlist1">bcdBodyContainer bcdCaption</dt>
<dd>
<p>The title of the page is shown here</p>
</dd>
<dt class="hdlist1">bcdBodyContainer</dt>
<dd>
<p>Scorecards, cubes, the main content of your page should be here</p>
</dd>
<dt class="hdlist1">bcdFooterArea</dt>
<dd>
<p>An area at the bottom of the page.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_theme_sample">9.3. Theme Sample</h3>
<div class="sect3">
<h4 id="_theme_sample_2">Theme Sample</h4>
<div class="paragraph">
<p>A sample page with header, menu, sidebar, body and footer.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/themes_examplePage.png" alt="themes examplePage">
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="DocI18n">10. Internationalization</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_internationalization">10.1. Internationalization</h3>
<div class="paragraph">
<p>Internationalization (I18n) allows to provide the user interface in different languages to different users.
To allow this, caption, text, number and date formats can be adjusted on runtime depending on a user&#8217;s language setting.
I18n will typically operate on front end captions and date formats, but can also in certain cases operate on data level when reading from a database.<br>
The translation happens on client side in browser by parsing HTML elements that contain bcdTranslate attribute with i18n key as value.
Each renderer automatically translates its content before pasting the HTML transformation result into HTML document.
Translation for static HTML contents can be triggered separately.</p>
</div>
<div class="sect3">
<h4 id="_i18n_setup">I18n Setup</h4>
<div class="paragraph">
<p>In order to  set up BCD-UI internationalization either you have to declare a BindingSet @id=bcdui_i18n
or save a static file at /myProject/bcdui/conf/messages.xml in WRS format according to BindingSet @id=bcdui_i18n with i18n messages,
a sample is under BCD-UI/src/js/i18n/messages.xml.</p>
</div>
<div class="paragraph">
<p>The BindingSet and data table should have 3 columns named "key", "lang" and "value".
The content of the "lang"-column can have values conform the java.util.Locale values or a value "default".
<strong>Defaults:</strong>
* i18n model URL: /bcdui/servletsCached/WrsServlet/i18n - the mapping to the URL could be changed in web.xml</p>
</div>
<div class="ulist">
<ul>
<li>
<p>i18n model request document: /bcdui/i18n/requestDoc.xml- default request document for default i18n model</p>
</li>
<li>
<p>static i18n file in project: /bcdui/messages.xml - a static file in WRS format with some default BCDUI messages</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_i18n_on_client_side">I18n on client side</h4>
<div class="paragraph">
<p>The client is provided with an XML containing the translated values for the chosen language. The translation APIs are available in JS, XSLT or static HTML.
Please note that the file is cached on the the client and thus does not harm performance.</p>
</div>
<div class="paragraph">
<p>The following fragment shows a sample I18n.xml file created by BCD-UI:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;Data</span> <span class="attribute-name">format</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcdI18n</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">isKeyNormalized</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;bcd_autoCompletionBox_emptyValue</span> <span class="attribute-name">lang</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">en</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Please select<span class="tag">&lt;/bcd_autoCompletionBox_emptyValue&gt;</span>
  <span class="tag">&lt;bcd_autoCompletionBox_clearOption</span> <span class="attribute-name">lang</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">en</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Please select<span class="tag">&lt;/bcd_autoCompletionBox_clearOption&gt;</span>
<span class="tag">&lt;/Data&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The translation happens under the hood when working with renderers, consider following XSLT fragment (which produces HTML):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html">...
<span class="tag">&lt;xsl:template</span> <span class="attribute-name">match</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;div</span> <span class="attribute-name">bcdTranslate</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">report.header</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;table&gt;</span>
  ..
  <span class="tag">&lt;/table&gt;</span>
<span class="tag">&lt;/xsl:template&gt;</span>
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>you solely need to place a 'bcdTranslate' attribute with an i18n key on an HTML element to be translated.</p>
</div>
<div class="paragraph">
<p>In case you have a mass of data to translate (i.e. contents of a table), then you would write more performant code when
translating explicitly via XSLT i18n API:
The following fragment shows how to use i18n translation XSLT API for table data translation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="tag">&lt;xsl:import</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">i18nUtilsTemplate.xslt</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
...
&lt;xsl:param name=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcdI18nModel</span><span class="delimiter">&quot;</span></span> select=<span class="string"><span class="delimiter">&quot;</span><span class="content">//*[1=2]</span><span class="delimiter">&quot;</span></span>/&gt;
...
&lt;xsl:template match=<span class="string"><span class="delimiter">&quot;</span><span class="content">wrs:C</span><span class="delimiter">&quot;</span></span>&gt;
  <span class="tag">&lt;td&gt;</span>
    <span class="comment">&lt;!-- get value of a key --&gt;</span>
    <span class="tag">&lt;xsl:call-template</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">getMessageByKey</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;xsl:with-param</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">key</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>bcd_autoCompletionBox_emptyValue<span class="tag">&lt;/xsl:with-param&gt;</span>
    <span class="tag">&lt;/xsl:call-template&gt;</span>
  <span class="tag">&lt;/td&gt;</span>
&lt;<span class="regexp"><span class="delimiter">/</span><span class="content">xsl:template&gt;
...
</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This is more performant than implicit 'bcdTranslate' for big number of elements.</p>
</div>
<div class="paragraph">
<p>The following fragment shows how to use I18n in HTML/JS in case you create HTML without a renderer (i.e. via JS DOM scripting):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;div</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">rootElement2Translate</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;div</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">autoCompletionBox_1</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">bcdTranslate</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcd_autoCompletionBox_emptyValue</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    first none i18n value
  <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;div</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">autoCompletionBox_2</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">bcdTranslate</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcd_autoCompletionBox_clearOption</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    second none i18n value
  <span class="tag">&lt;/div&gt;</span>
<span class="tag">&lt;/div&gt;</span>

bcdui.i18n.translateHTMLElement({elementOrId:&quot;rootElement2Translate&quot;});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Please note that you don&#8217;t need to trigger translation of static HTML via JS-API which is delivered by web-server during page-request,
as the translation kicks in automatically once the document has been loaded.</p>
</div>
<div class="paragraph">
<p>The bcdui.i18n JS object is created by BCD-UI runtime.
In addition we can translate HTML attributes by setting its names into @bcdTranslateAttrs,
like @bcdTranslateAttrs="alt" @alt="my Photo"</p>
</div>
</div>
<div class="sect3">
<h4 id="_i18n_during_data_access">I18n during data access</h4>
<div class="paragraph">
<p>Sometimes, data derived from the database should depend on the language setting.
For example, status code captions of events are to be translated for an export without the possibility to use XSLT for translation.
In such cases, the *default item mechanism of * is to be used.
To achieve this, create a Binding, joining the event data with the translation table and let the SubjectFilter filter the appropriate rows.</p>
</div>
</div>
<div class="sect3">
<h4 id="_i18n_interpolation">i18n interpolation</h4>
<div class="paragraph">
<p>Interpolation supported, lets assume we want to have a message like 'Value must be between 10 and 20', where 10 and 20 are provided during translation.
To achieve that the caption shall read: 'Value must be between {0,integer} and {1,integer}', the message key may be 'my.info' and msgkey parameter
has to be 'some.info|10|20'</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="DocExports">11. Exports</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_detail_exports">11.1. Detail exports</h3>
<div class="paragraph">
<p>BCD-UI supports export of detail data to spread sheets, this applies to free defined exports and to export from cube or scorecard.</p>
</div>
<div class="sect3">
<h4 id="_sylk_slk_format">Sylk .slk format</h4>
<div class="paragraph">
<p>A main issue is the data type detection of Excel when opening a csv dat export.
In many cases data is interpreted and displayed as a date where it should be a number for example.
On the other hand, a detail in native Excel format is very inefficient and becomes very slow for larger data sets.<br>
To address this, detail exports in BCD-UI are done in sylk format per default.
Sylk is a test format like csv but allows us to include data format information.</p>
</div>
</div>
<div class="sect3">
<h4 id="_plain_data_export">Plain data export</h4>
<div class="paragraph">
<p>To export data to sylk (or csv), prepare a <a href="#DocXmlData">Wrq</a> WebRowSetQuery and hand it over to the export.
If you have prepared the following Wrq:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="tag">&lt;WrsRequest</span>
  <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.businesscode.de/schema/bcdui/wrs-request-1.0.0</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">xmlns:f</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.businesscode.de/schema/bcdui/filter-1.0.0</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;Select&gt;</span>
    <span class="tag">&lt;Columns&gt;</span>
      <span class="tag">&lt;C</span> <span class="attribute-name">bRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">dy</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Date (desc)</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>
      <span class="tag">&lt;C</span> <span class="attribute-name">bRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">orig_country</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;C</span> <span class="attribute-name">bRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">dest_country</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;C</span> <span class="attribute-name">bRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">weight</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;C</span> <span class="attribute-name">bRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">cost</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;C</span> <span class="attribute-name">bRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">volume</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/Columns&gt;</span>
    <span class="tag">&lt;From&gt;</span>
      <span class="tag">&lt;BindingSet&gt;</span>myReportData1<span class="tag">&lt;/BindingSet&gt;</span>
    <span class="tag">&lt;/From&gt;</span>
    <span class="tag">&lt;f:Filter&gt;</span> <i class="conum" data-value="2"></i><b>(2)</b>
      <span class="tag">&lt;f:Expression</span> <span class="attribute-name">bRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">orig_country</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">op</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">=</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">FR</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/f:Filter&gt;</span>
    <span class="tag">&lt;Ordering&gt;</span> <i class="conum" data-value="3"></i><b>(3)</b>
      <span class="tag">&lt;C</span> <span class="attribute-name">bRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">dy</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">order</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">desc</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;C</span> <span class="attribute-name">bRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">orig_country</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;C</span> <span class="attribute-name">bRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">dest_country</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/Ordering&gt;</span>
  <span class="tag">&lt;/Select&gt;</span>
<span class="tag">&lt;/WrsRequest&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>You can rename columns for you export, per default the caption given in the BindingSet are used or its id if not given</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>We will introduce a dynamic filter below</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>You may want to sort your download</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Then you just hand this over to the export</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="keyword">var</span> wrq = <span class="keyword">new</span> bcdui.core.SimpleModel( { <span class="key">id</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">wrq</span><span class="delimiter">&quot;</span></span>, <span class="key">url</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">wrq.xml</span><span class="delimiter">&quot;</span></span> } );
<span class="keyword">function</span> <span class="function">exportData</span>() {
  bcdui.component.exports.excel.detailExport( { <span class="key">wrq</span>: wrq, <span class="key">fileName</span>: <span class="string"><span class="delimiter">'</span><span class="content">exportFile.slk</span><span class="delimiter">'</span></span> } );
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>When calling exportData(), the Wrq gets executed against the database, return the result and Excel will open.
We do now add a button to call exportData() and, more interesting,
add a <a href="../jsdoc/bcdui.widget.html#.createPeriodChooser" target="_blank" rel="noopener">PeriodChooser</a> to control the exported time range:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;bcd-periodChooser</span>
    <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Export date</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">targetModelXPath</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">$wrq/*/wrq:Select/f:Filter/f:And[@id='dy']</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/bcd-periodChooser&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="tag">&lt;bcd-buttonNg</span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Export detail data</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">onClickAction</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">exportData()</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/bcd-buttonNg&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Don&#8217;t use self-closing tags ('&lt;../&gt;') for HTML5 Custom Elements, it fails in some browsers</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The PeriodChooser will add a node to f:Filter:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;f:And</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">dy</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;f:Expression</span> <span class="attribute-name">bRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">dy</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">op</span>=<span class="string"><span class="delimiter">&quot;</span><span class="entity">&amp;gt;</span><span class="content">=</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">2021-09-14</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
  <span class="tag">&lt;f:Expression</span> <span class="attribute-name">bRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">dy</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">op</span>=<span class="string"><span class="delimiter">&quot;</span><span class="entity">&amp;lt;</span><span class="content">=</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">2021-09-14</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/f:And&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>As you can see by executing <code>wrq.getData()</code> or <code>wrq.promptData()</code> in the browser console after selecting a date.</p>
</div>
<div class="paragraph">
<p>In the same way you can add a country chooser or whatever chooser you like.
If you prepare such a node in you Wrq, the chooser, it will initialize with that value, as it is its targetModelXPath.</p>
</div>
</div>
<div class="sect3">
<h4 id="_cube_and_scorecard_detail_export">Cube and Scorecard Detail Export</h4>
<div class="paragraph">
<p>When working with cubes or scorecards, you might want a detail export for a specific cell within the cube.
A Wrq should be created which takes the page&#8217;s general (sidebar) filters plus the filters of the specific cell position into account.
Plus there might be additional filters needed that you provide.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/detail_export.png" alt="detail export">
</div>
<div class="title">Figure 4. DE, North, AWS are filters coming from the cell&#8217;s position</div>
</div>
<div class="paragraph">
<p>Luckily BCD-UI provides you everything to quickly  set up such a cube cell detail export.
First of all you need a way to execute the detail export on a specific cell.
This is done by adding the Detail Export functionality in the context menu.
The default context menu lists it, too.
Secondly, your Cube / Scorecard configuration needs to list the columns to be exported.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;dm:DetailDataDefaults</span> <span class="attribute-name">xmlns:dm</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.businesscode.de/schema/bcdui/dimmeas-1.0.0</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">xmlns:wrq</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.businesscode.de/schema/bcdui/wrs-request-1.0.0</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;dm:DetailData&gt;</span>
    <span class="tag">&lt;dm:AppendColumns&gt;</span>
      <span class="tag">&lt;wrq:C</span> <span class="attribute-name">bRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">m02_i</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Bkg Ref</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;wrq:C</span> <span class="attribute-name">bRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">m02_t</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Bkg Type</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/dm:AppendColumns&gt;</span>
  <span class="tag">&lt;/dm:DetailData&gt;</span>
<span class="tag">&lt;/dm:DetailDataDefaults&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Leads to two exported columns:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/detail_excel.png" alt="detail excel">
</div>
</div>
</div>
<div class="sect3">
<h4 id="_more_on_export">More On Export</h4>
<div class="paragraph">
<p>If you need additional filters, define a detail export filter on measure or KPI level:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;dm:Measure</span> <span class="attribute-name">xmlns:dm</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.businesscode.de/schema/bcdui/dimmeas-1.0.0</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">m01_i</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Bkg Ref</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;calc:Calc</span> <span class="attribute-name">type-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">NUMERIC</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:calc</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.businesscode.de/schema/bcdui/calc-1.0.0</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;calc:ValueRef</span> <span class="attribute-name">idRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">m01_i</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">aggr</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">sum</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Bkg Ref</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
  <span class="tag">&lt;/calc:Calc&gt;</span>
  <span class="tag">&lt;dm:DetailData&gt;</span>
    <span class="tag">&lt;f:Filter</span> <span class="attribute-name">xmlns:f</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.businesscode.de/schema/bcdui/filter-1.0.0</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;f:Expression</span> <span class="attribute-name">op</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">=</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">bRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">m01_i</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/f:Filter&gt;</span>
  <span class="tag">&lt;/dm:DetailData&gt;</span>
<span class="tag">&lt;/dm:Measure&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You don&#8217;t want a general export list but a measure specific one:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;dm:Measure</span> <span class="attribute-name">xmlns:dm</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.businesscode.de/schema/bcdui/dimmeas-1.0.0</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">xmlns:wrq</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.businesscode.de/schema/bcdui/wrs-request-1.0.0</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">m01_i</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Bkg Ref</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;calc:Calc</span> <span class="attribute-name">type-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">NUMERIC</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:calc</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.businesscode.de/schema/bcdui/calc-1.0.0</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;calc:ValueRef</span> <span class="attribute-name">idRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">m01_i</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">aggr</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">sum</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Bkg Ref</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
  <span class="tag">&lt;/calc:Calc&gt;</span>
  <span class="tag">&lt;dm:DetailData&gt;</span>
    <span class="tag">&lt;dm:Columns&gt;</span>
      <span class="tag">&lt;wrq:C</span> <span class="attribute-name">bRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">m01_i_sub_a</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;wrq:C</span> <span class="attribute-name">bRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">m01_i_sub_b</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/dm:Columns&gt;</span>
  <span class="tag">&lt;/dm:DetailData&gt;</span>
<span class="tag">&lt;/dm:Measure&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Putting static columns at the start or end of a detailExport list is also possible:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;dm:DetailDataDefaults</span> <span class="attribute-name">xmlns:dm</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.businesscode.de/schema/bcdui/dimmeas-1.0.0</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">xmlns:wrq</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.businesscode.de/schema/bcdui/wrs-request-1.0.0</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;dm:DetailData&gt;</span>
    <span class="tag">&lt;dm:PrependColumns&gt;</span>
      <span class="tag">&lt;wrq:C</span> <span class="attribute-name">bRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">yr</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Year</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;wrq:C</span> <span class="attribute-name">bRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">mo</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Month</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/dm:PrependColumns&gt;</span>
    <span class="tag">&lt;dm:AppendColumns&gt;</span>
      <span class="tag">&lt;wrq:C</span> <span class="attribute-name">bRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">orig_country</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Origin Country</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;wrq:C</span> <span class="attribute-name">bRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">dest_country</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Dest Country</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/dm:AppendColumns&gt;</span>
  <span class="tag">&lt;/dm:DetailData&gt;</span>
<span class="tag">&lt;/dm:DetailDataDefaults&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also export data as Excel Hyperlink cells.
To do this, add a <code>wrq:A</code> attribute named "bcdSylkUrl" to the cell, the cell&#8217;s value is appended to the provided URL.
If the url starts with a /, the current application path is used as a prefix.</p>
</div>
<div class="listingblock">
<div class="title">Detail export with a cell with an URL</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;dm:Measure</span> <span class="attribute-name">xmlns:dm</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.businesscode.de/schema/bcdui/dimmeas-1.0.0</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">xmlns:wrq</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.businesscode.de/schema/bcdui/wrs-request-1.0.0</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">mProductivity_t</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Productivity T</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;calc:Calc</span> <span class="attribute-name">type-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">NUMERIC</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">scale</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:calc</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.businesscode.de/schema/bcdui/calc-1.0.0</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;calc:ValueRef</span> <span class="attribute-name">idRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">m02_t</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">aggr</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">sum</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
  <span class="tag">&lt;/calc:Calc&gt;</span>
  <span class="tag">&lt;dm:DetailData&gt;</span>
    <span class="tag">&lt;dm:Columns&gt;</span>
      <span class="tag">&lt;wrq:C</span> <span class="attribute-name">bRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">m02_t</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;wrq:A</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcdSylkUrl</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">bRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcdSylkUrl</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
          <span class="tag">&lt;wrq:Calc</span> <span class="attribute-name">type-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">VARCHAR</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;wrq:Concat&gt;</span>
              <span class="tag">&lt;wrq:Value&gt;</span>/myPage/myPageController.jsp?ref=<span class="tag">&lt;/wrq:Value&gt;</span>
              <span class="tag">&lt;wrq:ValueRef</span> <span class="attribute-name">idRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">m01_t</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;/wrq:Concat&gt;</span>
          <span class="tag">&lt;/wrq:Calc&gt;</span>
        <span class="tag">&lt;/wrq:A&gt;</span>
      <span class="tag">&lt;/wrq:C&gt;</span>
    <span class="tag">&lt;/dm:Columns&gt;</span>
  <span class="tag">&lt;/dm:DetailData&gt;</span>
<span class="tag">&lt;/dm:Measure&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_wysiwyg_exports">11.2. WYSIWYG exports</h3>
<div class="paragraph">
<p>The BCD-UI contains two kinds of WYSIWYG (what-you-see-is-what-you-get) exports:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Spread sheet</dt>
<dd>
<p>Spread sheet WYSIWYG exports are useful when the exported numbers are to be used in further calculations.</p>
</dd>
<dt class="hdlist1">PDF</dt>
<dd>
<p>PDF WYSIWYG exports are useful when the formatting of the report including coloring is the core requirement.<br>
Export to PDf and image is available in BCD-UI-EE Enterprise Edition only.</p>
</dd>
</dl>
</div>
<div class="sect3">
<h4 id="_spread_sheet">Spread sheet</h4>
<div class="paragraph">
<p>You can export an HTML Element and its context to a spreadsheet by calling
<a href="../jsdoc/bcdui.component.exports.html#.exportWysiwygAsExcel" target="_blank" rel="noopener">bcdui.component.exports.exportWysiwygAsExcel()</a>:</p>
</div>
<div class="listingblock">
<div class="title">A button providing a WYSIWYG export to Excel</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;bcd-buttonNg</span>
    <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Export report to Excel</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">onClickAction</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcdui.component.exports.exportWysiwygAsExcel({rootElement: 'exportDiv'})</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/bcd-buttonNg&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The following picture shows a cube on the left and on the right you see this cube exported to Excel.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/wysiwyg_wysiwyg.png" alt="wysiwyg wysiwyg">
</div>
<div class="title">Figure 5. Cube and page and as Excel export</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="DocXsltLibrary">12. XSLT library</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_5">12.1. Overview</h3>
<div class="paragraph">
<p>The XSLT library contains a set of generic XSLTs for often required tasks.
Most of these XSLTs work with Wrs, which is the exchange format from and to the server.
They may be used in a <code>chain</code> of a ModelWrapper, ModelUpdater or a Renderer.<br>
You find then at <code>bcdui/xslt/</code> followed by the path shown for each item.</p>
</div>
</div>
<div class="sect2">
<h3 id="_list_of_utils">12.2. List of utils</h3>
<div class="sect3">
<h4 id="_data_transformation">Data Transformation</h4>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Order and filter columns
</td>
<td class="hdlist2">
<p>Only include listed columns the order given by the parameter. <code>wrs/orderCols.xslt</code></p>
</td>
</tr>
<tr>
<td class="hdlist1">
Pagination
</td>
<td class="hdlist2">
<p>Limit and access data with a given page size <code>wrs/paginate.xslt</code></p>
</td>
</tr>
<tr>
<td class="hdlist1">
Join to Wrs
</td>
<td class="hdlist2">
<p>Join two Wrs over data keys, supports <em>inner</em>, <em>left outer</em> and <em>cross</em> joins. <code>wrs/join.xslt</code></p>
</td>
</tr>
<tr>
<td class="hdlist1">
Transpose grouping
</td>
<td class="hdlist2">
<p>Transpose a dimension column into a row (i.e. it becomes a column dimension). All data cells are adjusted accordingly. <code>wrs/transposeGrouping.xslt</code></p>
</td>
</tr>
<tr>
<td class="hdlist1">
Validate
</td>
<td class="hdlist2">
<p>Validates the data of the input WRS against the WRS header. Adds a validation-resule WRS into the input WRS' header. <code>validate/validate.xslt</code></p>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_data_manipulation">Data Manipulation</h4>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Insert
</td>
<td class="hdlist2">
<p>Insert n consecutive empty rows (with new row ids), auto-fill in mandatory columns if they only have on possible value. <code>wrs/insertRow.xslt</code></p>
</td>
</tr>
<tr>
<td class="hdlist1">
Duplicate
</td>
<td class="hdlist2">
<p>Duplicate a range of rows (with new row ids). <code>wrs/duplicateRow.xslt</code></p>
</td>
</tr>
<tr>
<td class="hdlist1">
Delete
</td>
<td class="hdlist2">
<p>Delete (=mark as deleted) a range of rows. <code>wrs/deleteRows.xslt</code></p>
</td>
</tr>
<tr>
<td class="hdlist1">
Restore
</td>
<td class="hdlist2">
<p>Restore a range of rows, marked as deleted. <code>wrs/restore.xslt</code></p>
</td>
</tr>
<tr>
<td class="hdlist1">
Merge
</td>
<td class="hdlist2">
<p>Merge one WRS into another. Existing rows (same row-id) will be modified, rows with new row-ids will be inserted (marked as inserted). <code>wrs/mergeRow.xslt</code></p>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_data_visualization">Data Visualization</h4>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Render
</td>
<td class="hdlist2">
<p>Render a Wrs to HTML. This renderer is used by all components <code>renderer/htmlBuilder.xslt</code>.
This renderer per default sorts dimension rows and groups row and column headers to td spans.
You can suppress by providing parameters, see below.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Number formatting
</td>
<td class="hdlist2">
<p>Formats the data according to their format defined in the WRS header (scale, unit, later also i18n). <code>renderer/numberFormatting.xslt</code></p>
</td>
</tr>
<tr>
<td class="hdlist1">
Tree rendering
</td>
<td class="hdlist2">
<p>Beside default rendering, you can use a tree renderer for tree-like data.
See <a href="#DocTreeReport">Tree Report Component</a> for this.</p>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_parametrization">Parametrization</h4>
<div class="paragraph">
<p>All wrs modifying XSLT get their parameters via an XML of type
<a href="https://github.com/businesscode/BCD-UI/blob/master/Docu/xsd/xsltParams-1.0.0.xsd" target="_blank" rel="noopener">xsltParams-1.0.0.xsd</a>.
There is an element defined for each of the stylesheets with the same name which holds the parameters.<br>
The document becomes parameter <code>paramModel</code> and each XSLT will look for a matching entry.
You will usually have only one such file for all page content.
With the optional <code>paramSetId</code> attribute you can have multiple sets of the same type
for example to provide two HtmlBuilder with different parameters from the same parameter document.<br>
While this mechanism may look a bit over-sized in small samples, it scales great in real world usage.</p>
</div>
<div class="paragraph">
<p>Switching off sorting and row/col span building for HtmlBuilder with XsltParameters would look like the following.</p>
</div>
<div class="listingblock">
<div class="title">Sample for XsltParameters</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="js">    <span class="comment">// Create an inline XsltParameters document for HtmlBuilder with plain output,</span>
    <span class="comment">// i.e. unsorted without row span</span>
    <span class="keyword">var</span> xsltParams = <span class="keyword">new</span> bcdui.core.StaticModel( <i class="conum" data-value="1"></i><b>(1)</b>
        <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;xp:XSLTParameters </span><span class="delimiter">&quot;</span></span> +
        <span class="string"><span class="delimiter">&quot;</span><span class="content">  xmlns:xp='http://www.businesscode.de/schema/bcdui/xsltParams-1.0.0'&gt;</span><span class="delimiter">&quot;</span></span> +
        <span class="string"><span class="delimiter">&quot;</span><span class="content">  &lt;xp:HtmlBuilder&gt;</span><span class="delimiter">&quot;</span></span> + <i class="conum" data-value="2"></i><b>(2)</b>
        <span class="string"><span class="delimiter">&quot;</span><span class="content">    &lt;xp:SortRows&gt;false&lt;/xp:SortRows&gt;</span><span class="delimiter">&quot;</span></span> + <i class="conum" data-value="3"></i><b>(3)</b>
        <span class="string"><span class="delimiter">&quot;</span><span class="content">    &lt;xp:MakeRowSpan&gt;false&lt;/xp:MakeRowSpan&gt;</span><span class="delimiter">&quot;</span></span> +
        <span class="string"><span class="delimiter">&quot;</span><span class="content">  &lt;/xp:HtmlBuilder&gt;</span><span class="delimiter">&quot;</span></span> +
        <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;/xp:XSLTParameters&gt;</span><span class="delimiter">&quot;</span></span>);

    <span class="comment">// HtmlBuilder with XsltParameters</span>
    <span class="keyword">var</span> rendererB = <span class="keyword">new</span> bcdui.core.Renderer({
      <span class="key">targetHtml</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">myDataATh</span><span class="delimiter">&quot;</span></span>,
      <span class="key">inputModel</span>: <span class="keyword">new</span> bcdui.core.SimpleModel( <span class="string"><span class="delimiter">&quot;</span><span class="content">../sampleWrs2Dim.xml</span><span class="delimiter">&quot;</span></span> ),
      <span class="key">parameters</span>: { <span class="key">paramModel</span>: xsltParams } <i class="conum" data-value="4"></i><b>(4)</b>
    });</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>If the parameters get longer, you will likely create an extra file, static or dynamically an not inline as shown here.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>HtmlBuilder will look for an <code>xp:HtmlBuilder</code> element with no or a matching <code>paramSetId</code> attribute</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Element and parameter names and meaning can be found in xsltParams-1.0.0.xsd</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Name of the parameter with the parameters is always <code>paramModel</code></td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/xsltLibrary_unsorted.png" alt="xsltLibrary unsorted">
</div>
<div class="title">Figure 6. Sorted with row span vs plain output of data</div>
</div>
</div>
<div class="sect3">
<h4 id="_javascript_counterparts">Javascript counterparts</h4>
<div class="paragraph">
<p>Many of these also have counterparts in JavaScript at <code>bcdui.wrs.wrsUtil</code>. For example</p>
</div>
<div class="listingblock">
<div class="title">Sample for using bcdui.wrs.wrsUtil</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">    <span class="keyword">var</span> data = <span class="keyword">new</span> bcdui.core.SimpleModel({ <span class="key">id</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">data</span><span class="delimiter">&quot;</span></span>, <span class="key">url</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">../sampleWrs.xml</span><span class="delimiter">&quot;</span></span> });
    data.onReady({ <span class="key">executeIfNotReady</span>: <span class="predefined-constant">true</span>, <span class="key">onlyOnce</span>: <span class="predefined-constant">true</span>, <span class="function">onSuccess</span>: <span class="keyword">function</span>() {
      bcdui.wrs.wrsUtil.deleteRows({<span class="key">model</span>: data, <span class="key">rowStartPos</span>: <span class="integer">1</span>, <span class="key">rowEndPos</span>: <span class="integer">2</span>});
      bcdui.wrs.wrsUtil.insertRow({<span class="key">model</span>: data, <span class="key">rowStartPos</span>: <span class="integer">3</span>, <span class="key">rowEndPos</span>: <span class="integer">4</span>});
      bcdui.widget.visualizeXml.visualizeModel({ <span class="key">targetHtml</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">myDataUTh</span><span class="delimiter">&quot;</span></span>, <span class="key">idRef</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">data</span><span class="delimiter">&quot;</span></span> });
    }});</code></pre>
</div>
</div>
<div class="paragraph">
<p>leads to</p>
</div>
<div class="listingblock">
<div class="title">Sample Wrs with deleted and inserted rows</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span class="tag">&lt;Wrs</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.businesscode.de/schema/bcdui/wrs-1.0.0</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;Header&gt;</span>
    <span class="tag">&lt;TransactionsNumber&gt;</span>2<span class="tag">&lt;/TransactionsNumber&gt;</span>
    <span class="tag">&lt;TransactionsNumber&gt;</span>1<span class="tag">&lt;/TransactionsNumber&gt;</span>
    <span class="tag">&lt;Columns&gt;</span>
      <span class="tag">&lt;C</span> <span class="attribute-name">pos</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">CTR</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">dimId</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">CTR</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Country</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">VARCHAR</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;C</span> <span class="attribute-name">pos</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">2</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">CW</span><span class="delimiter">&quot;</span></span>  <span class="attribute-name">dimId</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">CW</span><span class="delimiter">&quot;</span></span>  <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">C/W</span><span class="delimiter">&quot;</span></span>     <span class="attribute-name">type-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">INTEGER</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;C</span> <span class="attribute-name">pos</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">3</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">LOW</span><span class="delimiter">&quot;</span></span>             <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Low</span><span class="delimiter">&quot;</span></span>     <span class="attribute-name">type-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">NUMERIC</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;C</span> <span class="attribute-name">pos</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">4</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">HIGH</span><span class="delimiter">&quot;</span></span>            <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Heigh</span><span class="delimiter">&quot;</span></span>   <span class="attribute-name">type-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">NUMERIC</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;C</span> <span class="attribute-name">pos</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">5</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">HIGH2</span><span class="delimiter">&quot;</span></span>           <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Heigh 2</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">NUMERIC</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/Columns&gt;</span>
  <span class="tag">&lt;/Header&gt;</span>
  <span class="tag">&lt;Data</span> <span class="attribute-name">newSelection</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1 3 5 3</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;D</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;C&gt;</span>BE<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>23<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>1200<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>1300<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>-20<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;/D&gt;</span>
    <span class="tag">&lt;D</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">2</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;C&gt;</span>CZ<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>24<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>1234<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>1434<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>-15<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;/D&gt;</span>
    <span class="tag">&lt;I</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">I_1_3</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;C</span><span class="tag">/&gt;</span><span class="tag">&lt;C</span><span class="tag">/&gt;</span><span class="tag">&lt;C</span><span class="tag">/&gt;</span><span class="tag">&lt;C</span><span class="tag">/&gt;</span><span class="tag">&lt;C</span><span class="tag">/&gt;</span><span class="tag">&lt;/I&gt;</span>
    <span class="tag">&lt;I</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">I_1_3_2</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;C</span><span class="tag">/&gt;</span><span class="tag">&lt;C</span><span class="tag">/&gt;</span><span class="tag">&lt;C</span><span class="tag">/&gt;</span><span class="tag">&lt;C</span><span class="tag">/&gt;</span><span class="tag">&lt;C</span><span class="tag">/&gt;</span><span class="tag">&lt;/I&gt;</span>
    <span class="tag">&lt;R</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">3</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;C&gt;</span>DE<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>25<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>1321<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>1421<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>0<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;/R&gt;</span>
    <span class="tag">&lt;R</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">4</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;C&gt;</span>ES<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>26<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>1102<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>1202<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>20<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;/R&gt;</span>
    <span class="tag">&lt;R</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">5</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;C&gt;</span>FR<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>27<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>1234<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>1334<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>30.5<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;/R&gt;</span>
    <span class="tag">&lt;R</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">6</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;C&gt;</span>GB<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>28<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>1243<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>1343<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>45<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;/R&gt;</span>
    <span class="tag">&lt;R</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">7</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;C&gt;</span>HU<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>29<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>1453<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>1553<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>52<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;/R&gt;</span>
    <span class="tag">&lt;R</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">8</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;C&gt;</span>NO<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>30<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>1862<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>1962<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>58<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;/R&gt;</span>
    <span class="tag">&lt;R</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">9</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;C&gt;</span>US<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>31<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>1913<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>2013<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;C&gt;</span>64<span class="tag">&lt;/C&gt;</span><span class="tag">&lt;/R&gt;</span>
  <span class="tag">&lt;/Data&gt;</span>
<span class="tag">&lt;/Wrs&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Note the two deleted rows at the beginning in the two inserted rows after.</p>
</div>
<div class="paragraph">
<p>See documentation of <a href="https://businesscode.github.io/BCD-UI-Docu/jsdoc/bcdui.wrs.wrsUtil.html" target="_blank" rel="noopener">bcdui.wrsUtil package</a> for more information and other helpers.</p>
</div>
</div>
<div class="sect3">
<h4 id="_string_utilites">String Utilites</h4>
<div class="paragraph">
<p>Common string operations which do not come with XSLT-1.0 are provided via string utility template
part of <code>bcdui/xslt/stringUtils.xslt</code>.</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
printRows
</td>
<td class="hdlist2">
<p>prints a multi-line string with an indent row by row</p>
</td>
</tr>
<tr>
<td class="hdlist1">
left-trim
</td>
<td class="hdlist2">
<p>cuts of whitespace from string <code>s</code> start</p>
</td>
</tr>
<tr>
<td class="hdlist1">
right-trim
</td>
<td class="hdlist2">
<p>cuts of whitespace from string <code>s</code> end</p>
</td>
</tr>
<tr>
<td class="hdlist1">
trim
</td>
<td class="hdlist2">
<p>cuts of whitespace from string start and end</p>
</td>
</tr>
<tr>
<td class="hdlist1">
stringRepeater
</td>
<td class="hdlist2">
<p>repeats a given string <code>s</code> for <code>i</code> times</p>
</td>
</tr>
<tr>
<td class="hdlist1">
lastIndexOf
</td>
<td class="hdlist2">
<p>Finds the last occurrence of a character <code>c</code> in a string <code>s</code></p>
</td>
</tr>
<tr>
<td class="hdlist1">
replaceString
</td>
<td class="hdlist2">
<p>In string <code>str</code> it replaces substring <code>find</code> by substring <code>replacement</code></p>
</td>
</tr>
<tr>
<td class="hdlist1">
tokenize
</td>
<td class="hdlist2">
<p>splits up a <code>delimiter</code> separated <code>string</code> and returns a node set of elements</p>
</td>
</tr>
<tr>
<td class="hdlist1">
nthToken
</td>
<td class="hdlist2">
<p>Gets the n-th token starting at 1 of a delimiter separated string</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following example shows how to use it.</p>
</div>
<div class="listingblock">
<div class="title">Sample for using replaceString from stringUtils.xslt</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;xsl:stylesheet</span> <span class="attribute-name">version</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1.0</span><span class="delimiter">&quot;</span></span>
                <span class="attribute-name">xmlns:xsl</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/1999/XSL/Transform</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>

  <span class="tag">&lt;xsl:import</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">../bcdui/xslt/stringUtil.xslt</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>

  <span class="tag">&lt;xsl:output</span> <span class="attribute-name">method</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">xml</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">version</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1.0</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">encoding</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">UTF-8</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">indent</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">no</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>

  <span class="tag">&lt;xsl:variable</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">myString</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>This is a useless test. It will give a useless result<span class="tag">&lt;/xsl:variable&gt;</span>  <i class="conum" data-value="2"></i><b>(2)</b>

  <span class="comment">&lt;!-- Replace 'useless' by 'useful' --&gt;</span>
  <span class="tag">&lt;xsl:variable</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">myNewString</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;xsl:call-template</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">replaceString</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>  <i class="conum" data-value="3"></i><b>(3)</b>
      <span class="tag">&lt;xsl:with-param</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">str</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">select</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">$myString</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;xsl:with-param</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">find</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">select</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">'useless'</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;xsl:with-param</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">replacement</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">select</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">'useful'</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/xsl:call-template&gt;</span>
  <span class="tag">&lt;/xsl:variable&gt;</span>

  <span class="comment">&lt;!-- and run through the non empty single nodes and do something with each node --&gt;</span>
  <span class="tag">&lt;xsl:template</span> <span class="attribute-name">match</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/*</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;ul&gt;</span>
      <span class="tag">&lt;li&gt;</span>Old: <span class="tag">&lt;xsl:value-of</span> <span class="attribute-name">select</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">$myString</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span><span class="tag">&lt;/li&gt;</span>  <i class="conum" data-value="4"></i><b>(4)</b>
      <span class="tag">&lt;li&gt;</span>New: <span class="tag">&lt;xsl:value-of</span> <span class="attribute-name">select</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">$myNewString</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span><span class="tag">&lt;/li&gt;</span>
    <span class="tag">&lt;/ul&gt;</span>
  <span class="tag">&lt;/xsl:template&gt;</span>
<span class="tag">&lt;/xsl:stylesheet&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Import stringUtils.xslt</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>This is the original string</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Here we create a new string by applying the named template replaceString</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>And output the result.</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_transformation_into_non_wrs">Transformation into non-WRS</h4>
<div class="paragraph">
<p>These XSLT translate between a simplified clipboard format and WRS.
The in/output is &lt;Wrs xmlns:wrs=".."&gt;&lt;Data&gt;&lt;R&gt;&lt;D/&gt;..&lt;D/&gt;&lt;/R&gt;&lt;R&gt;&lt;D/&gt;..&lt;D/&gt;&lt;/R&gt;..&lt;/Data&gt;&lt;/Wrs&gt;without any header.
A js function is responsible for transforming csv from clipboard from and into the simplified format.</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
Copy
</td>
<td class="hdlist2">
<p>Puts the content of a WRS in clip board format into the clipboard.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Paste/Paste as new
</td>
<td class="hdlist2">
<p>Pasts the content of the clipboard given in the clip board format to a row in a given WRS.</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Later versions of BCD-UI are likely to support transformations to CSV, Sylk and Excel XML</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_using_exsltnode_set">12.3. Using exslt:node-set()</h3>
<div class="paragraph">
<p>Here we have are more complex sample, which makes use of tokenize but also <code>exslt:node-set()</code>.
While this is not directly related to stringUtils.xslt, we take the chance to show this useful feature here.</p>
</div>
<div class="listingblock">
<div class="title">XSLT using node-set()</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;xsl:stylesheet</span> <span class="attribute-name">version</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1.0</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">exclude-result-prefixes</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">exslt msxsl</span><span class="delimiter">&quot;</span></span>
                <span class="attribute-name">xmlns:xsl</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/1999/XSL/Transform</span><span class="delimiter">&quot;</span></span>
                <span class="attribute-name">xmlns:wrs</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.businesscode.de/schema/bcdui/wrs-1.0.0</span><span class="delimiter">&quot;</span></span>
                <span class="attribute-name">xmlns:exslt</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://exslt.org/common</span><span class="delimiter">&quot;</span></span>
                <span class="attribute-name">xmlns:msxsl</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">urn:schemas-microsoft-com:xslt</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>

  <span class="tag">&lt;xsl:import</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">../bcdui/xslt/stringUtil.xslt</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span> <i class="conum" data-value="2"></i><b>(2)</b>

  <span class="tag">&lt;msxsl:script</span> <span class="attribute-name">language</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">JScript</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">implements-prefix</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">exslt</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>  <i class="conum" data-value="3"></i><b>(3)</b>
    this['node-set']= function (x) { return x; }
  <span class="tag">&lt;/msxsl:script&gt;</span>

  <span class="tag">&lt;xsl:output</span> <span class="attribute-name">method</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">xml</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">version</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1.0</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">encoding</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">UTF-8</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">indent</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">no</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>

  <span class="tag">&lt;xsl:variable</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">myString</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>This is a test<span class="tag">&lt;/xsl:variable&gt;</span>  <i class="conum" data-value="4"></i><b>(4)</b>

  <span class="comment">&lt;!-- split up the string --&gt;</span>
  <span class="tag">&lt;xsl:variable</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">myStringTokens</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>  <i class="conum" data-value="5"></i><b>(5)</b>
    <span class="tag">&lt;xsl:call-template</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">tokenize</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;xsl:with-param</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">string</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">select</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">$myString</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;xsl:with-param</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">delimiter</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">select</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">' '</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/xsl:call-template&gt;</span>
  <span class="tag">&lt;/xsl:variable&gt;</span>
  <span class="comment">&lt;!-- build a nodeset --&gt;</span>
  <span class="tag">&lt;xsl:variable</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">myNodes</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">select</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">exslt:node-set($myStringTokens)</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>  <i class="conum" data-value="6"></i><b>(6)</b>

  <span class="comment">&lt;!-- and run through the non empty single nodes and do something with each node --&gt;</span>
  <span class="tag">&lt;xsl:template</span> <span class="attribute-name">match</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/*</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;ul&gt;</span>
      <span class="tag">&lt;xsl:for-each</span> <span class="attribute-name">select</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">$myNodes/wrs:Wrs/wrs:Data/wrs:R[wrs:C[.!='']]</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>  <i class="conum" data-value="7"></i><b>(7)</b>
        <span class="tag">&lt;li&gt;</span><span class="tag">&lt;xsl:value-of</span> <span class="attribute-name">select</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">.</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span><span class="tag">&lt;/li&gt;</span>
      <span class="tag">&lt;/xsl:for-each&gt;</span>
    <span class="tag">&lt;/ul&gt;</span>
  <span class="tag">&lt;/xsl:template&gt;</span>
<span class="tag">&lt;/xsl:stylesheet&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>To use exslt:node-set() declare exslt and msxml as namespaces</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Import our utils</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>This magic line makes exslt:node-set() available in Internet Explorer</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>This is the string which we will split into DOM nodes</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Call tokenizer named template from stringUtils.xslt, it will return a Wrs like string</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Here, with the help of exslt:node-set(), we turn the returned string into a real DOM node set</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>And we can then walk through the node set as if it was part of a parameter or the input document</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_xsd_schema">12.4. XSD Schema</h3>
<div class="imageblock">
<div class="content">
<img src="images/xsltLibrary_xsltLibSchema.png" alt="xsltLibrary xsltLibSchema">
</div>
<div class="title">Figure 7. XSD schema of XsltParameters</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="DocApi">13. Api in different languages</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_apis_overview">13.1. Apis Overview</h3>
<div class="paragraph">
<p>Core objects, widgets and components can be created in different APIs, all leading to the same resulting object.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>JavaScript is the most common and most powerful way</p>
</li>
<li>
<p>HTML Custom Elements are available for widgets and components, i.e. for all visible objects</p>
</li>
<li>
<p>JSP provides wrapper for object creation</p>
</li>
<li>
<p>For XSLT named templates are available for creation of thr objects</p>
</li>
<li>
<p>XAPI allows you to trigger creation of objects from XML</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In the following chapters we show the same sample for each language API:</p>
</div>
</div>
<div class="sect2">
<h3 id="_javascript_api">13.2. JavaScript API</h3>
<div class="paragraph">
<p>JavaScript is the most common and powerful usage of BCD-UI objects.
As opposed to the other APIs, it is not declarative but instead you work wit the real objects.
Start by importing the library</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;script</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text/javascript</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">../bcdui/bcdui.js</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/script&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>For visual output of widgets, components and renderer, you need to create a targetHtml on you page</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcdCaption</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Output of a Javascript renderer<span class="tag">&lt;/div&gt;</span>
<span class="tag">&lt;div</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">rendererTH</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/div&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Best is to put your JavaScript code at the page bottom.
This way you are sure your targetHtml elements are created already:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="keyword">var</span> model = <span class="keyword">new</span> bcdui.core.SimpleModel({ <span class="key">url</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">../sampleWrs.xml</span><span class="delimiter">&quot;</span></span> });
<span class="keyword">var</span> renderer = <span class="keyword">new</span> bcdui.core.Renderer({
  <span class="key">chain</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">../bcdui/xslt/renderer/htmlBuilder.xslt</span><span class="delimiter">&quot;</span></span>,
  <span class="key">targetHtml</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">rendererTH</span><span class="delimiter">&quot;</span></span>,
  <span class="key">inputModel</span>: model
});</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_html5_custom_elements_api">13.3. HTML5 Custom Elements API</h3>
<div class="paragraph">
<p>HTML5 Custom Elements look like standard HTML tags but provide custom functionality.
They will become more and more common in the next time.</p>
</div>
<div class="ulist">
<div class="title">General rules Rules</div>
<ul>
<li>
<p>There are custom tags for widgets, components and the renderer, i.e. for all objects creating visual output.</p>
</li>
<li>
<p>The naming of the tags follows the naming of the JavaScript API, preceded by 'bcd-'.</p>
</li>
<li>
<p>The output is placed at the location of the tag, i.e. no targetHtml is necessary</p>
</li>
<li>
<p>To reference other objects, for example DataProviders, you need to give those objects and explicit id</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Place the renderer or widget where you expect the output</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;bcd-renderer</span> <span class="attribute-name">inputModel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">myModel</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/bcd-renderer&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>For HTML5 Custom Elements, don&#8217;t use self-closing elements ('/&gt;'), use an explicit closing tab instead</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Create non-visual objects with JavaScript and make sure you assign an id</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="keyword">var</span> model5 = <span class="keyword">new</span> bcdui.core.SimpleModel({
  <span class="key">id</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">myModel</span><span class="delimiter">&quot;</span></span>, <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="key">url</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">../sampleWrs.xml</span><span class="delimiter">&quot;</span></span>
});</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Assign an id because HTML5 Custom Elements need strings as parameters</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_jsp_api">13.4. JSP API</h3>
<div class="paragraph">
<p>To use BCD-UI&#8217;s taglib, make sure to add bcui-ui-jsptaglib.jar to WEB-INF/lib.<br>
Start by importing the taglibs needed on your page.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="jsp">&lt;%@ taglib uri=&quot;http://de.businesscode.web/jsp/taglib/bcdui/activity&quot; prefix=&quot;a&quot;%&gt;
&lt;%@ taglib uri=&quot;http://de.businesscode.web/jsp/taglib/bcdui/bcdui&quot; prefix=&quot;b&quot;%&gt;
&lt;%@ taglib uri=&quot;http://de.businesscode.web/jsp/taglib/bcdui/widget&quot; prefix=&quot;w&quot;%&gt;
&lt;%@ taglib uri=&quot;http://de.businesscode.web/jsp/taglib/bcdui/widgetNg&quot; prefix=&quot;wng&quot;%&gt;
&lt;%@ taglib uri=&quot;http://de.businesscode.web/jsp/taglib/bcdui/webpage&quot; prefix=&quot;webpage&quot;%&gt;
&lt;%@ taglib uri=&quot;http://de.businesscode.web/jsp/taglib/bcdui/component&quot; prefix=&quot;cmp&quot;%&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then use <code>&lt;b:init/&gt;</code> tag to load and start BCD-IU</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;head&gt;</span>
  <span class="tag">&lt;meta</span> <span class="attribute-name">charset</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">UTF-8</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
  <span class="tag">&lt;title&gt;</span>BCD-UI JSP sample<span class="tag">&lt;/title&gt;</span>
  <span class="tag">&lt;b:init</span> <span class="tag">/&gt;</span>
<span class="tag">&lt;/head&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Tags have the same name and parameters as their JavaScript counterparts, except SimpleModel, which is named model in jsp.
Our tags allow tag nesting for parameters.
A renderer or widget will create its output at the place of the tag, so on this case you do not need a targetHtml parameter.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;div</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcdBodyContainer</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcdCaption</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Output is placed here<span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;b:renderer&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="tag">&lt;b:inputModel&gt;</span>
      <span class="tag">&lt;b:model</span> <span class="attribute-name">url</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">../sampleWrs</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/b:model&gt;</span>
    <span class="tag">&lt;/b:inputModel&gt;</span>
  <span class="tag">&lt;/b:renderer&gt;</span>
<span class="tag">&lt;/div&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Output is placed where the tag is</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_xslt_api">13.5. XSLT API</h3>
<div class="paragraph">
<p>You can call our named templates from XSLT to create BCD-UI objects, including core, widgets and components.
This is useful, if you have an XSLT creating HTML allowing very dynamic UIs.<br>
Such an XSLT may look like this:</p>
</div>
<div class="listingblock">
<div class="title">xsltApiSample.xslt making calls to XSLT API</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;xsl:stylesheet</span> <span class="attribute-name">xmlns:xsl</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/1999/XSL/Transform</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">version</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1.0</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>

  <span class="tag">&lt;xsl:import</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">../bcdui/js/core/core.xslt</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="tag">&lt;xsl:output</span> <span class="attribute-name">method</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">html</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">encoding</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">UTF-8</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">indent</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">yes</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>

  <span class="tag">&lt;xsl:template</span> <span class="attribute-name">match</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/*</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;div&gt;</span> <i class="conum" data-value="2"></i><b>(2)</b>
      <span class="comment">&lt;!-- Create a model --&gt;</span>
      <span class="tag">&lt;xsl:call-template</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">model</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span> <i class="conum" data-value="3"></i><b>(3)</b>
        <span class="tag">&lt;xsl:with-param</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">select</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">'myModelXslt'</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span> <i class="conum" data-value="4"></i><b>(4)</b>
        <span class="tag">&lt;xsl:with-param</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">url</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">select</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">'../sampleWrs.xml'</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;/xsl:call-template&gt;</span>
      <span class="comment">&lt;!-- Output its result right here --&gt;</span>
      <span class="tag">&lt;xsl:call-template</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">renderer</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;xsl:with-param</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">inputModel</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>myModelXslt<span class="tag">&lt;/xsl:with-param&gt;</span>
      <span class="tag">&lt;/xsl:call-template&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;/xsl:template&gt;</span>

<span class="tag">&lt;/xsl:stylesheet&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Import bcdui/core/core.xslt, bcdui/widget/widget.xslt, bcdui/widgetNg/widgetNg.xslt and or , bcdui/component/component.xslt</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Embed the tags in yout ordinary HTML output</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The XSLT template names follow the js API names in lower case</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The parameter names follow the js API</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>First create a place where to show the result:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;div</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcdCaption</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Output of XSLT<span class="tag">&lt;/div&gt;</span>
<span class="tag">&lt;div</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">rendererXsltTH</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/div&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Then create a Renderer to show it and it will trigger the creation of the objects:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">  <span class="keyword">var</span> rendererXslt = <span class="keyword">new</span> bcdui.core.Renderer({
    <span class="key">chain</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">xsltApiSample.xslt</span><span class="delimiter">&quot;</span></span>,
    <span class="key">targetHtml</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">rendererXsltTH</span><span class="delimiter">&quot;</span></span>
  });</code></pre>
</div>
</div>
<div class="ulist">
<div class="title">XSLT API Restrictions</div>
<ul>
<li>
<p>It is not possible to use core:modelUpdater on the guiStatus to initially transform it. Please use either JS or JSP API for that purpose.</p>
</li>
<li>
<p>Following widgets from /bcdui/js/widget/widget.xslt are not available in this API: blindUpDown, loginForm, userMessagesEditor, userMessagesViewer</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_xapi_api">13.6. XAPI API</h3>
<div class="paragraph">
<p>XAPI is a fully declarative way to create BCD-UI objects in XML.
It can be used directly and allows for easy creation of a Domain Specific Language (DSL) in XML for your customers on top of it.</p>
</div>
<div class="paragraph">
<p>An XAPI file looks like the following:</p>
</div>
<div class="listingblock">
<div class="title">xapi.xml making use of XAPI</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;Root</span> <span class="attribute-name">xmlns:xapi</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.businesscode.de/schema/bcdui/xmlapi-1.0.0</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;xapi:Model</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">myModelXapi</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">url</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">../sampleWrs.xml</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="tag">&lt;h2&gt;</span>Some HTML here<span class="tag">&lt;/h2&gt;</span> <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="tag">&lt;xapi:Renderer</span> <span class="attribute-name">targetHtml</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">rendererXapiTh</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">inputModel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">myModelXapi</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/Root&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Tag and parameter names follow JavaScript API</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>You can freely mix and nest with HTML here</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The minimal way to apply it is to create the following XSLT.
In your version you may want to extend this by your DSL functionality.</p>
</div>
<div class="listingblock">
<div class="title">xapiMinimalRenderer.xslt for applying XAPI</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;xsl:stylesheet</span> <span class="attribute-name">version</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1.0</span><span class="delimiter">&quot;</span></span>
                <span class="attribute-name">xmlns:xsl</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/1999/XSL/Transform</span><span class="delimiter">&quot;</span></span>
                <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/1999/xhtml</span><span class="delimiter">&quot;</span></span>
                <span class="attribute-name">xmlns:html</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/1999/xhtml</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>

  <span class="tag">&lt;xsl:import</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">../bcdui/js/core/core.xslt</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span> <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="tag">&lt;xsl:output</span> <span class="attribute-name">method</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">html</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">version</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1.0</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">encoding</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">UTF-8</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">indent</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">no</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>

  <span class="tag">&lt;xsl:template</span> <span class="attribute-name">match</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/*</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;div&gt;</span> <i class="conum" data-value="3"></i><b>(3)</b>
      <span class="tag">&lt;xsl:apply-templates</span> <span class="attribute-name">select</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">*</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;/xsl:template&gt;</span>

  <span class="comment">&lt;!-- Copy html content 1:1 --&gt;</span>
  <span class="tag">&lt;xsl:template</span> <span class="attribute-name">match</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">html:*</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span> <i class="conum" data-value="4"></i><b>(4)</b>
    <span class="tag">&lt;xsl:copy&gt;</span>
      <span class="tag">&lt;xsl:copy-of</span> <span class="attribute-name">select</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">@*</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;xsl:apply-templates</span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/xsl:copy&gt;</span>
  <span class="tag">&lt;/xsl:template&gt;</span>

<span class="tag">&lt;/xsl:stylesheet&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Add an html namespace so that we can copy that later 1:1</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Import needed XSLT (see comment above XSLT API)</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>You can freely mix and nest with HTML here</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Here we make sure we copy HTML content 1:1</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>And use the standard way to apply this stylesheet to the xapi file. Make sure you created the targetHtml before</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">  <span class="keyword">var</span> rendererXapi = <span class="keyword">new</span> bcdui.core.Renderer({
    <span class="key">chain</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">xapiMinimalRenderer.xslt</span><span class="delimiter">&quot;</span></span>,
    <span class="key">targetHtml</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">rendererXapiTH</span><span class="delimiter">&quot;</span></span>,
    <span class="key">inputModel</span>: <span class="keyword">new</span> bcdui.core.SimpleModel( <span class="string"><span class="delimiter">&quot;</span><span class="content">xapi.xml</span><span class="delimiter">&quot;</span></span> ) <i class="conum" data-value="1"></i><b>(1)</b>
  });</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>A short way to create a SimpleModel and pass it
<div class="olist arabic">
<ol class="arabic">
<li>
<p>XAPI Restrictions</p>
<div class="ulist">
<ul>
<li>
<p>It is not possible to use core:modelUpdater on the guiStatus to initially transform it. Please use either JS or JSP API for that purpose.</p>
</li>
<li>
<p>Following widgets from /bcdui/js/widget/widget.xslt are not available in this API: BlindUpDown, LoginForm, UserMessagesEditor, UserMessagesViewer</p>
</li>
</ul>
</div>
</li>
</ol>
</div></td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_create_your_own_domain_specific_language_dsl">13.7. Create your own Domain Specific Language DSL</h3>
<div class="paragraph">
<p>The real power of XSLT API and XAPI is that you can easily extend it to your own Domain Specific Language.</p>
</div>
<div class="paragraph">
<p>First extend the XSLT used for the XAPI sample by an XSLT template reflecting you DSL.
In our case we added <code>cust:MyRenderer</code>, which is convenient as it gets the data url directly, removing the need to create an extra DataProvider.
While this is a very simple example, you can easily extend it to a complete DSL.</p>
</div>
<div class="listingblock">
<div class="title">dslRenderer.xslt, defining your extension</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;xsl:stylesheet</span> <span class="attribute-name">version</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1.0</span><span class="delimiter">&quot;</span></span>
                <span class="attribute-name">xmlns:xsl</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/1999/XSL/Transform</span><span class="delimiter">&quot;</span></span>
                <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/1999/xhtml</span><span class="delimiter">&quot;</span></span>
                <span class="attribute-name">xmlns:html</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/1999/xhtml</span><span class="delimiter">&quot;</span></span>
                <span class="attribute-name">xmlns:cust</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.businesscode.de/schema/bcdui/customization-1.0.0</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>

  <span class="tag">&lt;xsl:import</span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">../bcdui/js/core/core.xslt</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
  <span class="tag">&lt;xsl:output</span> <span class="attribute-name">method</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">html</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">version</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1.0</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">encoding</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">UTF-8</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">indent</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">no</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>

  <span class="comment">&lt;!-- Your DSL extension --&gt;</span>
  <span class="tag">&lt;xsl:template</span> <span class="attribute-name">match</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">cust:MyRenderer</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span> <i class="conum" data-value="2"></i><b>(2)</b>

    <span class="tag">&lt;H2&gt;</span>Output of DSL<span class="tag">&lt;/H2&gt;</span>

    <span class="tag">&lt;xsl:call-template</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">model</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span> <i class="conum" data-value="3"></i><b>(3)</b>
      <span class="tag">&lt;xsl:with-param</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>dataModel<span class="tag">&lt;/xsl:with-param&gt;</span>
      <span class="tag">&lt;xsl:with-param</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">url</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">select</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">@dataUrl</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span> <i class="conum" data-value="4"></i><b>(4)</b>
    <span class="tag">&lt;/xsl:call-template&gt;</span>

    <span class="tag">&lt;xsl:call-template</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">renderer</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;xsl:with-param</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">targetHtml</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">select</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">@targetHtml</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;xsl:with-param</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">inputModel</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>dataModel<span class="tag">&lt;/xsl:with-param&gt;</span>
    <span class="tag">&lt;/xsl:call-template&gt;</span>

  <span class="tag">&lt;/xsl:template&gt;</span>

  <span class="tag">&lt;xsl:template</span> <span class="attribute-name">match</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/*</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span> <i class="conum" data-value="5"></i><b>(5)</b>
    <span class="tag">&lt;div&gt;</span>
      <span class="tag">&lt;xsl:apply-templates</span> <span class="attribute-name">select</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">*</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/div&gt;</span>
  <span class="tag">&lt;/xsl:template&gt;</span>

  <span class="comment">&lt;!-- Copy html content 1:1 --&gt;</span>
  <span class="tag">&lt;xsl:template</span> <span class="attribute-name">match</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">html:*</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;xsl:copy&gt;</span>
      <span class="tag">&lt;xsl:copy-of</span> <span class="attribute-name">select</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">@*</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;xsl:apply-templates</span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/xsl:copy&gt;</span>
  <span class="tag">&lt;/xsl:template&gt;</span>

<span class="tag">&lt;/xsl:stylesheet&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Use <code>xmlns:cust=http://www.businesscode.de/schema/bcdui/customization-1.0.0</code> namespace for your extensions as it is known to the browser&#8217;s XPath, BCD-UI adds it there.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>This is where your DSL is handled, note the 'cust' namespace. You can create any HTML content and BCD-UI objects here.<br>
Here you may also call apply-templates to resolve nested XAPI calls in a more complex sample.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Internally it will translate to calls to XSLT API</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Here the value of your 'dataUrl' parameter is passed</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Standard handling of XAPI</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Create a renderer with the dslRenderer.xslt as <code>chain</code> an die following as <code>inputModel</code></p>
</div>
<div class="listingblock">
<div class="title">dsl.xml, calling your extension</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;Root</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/1999/xhtml</span><span class="delimiter">&quot;</span></span>
      <span class="attribute-name">xmlns:cust</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.businesscode.de/schema/bcdui/customization-1.0.0</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="tag">&lt;h2&gt;</span>Some HTML content<span class="tag">&lt;/h2&gt;</span> <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="tag">&lt;cust:MyRenderer</span> <span class="attribute-name">targetHtml</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">rendererDslTh</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">dataUrl</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">../sampleWrs.xml</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span> <i class="conum" data-value="3"></i><b>(3)</b>
<span class="tag">&lt;/Root&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Make sure to HTML content is in HTML namespace</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>You can freely mix and nest with HTML content</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Here you make use of your custom DSL</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>and you will see your own DSL in action!</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="DocSecurity">14. Security</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_security_overview">14.1. Security Overview</h3>
<div class="paragraph">
<p>BCD-UI supports security with the following features</p>
</div>
<div class="ulist">
<ul>
<li>
<p>https:// hosting, partly or complete</p>
</li>
<li>
<p>Company authentication and authorization mechanisms like central LDAP and single login can be applied</p>
</li>
<li>
<p>SQL injection prevention</p>
</li>
<li>
<p>no-cache no-store to protect secure data on shared computers, see <a href="#DocCaching">caching</a></p>
</li>
<li>
<p>Integration of <a href="https://shiro.apache.org/">Apache Shiro</a> access rules</p>
</li>
<li>
<p>Easy declarative user rights for:</p>
<div class="ulist">
<ul>
<li>
<p><a href="#DocBinding">BindingSets</a></p>
<div class="ulist">
<ul>
<li>
<p>Restrict write access</p>
</li>
<li>
<p>Advanced row-level security support for all databases</p>
</li>
<li>
<p>Trigger additional actions when writing to a BindingSet, including data historization</p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="#DocWidgets">Menu</a> structure shown to the user, for example whether admin pages are offered for navigation,
see @rights attribute in <a href="https://github.com/businesscode/BCD-UI/blob/master/Docu/xsd/menu-1.0.0.xsd" target="_blank" rel="noopener">menu-1.0.0.xsd</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Windows single-sign-on for EnterpriseEdition</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_security_access_filter">14.2. Security access filter</h3>
<div class="paragraph">
<p>A security access filter serves as the central entry point to the application and validates each access against the security policy.
Each request is checked whether it addresses a</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Public resource: Not in scope of the filter, the filter will let the request through</p>
</li>
<li>
<p>Protected resource</p>
<div class="ulist">
<ul>
<li>
<p>Accessed in a valid session: The filter will let the request through</p>
</li>
<li>
<p>No valid session but auto-login: Auto-login is available through the use of HTTP cookies.</p>
</li>
<li>
<p>No valid session: The filter will re-direct the request to the login page to establish a valid session with a valid login.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>After login the original request is processed.</p>
</div>
<div class="paragraph">
<p>For each url path you can also set required rights in the init-param section of IniShiroFilter in web.xml.</p>
</div>
<div class="sect3">
<h4 id="_developers_view">Developer&#8217;s view</h4>
<div class="paragraph">
<p>Developers need to follow these rules to implement secure applications:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Enable IniShiroFilter security filter in web.xml to enforce login for non-public areas</p>
</li>
<li>
<p>Configure the CachingFilter to send user dependent and sensitive data with <code>no-cache</code></p>
</li>
<li>
<p>Invalidate sessionId on log-off and session timeout explicitly</p>
</li>
<li>
<p>The system supports deep links, i.e. redirecting to the originally requested page after login<br>
<span class="icon"><i class="fa fa-paperclip"></i></span> The system uses the first unsuccessfully access url for redirection.
Make sure all resources addressed from the public login page are also public, otherwise the user is forwarded to that
resource (often a .css file) after the successful login attempt in, when the target was the login page.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_shiro_permissions">Shiro permissions</h4>
<div class="paragraph">
<p>The Shiro <em>subject</em> of the current session represents the user in the system.
Rights can be queried via <code>SecurityUtils.getSubject().isPermitted(value)</code>.
Apache Shiro, supports a hierarchical permission structure and wild-cards in the hierarchy.
For example one user may only be allowed <code>page:report:scorecard</code> where else another user may be granted
access to all pages  <code>page:*</code> .</p>
</div>
</div>
<div class="sect3">
<h4 id="_login_form_and_logging">Login form and logging</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Login page<br>
A login page is a standard page with two plain inputs:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="html"><span class="tag">&lt;form</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">loginform</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">action</span>=<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">method</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">post</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">&quot;</span><span class="key">margin</span>: <span class="float">20px</span> <span class="float">0px</span> <span class="float">0px</span> <span class="float">20px</span>;<span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;table</span> <span class="attribute-name">align</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">left</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">border</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">0</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">cellspacing</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">0</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">cellpadding</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">3</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;tr&gt;</span>
      <span class="tag">&lt;td&gt;</span>Username:<span class="tag">&lt;/td&gt;</span>
      <span class="tag">&lt;td&gt;</span><span class="tag">&lt;input</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">maxlength</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">30</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">autofocus</span><span class="tag">&gt;</span><span class="tag">&lt;/td&gt;</span>
    <span class="tag">&lt;/tr&gt;</span>
    <span class="tag">&lt;tr&gt;</span>
      <span class="tag">&lt;td&gt;</span>Password:<span class="tag">&lt;/td&gt;</span>
      <span class="tag">&lt;td&gt;</span><span class="tag">&lt;input</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">maxlength</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">30</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span><span class="tag">&lt;/td&gt;</span>
    <span class="tag">&lt;/tr&gt;</span>
    <span class="tag">&lt;tr&gt;</span>
      <span class="tag">&lt;td</span> <span class="attribute-name">colspan</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">2</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">align</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">right</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">style</span>=<span class="string"><span class="delimiter">&quot;</span><span class="key">padding-top</span>:<span class="float">10px</span>;<span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;button</span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Login</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">submit</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Login<span class="tag">&lt;/button&gt;</span>
      <span class="tag">&lt;/td&gt;</span>
    <span class="tag">&lt;/tr&gt;</span>
  <span class="tag">&lt;/table&gt;</span>
<span class="tag">&lt;/form&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>We are not using BCD-UI buttons here but plain HTML ones here, because we made the library accessible to already authenticated users only.</p>
</div>
</li>
<li>
<p>Login logging<br>
By adding <code>bcd_log_login</code> BindingSet to your application, all login attempts and their result is logged into the corresponding table.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>To  set up users and their authorization, you can choose the simple setup by hard-coding them in web.xml
or maintaining them in the database.</p>
</div>
</div>
<div class="sect3">
<h4 id="_define_users_in_web_xml">Define users in web.xml</h4>
<div class="paragraph">
<p>You can have an easy web.xml - only setup in the following way:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Enable IniShiroFilter in web.xml<br>
And configure Shiro section next to the servlet:</p>
<div class="listingblock">
<div class="title">Remove all manager entries in that case from the [main] section, only keep</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Add any users, their password and their roles:</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Define permissions of roles:</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"></code></pre>
</div>
</div>
<div class="paragraph">
<p>Users with 'adminRole' also have the pages:admin right.
The name of the right can be hierarchically as mentioned, you are free to name them.</p>
</div>
</li>
<li>
<p>Define access rights for urls:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>bcdui/theme/** is anon, means needs no valid login. This is because we need the style on the login page already</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>login.html is authc and requires login</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>/logout triggers a logout, afterwards we are redirected to logout.redirectUrl, see [main] section</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Here we define that any authenticated user can access /cube</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>For /api/** we require login and a 'pages:admin' permission</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_define_users_in_database">Define users in database</h4>
<div class="paragraph">
<p>Instead of having a static set of users and passwords in web.xml, can store users and passwords in the database.</p>
</div>
<div class="paragraph">
<p>The setup is similar to above, but the [main] section of web.xml looks like the following instead:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Shiro sections in web.xml</p>
<div class="paragraph">
<p>Enable the managers in the [main} section in addition to the url definitions</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"></code></pre>
</div>
</div>
<div class="paragraph">
<p>Make sure, $CATALINA_TMPDIR is writable for Tomcat, otherwise ehcache will complaint on start.<br>
Keep [users] and [roles] sections empty and follow for [urls] the description given in the chapter above.</p>
</div>
</li>
<li>
<p>SubjectSettings config<br>
Add a file <code>WEB-INF/bcdui/subjectSettings.xml</code> with at least the following content:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="tag">&lt;SubjectSettingsConfig</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.businesscode.de/schema/bcdui/subjectsettings-1.0.0</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;SubjectFilterTypes&gt;</span>
  <span class="tag">&lt;/SubjectFilterTypes&gt;</span>
  <span class="tag">&lt;Authentication&gt;</span>
    <span class="tag">&lt;SubjectSettings</span><span class="tag">/&gt;</span>
  <span class="tag">&lt;/Authentication&gt;</span>
  <span class="tag">&lt;SubjectSettings&gt;</span>
    <span class="tag">&lt;Jdbc&gt;</span><span class="tag">&lt;DefaultDataSource</span><span class="tag">/&gt;</span><span class="tag">&lt;/Jdbc&gt;</span>
  <span class="tag">&lt;/SubjectSettings&gt;</span>
<span class="tag">&lt;/SubjectSettingsConfig&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Later you can define BindingSet related security restrictions here.</p>
</div>
</li>
<li>
<p>User related BindingSets<br>
Add bcd_sec_user and bcd_sec_user_settings BindingSets (and the corresponding tables).
There is no prebuilt UI editor for these two tables but their content should be self-explanatory.
All attributes and permissions assigned to a user in the table corresponding to <code>bcd_sec_user_settings</code> are read when the user logs in.
These become in-memory subject settings, which can be used to query whether a user has a a certain permission.
These permissions are checked for example by the security filter when accessing an url.</p>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Layout of BindingSet bcd_sec_user_settings</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Column</th>
<th class="tableblock halign-left valign-top">Content</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">user_id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Id of the user this permission is assigned to.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">right_type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Id of the permission the values relate to.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">right_value</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A value for that right type. Note that (user_id, right_type) is not unique, thus you can assign multiple values here by repeating (user_id, right_type).</p></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Custom setup<br>
You may also provide your own LoginServlet or Realm for a custom setup of deriving users and their attributes.
Please check Shiro documentation for more options.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_oauth2_azure_google">OAuth2 / Azure / Google</h4>
<div class="paragraph">
<p>BCD-UI provides Shiro integrated implementation for general OAuth2 authentication (referred to as oauth in this docu) and ready-to-use modules for Azure and Google integration.
OAuth integration is currently limited to authentication only, the permissions for authorization are managed by application through subjectsettings.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Prerequisites</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Register your client application to Azure/Google/x to obtain a client and a client secret. For Google we use 'email' scope and for Azure 'https://graph.microsoft.com/user.read' but you can override and use whatever you prefer to use for authentication.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_configuration_2">14.3. Configuration</h3>
<div class="paragraph">
<p>Provided configurations will authenticate user and set the principal to user&#8217;s email.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Sample configuration for Azure</p>
<div class="paragraph">
<p>in your web.xml, Shiro configuration</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>[main]
..

## Azure OAuth
oauthcAzure = de.businesscode.bcdui.security.shiro.oauth2.azure.AzureAuthenticatingFilter
oauthcAzure.authorizeEndpoint = https://login.microsoftonline.com/your_tenant_id/oauth2/v2.0/authorize
oauthcAzure.clientId = your_client_id
oauthcAzure.redirectUrl = http://localhost:8080/application
oauthcAzure.successUrl = /
oauthcAzureRealm = de.businesscode.bcdui.security.shiro.oauth2.azure.AzureRealm
oauthcAzureRealm.clientSecret = your_client_secret
oauthcAzureRealm.tokenEndpoint = https://login.microsoftonline.com/your_tenant_id/oauth2/v2.0/token

..

[urls]
/oauth = oauthcAzure
..</code></pre>
</div>
</div>
</li>
<li>
<p>Sample configuration for Google</p>
<div class="paragraph">
<p>in your web.xml, Shiro configuration</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>[main]
..

## Google
oauthcGoogle = de.businesscode.bcdui.security.shiro.oauth2.google.GoogleAuthenticatingFilter
oauthcGoogle.authorizeEndpoint = https://accounts.google.com/o/oauth2/v2/auth
oauthcGoogle.clientId = your_client_id
oauthcGoogle.redirectUrl = http://localhost:8080/application
oauthcGoogle.successUrl = /
oauthcGoogleRealm = de.businesscode.bcdui.security.shiro.oauth2.google.GoogleRealm
oauthcGoogleRealm.clientSecret = your_client_secret
..

[urls]
/oauth = oauthcGoogle
..</code></pre>
</div>
</div>
</li>
<li>
<p>Sample configuration for multiple authenticators</p>
<div class="paragraph">
<p>in your web.xml, Shiro configuration</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>[main]
..

## Azure
oauthcAzure = de.businesscode.bcdui.security.shiro.oauth2.azure.AzureAuthenticatingFilter
# required since we bind both to same url
oauthcAzure.optionalProviderId = azure
oauthcAzure.authorizeEndpoint = https://login.microsoftonline.com/your_tenant_id/oauth2/v2.0/authorize
oauthcAzure.clientId = your_client_id
oauthcAzure.redirectUrl = http://localhost:8080/application
oauthcAzure.successUrl = /
oauthcAzureRealm = de.businesscode.bcdui.security.shiro.oauth2.azure.AzureRealm
oauthcAzureRealm.clientSecret = your_client_secret
oauthcAzureRealm.tokenEndpoint = https://login.microsoftonline.com/your_tenant_id/oauth2/v2.0/token
# required due to multiple authenticators
oauthcAzureRealm.authenticator = $oauthcAzure

## Google
oauthcGoogle = de.businesscode.bcdui.security.shiro.oauth2.google.GoogleAuthenticatingFilter
# required since we bind both to same url
oauthcGoogle.optionalProviderId = google
oauthcGoogle.authorizeEndpoint = https://accounts.google.com/o/oauth2/v2/auth
oauthcGoogle.clientId = your_client_id
oauthcGoogle.redirectUrl = http://localhost:8080/application
oauthcGoogle.successUrl = /
oauthcGoogleRealm = de.businesscode.bcdui.security.shiro.oauth2.google.GoogleRealm
oauthcGoogleRealm.clientSecret = your_client_secret
# required due to multiple authenticators
oauthcGoogleRealm.authenticator = $oauthcGoogle

..

[urls]
# since both filters map same url, control via url parameter 'oauth-provider-id' which filter to active by providing providerId, i.e. ?oauth-provider-id=azure
/oauth = oauthcAzure, oauthcGoogle
..</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="_kerberos_windows_sso_windows_authentication_enterpriseedition">Kerberos / Windows SSO / Windows Authentication (EnterpriseEdition)</h4>
<div class="paragraph">
<p>BCDUI provides transparent integration for authentication against Windows Active Directory (or any other Directory service) via Kerberos protocol
for web applications running Tomcat v7 or greater.
In case this automatic authentication also fails, the system falls back to built-in form authentication.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Prerequisites</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Copy bcd-spnego-valve-[x.x.x].jar to into $TOMCAT_HOME/lib folder or any other folder known to Tomcat&#8217;s common-classloader.
There are no side-effects of putting this library into tomcat.</p>
</li>
<li>
<p>An existing service account on Active Directory, i.e. HTTP/tomcat1.virtual.business-code.de@VIRTUAL.BUSINESS-CODE.DE to be used by tomcat</p>
</li>
<li>
<p>A .keytab file for that service account.</p>
</li>
<li>
<p>Tomcat must be running on a remote machine from Active Directory perspective as well as from User&#8217;s perspective, otherwise SPNEGO on browser will fallback to proprietary NTLM, which is not supported.</p>
</li>
<li>
<p>The hostname must be added to "Local Intranet" security zone for IE (Chrome uses same settings), for FF you have to enter configuration to add host to trusted sites.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Tomcat Configuration for Kerberos</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Keytab from Domain Controller<br>
Please ask your domain administrator to provide a keytab file for Tomcat service to connect to Domain Controller.</p>
</li>
<li>
<p>Install Java 8 and Tomcat7 v.7.0.60 or newer</p>
</li>
<li>
<p>Copy files from tomcat_lib/* to your $tomcat.home/lib</p>
</li>
<li>
<p>Install JAAS/Kerberos configuration:<br>
Copy your keytab file (which you have got in step 0) and tomcat_conf/*
to your $catalina.base/conf folder and adjust the files to meet your environment configuration:</p>
<div class="ulist">
<ul>
<li>
<p>file: jaas.conf, change following properties:</p>
<div class="ulist">
<ul>
<li>
<p>principal &#8594; (put your principal here the keytab file was issued for)</p>
</li>
<li>
<p>keytab &#8594; adjust path to reflect location of your keytab file<br></p>
</li>
</ul>
</div>
</li>
<li>
<p>file: krb5.ini</p>
<div class="ulist">
<ul>
<li>
<p>change realm VIRTUAL.BUSINESS-CODE.DE to yours, realm names must be CAPITAL CASE.</p>
</li>
<li>
<p>default_keytab_name -&gt; adjust path to reflect location of your keytab file</p>
</li>
<li>
<p>[realms].&lt;YOUR_REALM&gt;.kdc -&gt; hostname of your domain controller</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Install SSO Test App:</p>
<div class="ulist">
<ul>
<li>
<p>copy BCD-UI-SSO.war to $tomcat.base/webapps</p>
</li>
<li>
<p>ensure the app is running by navigating in your browser to url: &lt;your-tomcat-hostname&gt;/BCD-UI-SSO</p>
</li>
<li>
<p>you should see a page with a link "Enter Secured Page"<br>
If you don&#8217;t see the page, check Tomcat logs.
Most likely you have missed to copy extra library to tomcat as described in step 2.</p>
</li>
<li>
<p>Please, don&#8217;t click the link yet.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Configure Browsers on Windows client machine with domain user to test SSO:</p>
<div class="ulist">
<ul>
<li>
<p>For IE and Chrome ( chrome re-uses settings from IE ):</p>
<div class="ulist">
<ul>
<li>
<p>add &lt;your-tomcat-hostname&gt; to "Local intranet" security-zone</p>
</li>
<li>
<p>ensure "Enable integrated windows authentication" is checked in Internet Options &#8594; Advanced &#8594; Security subtree</p>
</li>
</ul>
</div>
</li>
<li>
<p>For Firefox:</p>
<div class="ulist">
<ul>
<li>
<p>open about:config in your Firefox browser and change following options:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>network.negotiate-auth.allow-non-fqdn     =&gt; true
network.negotiate-auth.delegation-uris    =&gt; &lt;your-tomcat-hostname&gt;
network.automatic-ntlm-auth.trusted-uris  =&gt; &lt;your-tomcat-hostname&gt;
network.automatic-ntlm-auth.allow-proxies =&gt; True
network.negotiate-auth.allow-proxies      =&gt; True</code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Verify SSO on Windows client machine with domain user:</p>
<div class="ulist">
<ul>
<li>
<p>after security settings changed, please restart the browser and navigate to url: &lt;your-tomcat-hostname&gt;/BCD-UI-SSO</p>
</li>
<li>
<p>then click on "Enter Secured Page" link</p>
</li>
<li>
<p>your should see one of the following:</p>
<div class="ulist">
<ul>
<li>
<p>"SSO success", along with principal name.</p>
</li>
<li>
<p>"SSO failed", which means that SSO has failed for some reason. Please consult tomcat logs for further information.
In such a case the web application will trigger authentication on itself.</p>
</li>
</ul>
</div>
</li>
<li>
<p>In case you see HTTP-401 or some default authentication-failed screen or a browser
pop-ups authentication dialog, then you most likely did not configure your browser properly (see step 5)</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Context (Webapp) Configuration</p>
<div class="paragraph">
<p>Extend your Context descriptor (context.xml) and register the Valve 'de.businesscode.bcdui.security.SpnegoValve':</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;Context&gt;</span>
  <span class="tag">&lt;Valve</span> <span class="attribute-name">className</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">de.businesscode.bcdui.security.SpnegoValve</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/Context&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Now, the Valve is attached to request processing, yet without effect. We have to arm it in your web.xml. As such, please
add following to your descriptor:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;security-role&gt;</span>
  <span class="tag">&lt;role-name&gt;</span>*<span class="tag">&lt;/role-name&gt;</span>
<span class="tag">&lt;/security-role&gt;</span><span class="tag">&lt;security-constraint&gt;</span>
  <span class="tag">&lt;web-resource-collection&gt;</span>
    <span class="tag">&lt;web-resource-name&gt;</span>SPNEGO AUTHENTICATION<span class="tag">&lt;/web-resource-name&gt;</span>
    <span class="tag">&lt;url-pattern&gt;</span>/*<span class="tag">&lt;/url-pattern&gt;</span>
  <span class="tag">&lt;/web-resource-collection&gt;</span>
  <span class="tag">&lt;auth-constraint&gt;</span>
    <span class="tag">&lt;role-name&gt;</span>*<span class="tag">&lt;/role-name&gt;</span>
  <span class="tag">&lt;/auth-constraint&gt;</span>
<span class="tag">&lt;/security-constraint&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>No &lt;login-config&gt; element is required here, since we have attached our Valve explicitely. Essentially, security-constraint/web-resource-collection/url-pattern
shall match those secured by Shiro Filter. Once done you have enabled Windows/Kerberos SSO, which will fall back to form based authentication in any failure.</p>
</div>
</li>
<li>
<p>Finally, rewrite the default 'authc' filter in Shiro descriptor (inline in web.xml or shiro.ini) and add this line into [main] section:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>[main]
authc = de.businesscode.bcdui.subjectsettings.AuthenticationFilter
realm = de.businesscode.bcdui.subjectsettings.JdbcRealm
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>And follow the setup for Shiro section described in the chapters above.</p>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="DocCaching">15. Caching</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_caching_overview">15.1. Caching overview</h3>
<div class="paragraph">
<p>Caching is a mechanism to speed up performance drastically, next to database tuning it is the most important performance measure.
BCD-UI supports caching and makes caching setup easy.
It allows for reducing server and network load and improving user experience at the same time.
Depending on the type of expected access different caching strategies are optimal.
BCD-UI supports two types of caching</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Client side caching</dt>
<dd>
<p>Client side caching is often the most effective way of caching.
It prevents completely the need for repeated requests to a server.
No load at all is produced for network and server and the user sees the requested data immediately, more like in a desktop application.</p>
</dd>
<dt class="hdlist1">Server side caching</dt>
<dd>
<p>Server side caching use the cache on the server.
The clients need to do an actual request but repeated identical requests from multiple clients, like default reports, are answered with low overhead.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The definition of when a resource expires is done identically for server and client caching.
It is possible to define the 'expires' date of the answer for a request as a sample occurring at  <code>Tue, 01 Dec 2009 12:30:40 UTC</code>  in terms of</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">ExpiresAbsTime</dt>
<dd>
<p>time, like "00:00:00" leading to  <code>Wed, 02 Dec 2009 00:00:00 UTC</code></p>
</dd>
<dt class="hdlist1">ExpiresAbsDow</dt>
<dd>
<p>day of week incl. hour, like "Sat-12" leading to  <code>Sat, 05 Dec 2009 12:00:00 UTC</code></p>
</dd>
<dt class="hdlist1">ExpiresAbsDatetime</dt>
<dd>
<p>absolute date time, like "2011-01-20 12:00:00" leading to  <code>Thu, 01 Jan 2011 12:00:00 UTC</code></p>
</dd>
<dt class="hdlist1">ExpiresRelDays</dt>
<dd>
<p>number of days starting from the request, same time, like "2" leading to  <code>Thu, 03 Dec 2009 12:30:40 UTC</code></p>
</dd>
<dt class="hdlist1">ExpiresRelTime</dt>
<dd>
<p>number of hours/min/sec starting from the request, like "01:00:05" leading to  <code>Tue, 01 Dec 2009 13:30:45 UTC</code></p>
</dd>
<dt class="hdlist1">CacheRequestDirective</dt>
<dd>
<p>native HTTP1.1 header string to be set in Cache-Control header</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>There can be multiple space separated values for ExpiresAbsTime and ExpiresAbsDow, like "00:00:00 12:00:00", the next matching one is used for the response expires.
The response will have the <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.21" target="_blank" rel="noopener">HTTP Expires</a> header be set accordingly.</p>
</div>
<div class="sect3">
<h4 id="_disable_caching">Disable Caching</h4>
<div class="paragraph">
<p>During development, you do not usually have enable caching. For this case BCD-UI provides the possibility to enable/disable all caching settings.
To achieve this please define a environment entry within your context.xml file with the name: "bcdui/disableCache" like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;Environment</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcdui/disableCache</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">java.lang.Boolean</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>RequestLifecycleFilter will send a Cache-Control: no-cache; no-store for all resources if set to true.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_client_side_caching">15.2. Client side caching</h3>
<div class="paragraph">
<p>Client side caching is by far the most efficient way of caching in most cases.
ClientCachingFilter is responsible for adding caching information to the HTTP response.
Client filters also allow an ExcludeUrls parameter with a space separated list of regular expressions.
If an expression matches the request path, the filter takes no action.</p>
</div>
<div class="paragraph">
<p>Static files can usually be cached. How long depends on when a re-deployment may happen.
Typically if deployments happen over the week-end, set  <code>ExpiresAbsDow</code>  to 'Sat' as shown above.
To identify static files it is possible to define for which extensions the ClientCachingFilter applies via ExtensionsRestriction.</p>
</div>
<div class="paragraph">
<p>In a reporting environment, reporting and reference data can often be cached until the next morning.
This is supported by setting  <code>ExpiresAbsTime</code>  to '07:00:00'.
To support different caching times for different data, create different servlet instances at these URLs in your web.xml.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Always exclude /bcdui/servlets/ and /bcdui/bcdui.js from caching.
In most cases you also want /vfs/ to update immediately.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The default <a href="https://github.com/businesscode/BCD-UI/blob/master/Server/configFiles/web.xml" target="_blank" rel="noopener">web.xml</a> contains 2 setups.
The one initially enabled is optimized for development, caching only BCD-UI sources, for production enable the second one, caching all static resources.</p>
</div>
<div class="sect3">
<h4 id="_other_headers">Other headers</h4>
<div class="paragraph">
<p>For the client side header it is also possible to define the response header value of value of cache-directive with the <code>cache-response-directive</code> parameter.
See sample for no-cache below.
The response will have the <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.9" target="_blank" rel="noopener">HTTP Cache-Control</a> header be set accordingly.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="DocBinding">16. Bindings</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_bindings_overview">16.1. Bindings Overview</h3>
<div class="paragraph">
<p>A BindingSet defines the logical view of a table or view of a database.
Bindings are maintained in simple XML files at WEB-INF/bcdui/bindings and introduce the following capabilities:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Logical naming</dt>
<dd>
<p>Logical names for views, tables (BindingSet) and columns (BindingItem) ease the understanding harmonizing of the data model.</p>
</dd>
<dt class="hdlist1">Logical data types</dt>
<dd>
<p>Logical type of a BindingItem (column) and other meta information beyond database&#8217;s capability allow to adopt and overwrite a physical database.</p>
</dd>
<dt class="hdlist1">Aggregation hierarchies - BindingGroups</dt>
<dd>
<p>The option to choose best fit among multiple tables depending on the actual BindingItems (columns) needed, similar to a materialized view or join view,
i,e, for the current request the best fit (highest aggregation) table is chosen</p>
</dd>
<dt class="hdlist1">Relations, i.e. Joins</dt>
<dd>
<p>The option to do joins only if needed based on the actual BindingItem (column) addressed</p>
</dd>
<dt class="hdlist1">Row level security</dt>
<dd>
<p>The option to enforce constraints (Filter) on the SQL queries like user rights or language</p>
</dd>
<dt class="hdlist1">Server values</dt>
<dd>
<p>The option to enforce values server-side, for example the user&#8217;s id.</p>
</dd>
<dt class="hdlist1">Write pre- and processing</dt>
<dd>
<p>The option to enforce additional processing of accesses to the database, for example application specific historization</p>
</dd>
<dt class="hdlist1">Datasource</dt>
<dd>
<p>Each BindingSets can refer to a different database.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Only tables and columns with a binding can be accessed by a BCD-UI application.
This mechanism enables the server to limit the data access of the front end
and provides meta information about the database columns.</p>
</div>
<div class="paragraph">
<p>Bindings are maintained as XML files in WEB-INF/bcd/bindings in the following form:
A simple binding looks like the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;BindingSet</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.businesscode.de/schema/bcdui/bindings-1.0.0</span><span class="delimiter">&quot;</span></span>
            <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">myGeoData</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">table</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">mb_test_md_geo</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>   <i class="conum" data-value="1"></i><b>(1)</b> <i class="conum" data-value="2"></i><b>(2)</b> <i class="conum" data-value="3"></i><b>(3)</b>

  <span class="tag">&lt;C</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">country</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">isKey</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Country</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span> <i class="conum" data-value="4"></i><b>(4)</b>
    <span class="tag">&lt;Column&gt;</span>country<span class="tag">&lt;/Column&gt;</span> <i class="conum" data-value="5"></i><b>(5)</b>
  <span class="tag">&lt;/C&gt;</span>
<span class="tag">&lt;/BindingSet&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>BindingSet root element namespace need to be correct</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>id</code> is the logical name within the application</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>table</code> is the physical name of the table or view it the database</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Each <code>bnd:C</code> is a <em>BindingItem</em> represents an individual column, you give it a logical id and you can enforce some attributes</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>This is the column expression for the database, often simply the column name but in can also be something more complex like <code>substr(colame,2)</code></td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_bindingset_features">16.2. BindingSet features</h3>
<div class="sect3">
<h4 id="_row_level_security">Row-level-security</h4>
<div class="paragraph">
<p>When reading from a BindingSet via Wrs, the access can be limited for a user on row-level.
For example a user may only see entries for UK even if the query does not have this restriction.
With the same method, a user&#8217;s language setting can be applied to a i18n caption lookup table in the background.
This is done via a server-side added where constraint depending on user settings.
This is configured by cooperation of the following three artifacts:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>A scc:SubjectFilterType definition</p>
<div class="paragraph">
<p>A SubjectFilterType in WEB-INF/bcdui/subjectSettings.xml defines the BindingItem on which to apply the restriction
and a BindingSet with the user&#8217;s rights, default is bcd_sec_user_settings.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;SubjectSettingsConfig</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.businesscode.de/schema/bcdui/subjectsettings-1.0.0</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;SubjectFilterTypes&gt;</span>
    <span class="tag">&lt;SubjectFilterType</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">geo:ctr</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;Caption&gt;</span>Countries<span class="tag">&lt;/Caption&gt;</span>
      <span class="tag">&lt;BindingSet&gt;</span>countryRights<span class="tag">&lt;/BindingSet&gt;</span>
      <span class="tag">&lt;BindingItems&gt;</span>
        <span class="tag">&lt;C</span> <span class="attribute-name">bRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">country</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;/BindingItems&gt;</span>
    <span class="tag">&lt;/SubjectFilterType&gt;</span>
  <span class="tag">&lt;/SubjectFilterTypes&gt;</span>
  <span class="comment">&lt;!-- ... --&gt;</span>
<span class="tag">&lt;/SubjectSettingsConfig&gt;</span></code></pre>
</div>
</div>
</li>
<li>
<p>A reference to such a definition in BindingSet.</p>
<div class="paragraph">
<p>In the restricted BindingSet you just need to refer to such a SubjectFilterType and have the BindingItem with the correct id country.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;BindingSet</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.businesscode.de/schema/bcdui/bindings-1.0.0</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">rowLevelBs</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="comment">&lt;!-- all C's etc ... --&gt;</span>
  <span class="tag">&lt;C</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">country</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>..<span class="tag">&lt;/C&gt;</span>
  <span class="comment">&lt;!-- all C's etc ... --&gt;</span>
  <span class="tag">&lt;SubjectSettings&gt;</span>
    <span class="tag">&lt;SubjectFilter</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">geo:ctr</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
  <span class="tag">&lt;/SubjectSettings&gt;</span>
<span class="tag">&lt;/BindingSet&gt;</span></code></pre>
</div>
</div>
</li>
<li>
<p>Assigned values regarding this permission to the current user in bcd_sec_user_settings.</p>
<div class="paragraph">
<p>Well-known BindingSet bcd_sec_user_settings is expected to have three BindingItems: user_id, right_type and right_value.
Each row assigns an allowed country to a user for the geo:ctr right.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_bindings_write_protection">Bindings write-protection</h4>
<div class="paragraph">
<p>If (and only if) a WEB-INF/bcdui/subjectSettings.xml is present in a project, all BindingSets are write protected when accessed via Wrs.
To allow a user to insert into or update a view/table behind a BindingSet, you must</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Define that the BindingSet is write-able via an bnd:SubjectSettings/bnd:Security/bnd:Operation entry</p>
<div class="paragraph">
<p>To configure security on your binding do the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;BindingSet</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.businesscode.de/schema/bcdui/bindings-1.0.0</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="comment">&lt;!-- all C's etc ... --&gt;</span>
  <span class="tag">&lt;SubjectSettings&gt;</span>
    <span class="tag">&lt;Security&gt;</span>
      <span class="tag">&lt;Operation</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">write</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">permission</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">perms1 perms2:ctx1 perms2:ctx2</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/Security&gt;</span>
    <span class="comment">&lt;!-- possible SubjectFilter elements ... --&gt;</span>
  <span class="tag">&lt;/SubjectSettings&gt;</span>
<span class="tag">&lt;/BindingSet&gt;</span></code></pre>
</div>
</div>
</li>
<li>
<p>Provide the user with sufficient rights</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Currently BindingSets understand only one operation called <em>write</em> which protects ANY modification to a table (C-UD),
the <em>permission</em> takes a list (space separated) of permissions which are evaluated by Shiro, hence Shiro&#8217;s syntax
can be applied here. <strong>Note:</strong> the list is inclusive, meaning that the operation is granted only in case the user
retains ALL permissions listed. The permission list may also be empty or be absent at all, in such a case NO check is
done for this operation, thus it effectively disables write-protection.</p>
</div>
</div>
<div class="sect3">
<h4 id="_write_pre_processing">Write pre-processing</h4>
<div class="paragraph">
<p>The optional write pre-processing allows to enforce additional processing of data before it is written to the BindingSet.
A project specific callback derived from the  <code>de.businesscode.bcdui.binding.write.WriteProcessingCallback</code>
can be called to modify the data to be written, for example for security reasons.
When multiple callbacks are configured, they are called in given order.
An callback receives the following events:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>endHeader</p>
</li>
<li>
<p>endDataRow</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See above configuration for an example.</p>
</div>
<div class="sect4">
<h5 id="_wrsmodificationcallback">WrsModificationCallback</h5>
<div class="paragraph">
<p>WrsModificationCallback is a general implementation of de.businesscode.bcdui.binding.write.WriteProcessingCallback offering WRS values manipulation on the server.
The class is  set up using parameters in the Binding definition document. Please consult the API documentation on class de.businesscode.bcdui.binding.write.WrsModificationCallback for
further information.</p>
</div>
<div class="paragraph">
<p>In short, this callback allows you to provide server-side or constant values for WRS data, to either coalesce it with data sent from client and
even to assure the data to exist whether is has been send from client or not. A sample:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;BindingSet</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.businesscode.de/schema/bcdui/bindings-1.0.0</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcd_test_table</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">table</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcd_test_table</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;C</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">someValue_name</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">VARCHAR</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">isKey</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;Column&gt;</span>TEST_NAME<span class="tag">&lt;/Column&gt;</span>
  <span class="tag">&lt;/C&gt;</span>
  <span class="tag">&lt;C</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">someOtherValue</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">NUMERIC</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;Column&gt;</span>TEST_VALUE<span class="tag">&lt;/Column&gt;</span>
  <span class="tag">&lt;/C&gt;</span>
  <span class="tag">&lt;SubjectSettings&gt;</span>
    <span class="tag">&lt;Security&gt;</span>
      <span class="tag">&lt;Operation</span> <span class="attribute-name">permission</span>=<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">write</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/Security&gt;</span>
  <span class="tag">&lt;/SubjectSettings&gt;</span>
  <span class="tag">&lt;WriteProcessing&gt;</span>
    <span class="tag">&lt;Callbacks&gt;</span>
      <span class="tag">&lt;Callback</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">de.businesscode.bcdui.binding.write.WrsModificationCallback</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="comment">&lt;!-- for someValue_name binding item the value is either taken from client or (if null) the value
          'server value' will be written to database --&gt;</span>
        <span class="tag">&lt;Param</span> <span class="attribute-name">bindingItemId</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">someValue_name</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">expression</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">server value</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="comment">&lt;!-- since coalesce is set to false, someOtherValue binding-item will always be written value:
          'session: ...' to database --&gt;</span>
        <span class="tag">&lt;Param</span> <span class="attribute-name">bindingItemId</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">someOtherValue</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">expression</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">session: ${bcdBean.sessionId}</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">isCoalesce</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">false</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;/Callback&gt;</span>
    <span class="tag">&lt;/Callbacks&gt;</span>
  <span class="tag">&lt;/WriteProcessing&gt;</span>
<span class="tag">&lt;/BindingSet&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_ready_to_use_wrsmodificationlog">Ready to use WrsModificationLog</h5>
<div class="paragraph">
<p>WrsModificationLog is a convenience implementation of de.businesscode.bcdui.binding.write.WrsModificationCallback offering WRS modification logs.
It maintains the items:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>bcdUpdateStamp</p>
</li>
<li>
<p>bcdUpdateBy</p>
</li>
<li>
<p>bcdCreateStamp</p>
</li>
<li>
<p>bcdCreateBy</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>as appropriate. See class documentation for more information.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;BindingSet</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.businesscode.de/schema/bcdui/bindings-1.0.0</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcd_test_table</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">table</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcd_test_table</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;C</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">someValue_name</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">VARCHAR</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">isKey</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;Column&gt;</span>TEST_NAME<span class="tag">&lt;/Column&gt;</span>
  <span class="tag">&lt;/C&gt;</span>
  <span class="tag">&lt;C</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">someOtherValue</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">NUMERIC</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;Column&gt;</span>TEST_VALUE<span class="tag">&lt;/Column&gt;</span>
  <span class="tag">&lt;/C&gt;</span>
  <span class="tag">&lt;C</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcdUpdateStamp</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">TIMESTAMP</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">isReadOnly</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;Column&gt;</span>update_stamp<span class="tag">&lt;/Column&gt;</span>
  <span class="tag">&lt;/C&gt;</span>
  <span class="tag">&lt;C</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcdUpdateBy</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">VARCHAR</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">isReadOnly</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;Column&gt;</span>update_by<span class="tag">&lt;/Column&gt;</span>
  <span class="tag">&lt;/C&gt;</span>
  <span class="tag">&lt;C</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcdCreateStamp</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">TIMESTAMP</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">isReadOnly</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;Column&gt;</span>create_stamp<span class="tag">&lt;/Column&gt;</span>
  <span class="tag">&lt;/C&gt;</span>
  <span class="tag">&lt;C</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcdCreateBy</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">VARCHAR</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">isReadOnly</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;Column&gt;</span>create_by<span class="tag">&lt;/Column&gt;</span>
  <span class="tag">&lt;/C&gt;</span>
  <span class="tag">&lt;SubjectSettings&gt;</span>
    <span class="tag">&lt;Security&gt;</span>
      <span class="tag">&lt;Operation</span> <span class="attribute-name">permission</span>=<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">write</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/Security&gt;</span>
  <span class="tag">&lt;/SubjectSettings&gt;</span>
  <span class="tag">&lt;WriteProcessing&gt;</span>
    <span class="tag">&lt;Callbacks&gt;</span>
      <span class="tag">&lt;Callback</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">de.businesscode.bcdui.binding.write.WrsModificationLog</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/Callbacks&gt;</span>
  <span class="tag">&lt;/WriteProcessing&gt;</span>
<span class="tag">&lt;/BindingSet&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_bindinginclude_xinclude">BindingInclude / XInclude</h4>
<div class="paragraph">
<p>Recurring groups of BindingItems, for examples sets of levels of a dimension or sets of measures do not need to be repeated in all
BindingSets but can be included on XML level via xi:include.
If you use <code>b:BindingInclude</code> as root, the BindingSet will not be instantiated itself but is only for importing it elsewhere.</p>
</div>
</div>
<div class="sect3">
<h4 id="_relations">Relations</h4>
<div class="paragraph">
<p>Relations allow for joining with additional BindingSets if needed.
For example, add a section like</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">  <span class="tag">&lt;Relation</span> <span class="attribute-name">rightBindingSet</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">myCountryData</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">leftOuter</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;Imports&gt;</span>
      <span class="tag">&lt;ImportItem</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">orig_country_caption</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;BindingItemRef</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">country_caption</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;/ImportItem&gt;</span>
    <span class="tag">&lt;/Imports&gt;</span>
    <span class="tag">&lt;Condition&gt;</span>
      <span class="tag">&lt;IsEqual&gt;</span>
        <span class="tag">&lt;BindingItemRef</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">orig_country</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">side</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">left</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;BindingItemRef</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">country_code</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">side</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">right</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;/IsEqual&gt;</span>
    <span class="tag">&lt;/Condition&gt;</span>
  <span class="tag">&lt;/Relation&gt;</span>

  <span class="tag">&lt;Relation</span> <span class="attribute-name">rightBindingSet</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">myCountryData</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">leftOuter</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;Imports&gt;</span>
      <span class="tag">&lt;ImportItem</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">dest_country_caption</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;BindingItemRef</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">country_caption</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;/ImportItem&gt;</span>
    <span class="tag">&lt;/Imports&gt;</span>
    <span class="tag">&lt;Condition&gt;</span>
      <span class="tag">&lt;IsEqual&gt;</span>
        <span class="tag">&lt;BindingItemRef</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">dest_country</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">side</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">left</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;BindingItemRef</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">country_code</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">side</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">right</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;/IsEqual&gt;</span>
    <span class="tag">&lt;/Condition&gt;</span>
  <span class="tag">&lt;/Relation&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>to the BindingSet sample from chapter <a href="#DocMinimalCube">Minimal Cube</a> and you can also show the countries' caption.</p>
</div>
</div>
<div class="sect3">
<h4 id="_bindingsetgroup">BindingSetGroup</h4>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
BindingSetGroup is an EnterpriseEdition extension, not available for CommunityEdition.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>A BindingSetGroup allows to be treated as a BindingSet but the actual BindingSet used depends on the list of BindingItems being requested.
The first BindingSet in order providing all BindingItems is chosen. This allows for example to</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Redirect a request to the table with the highest aggregation level providing all required dimensions</p>
</li>
<li>
<p>Redirect a request to a table with the right dimensions, for example cw vs. month.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Therefore this feature is very useful for optimizing database performance.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;b:BindingSetGroup</span> <span class="attribute-name">xmlns:b</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.businesscode.de/schema/bcdui/bindings-1.0.0</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">shipmentCube</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;b:BindingSetRef</span> <span class="attribute-name">idRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">t_demo_shipment_kpi_mo</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
  <span class="tag">&lt;b:BindingSetRef</span> <span class="attribute-name">idRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">t_demo_shipment_kpi_cw</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
  <span class="tag">&lt;b:BindingSetRef</span> <span class="attribute-name">idRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">t_demo_shipment_detail</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/b:BindingSetGroup&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_details">Details</h4>
<div class="imageblock">
<div class="content">
<img src="images/binding_bindings-1.0.0.png" alt="binding bindings 1.0.0">
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="DocContext">17. Application context and settings</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_unified_expression_language">17.1. Unified Expression Language</h3>
<div class="paragraph">
<p>The BCD-UI System uses the Jakarta EE Unified Expression Language to put Server-side Values into
XML documents at various places. With this feature it is possible to create for example
request documents with the period set to the current month or year. This is especially
useful when such a request document is based on the guiStatus and therefore bookmarkable,
because the bookmark could contain a dynamically changed date.</p>
</div>
<div class="sect3">
<h4 id="_usage_scenarios">Usage scenarios</h4>
<div class="paragraph">
<p>There are some XML documents where the EL can be used. These documents are described in
the following sections.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Request document / GuiStatus</dt>
<dd>
<p>The request document can make use of the EL to fill in some values (usually filters)
with server-side defaults.
Example:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;Status</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.businesscode.de/schema/bcdui/guiStatus-1.0.0</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;Filter</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.businesscode.de/schema/bcdui/filter-1.0.0</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;Expression</span> <span class="attribute-name">bRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">date</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">op</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">=</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">${session.defaultDate}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
  <span class="tag">&lt;/Filter&gt;</span>
<span class="tag">&lt;/Status&gt;</span></code></pre>
</div>
</div>
</dd>
<dt class="hdlist1">WebRowSet Servlet</dt>
<dd>
<p>This use case is applied when saving a WebRowSet on the server which should contain
server-defined values. Example</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;Wrs</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.businesscode.de/schema/bcdui/wrs-1.0.0</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;RequestDocument</span><span class="tag">/&gt;</span>
  <span class="tag">&lt;Header&gt;</span>
    <span class="tag">&lt;Columns&gt;</span>
      <span class="tag">&lt;C</span> <span class="attribute-name">pos</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;BindingItem</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">countryId</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;/C&gt;</span>
      <span class="tag">&lt;C</span> <span class="attribute-name">pos</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">2</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;BindingItem</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">countryName</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;/C&gt;</span>
    <span class="tag">&lt;/Columns&gt;</span>
  <span class="tag">&lt;/Header&gt;</span>
  <span class="tag">&lt;Data&gt;</span>
    <span class="tag">&lt;I&gt;</span>
      <span class="tag">&lt;U&gt;</span>${bcdfn:generateId(&quot;dataIds&quot;)}<span class="tag">&lt;/U&gt;</span>
      <span class="tag">&lt;U&gt;</span>New Country<span class="tag">&lt;/U&gt;</span>
    <span class="tag">&lt;/I&gt;</span>
  <span class="tag">&lt;/Data&gt;</span>
<span class="tag">&lt;/Wrs&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In this WebRowSet the bcdfn:generateId function is used. This function generates a
new ID (e.g. from an Oracle Sequence) for a certain scope (e.g. the name of the Sequence).</p>
</div>
</dd>
<dt class="hdlist1">Bindings</dt>
<dd>
<p>The EL is used within the Bindings to set some default values for the Binding Items. These
values are evaluated by the WebRowSet servlet or other Servlets using Bindings to set some
default filters for columns. This technique makes it very easy to implement row-level
security.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_el_variables_and_functions">EL variables and functions</h4>
<div class="paragraph">
<p>The EL context defined by BCDUI offers access to the "request" and "session" variables. If the
EL occurs within an XML document it also defines a "document" variable pointing to the DOM
document. These variables "request" and "session" variables work similar to the ones defined
in JSP so that Expressions can be re-used. The context also contains the functions declared in
webpage.tld to makes it even more compatible with JSP.</p>
</div>
</div>
<div class="sect3">
<h4 id="_using_el_within_custom_servlets">Using EL within custom servlets</h4>
<div class="paragraph">
<p>It is also possible to use the Expression Language within custom code. To achieve this an object
of the class  <code>de.businesscode.bcdui.el.ELEnvironment</code>  must be created and its
 <code>eval</code>  method can then evaluate all EL expressions within a specified String.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="DocXmlData">18. WebRowSet</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_webrowset_wrs_overview">18.1. WebRowSet Wrs Overview</h3>
<div class="paragraph">
<p>BCD-UI delivers and receives data in the following XML format.</p>
</div>
<div class="paragraph">
<p>BCD-UI WebRowSet Wrs is a unique, easy to use document format, called Wrs, which is preserved during processing on the client.
This allows to reuse, replace, remove or reorder stylesheets in a transformation chain since all stylesheets work on the same input and output format.</p>
</div>
<div class="sect3">
<h4 id="_webrowset_format">WebRowSet format</h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;Wrs</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.businesscode.de/schema/bcdui/wrs-1.0.0</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;Header&gt;</span>
    <span class="tag">&lt;BindingSet&gt;</span>country_table&quot;<span class="tag">&lt;/BindingSet&gt;</span>
    <span class="tag">&lt;Columns&gt;</span>
      <span class="comment">&lt;!-- Definitions of the columns --&gt;</span>
      <span class="tag">&lt;C</span> <span class="attribute-name">pos</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ctrcd</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;A</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ctr_caption</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">caption</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;/C&gt;</span>
      <span class="tag">&lt;C</span> <span class="attribute-name">pos</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">2</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">population</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/Columns&gt;</span>
    <span class="tag">&lt;Debug&gt;</span>
      <span class="comment">&lt;!-- Only available in debug case --&gt;</span>
      <span class="tag">&lt;SQL&gt;</span>select ctrcd, pop from countries<span class="tag">&lt;/SQL&gt;</span>
      <span class="tag">&lt;ExecTime&gt;</span>100ms<span class="tag">&lt;/ExecTime&gt;</span>
      <span class="tag">&lt;SelectedBindingSet&gt;</span>bindingSetId<span class="tag">&lt;/SelectedBindingSet&gt;</span>
      <span class="tag">&lt;WrsRequest&gt;</span>...<span class="tag">&lt;/WrsRequest&gt;</span>
      <span class="tag">&lt;Url&gt;</span>...<span class="tag">&lt;/Url&gt;</span>
    <span class="tag">&lt;/Debug&gt;</span>
  <span class="tag">&lt;/Header&gt;</span>
  <span class="tag">&lt;Data&gt;</span>
    <span class="tag">&lt;R</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">id0</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;C</span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Austria</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>AU<span class="tag">&lt;/C&gt;</span>
      <span class="tag">&lt;C&gt;</span>8000000<span class="tag">&lt;/C&gt;</span>
    <span class="tag">&lt;/R&gt;</span>
    <span class="tag">&lt;D</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">id2</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      <span class="comment">&lt;!-- Row to be deleted --&gt;</span>
      <span class="tag">&lt;C</span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Deutsche Demokratische Repubik</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>DR<span class="tag">&lt;/C&gt;</span>
      <span class="tag">&lt;C&gt;</span>18000000<span class="tag">&lt;/C&gt;</span>
    <span class="tag">&lt;/D&gt;</span>
    <span class="tag">&lt;M</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">id3</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      <span class="comment">&lt;!-- Row to be updated --&gt;</span>
      <span class="tag">&lt;C</span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Great Britain</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>GB<span class="tag">&lt;/C&gt;</span>
      <span class="comment">&lt;!-- Current column value --&gt;</span>
      <span class="tag">&lt;O</span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Great Britain</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>GB<span class="tag">&lt;/O&gt;</span>
      <span class="comment">&lt;!-- Original column value --&gt;</span>
      <span class="tag">&lt;O&gt;</span>Britain<span class="tag">&lt;/O&gt;</span>
      <span class="tag">&lt;O&gt;</span>England<span class="tag">&lt;/O&gt;</span>
      <span class="tag">&lt;C&gt;</span>55000000<span class="tag">&lt;/C&gt;</span>
      <span class="tag">&lt;O&gt;</span>55000000<span class="tag">&lt;/O&gt;</span>
    <span class="tag">&lt;/M&gt;</span>
    <span class="tag">&lt;I</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">id4</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;C</span> <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">France</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>FR<span class="tag">&lt;/C&gt;</span>
      <span class="tag">&lt;C</span> <span class="attribute-name">nil</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="comment">&lt;!-- Without the nil attribute, this would be an empty string --&gt;</span>
      <span class="comment">&lt;!-- The following is a sample for a server side replaced value --&gt;</span>
      <span class="tag">&lt;C&gt;</span>
        <span class="tag">&lt;ServerValue</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">GenerateId</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">param1</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">scope</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">param2</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">alias</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;/C&gt;</span>
    <span class="tag">&lt;/I&gt;</span>
  <span class="tag">&lt;/Data&gt;</span>
  <span class="tag">&lt;MaxRowsExceeded</span> <span class="attribute-name">maxRows</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">500</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>true<span class="tag">&lt;/MaxRowsExceeded&gt;</span>
<span class="tag">&lt;/Wrs&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Each row can be</p>
</div>
<div class="ulist">
<ul>
<li>
<p>R for an unmodified row</p>
</li>
<li>
<p>D for a row that is to be deleted</p>
</li>
<li>
<p>I for a row that is to be inserted</p>
</li>
<li>
<p>M for a row that is to be updated. The original value of the column follows in an O elements after the respective C element</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each row has a unique id, whose value has no meaning beside being unique within the document.</p>
</div>
</div>
<div class="sect3">
<h4 id="_request_document">Request document</h4>
<div class="paragraph">
<p>To request a Wrs from the server, a request document in the following format is to be sent.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;WrsRequest</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.businesscode.de/schema/bcdui/wrs-request-1.0.0</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">maxRows</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">100</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">startRow</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">300</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;Select</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;Columns&gt;</span>
      <span class="tag">&lt;C</span> <span class="attribute-name">bRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ctrId</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;C</span> <span class="attribute-name">bRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">mo</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="comment">&lt;!-- Attributes to main value, like sort order or long name: --&gt;</span>
        <span class="tag">&lt;A</span> <span class="attribute-name">bRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">monthName</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">caption</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;/C&gt;</span>
      <span class="tag">&lt;C</span> <span class="attribute-name">bRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">travelers</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">aggr</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">min</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/Columns&gt;</span>
    <span class="tag">&lt;From&gt;</span>
      <span class="tag">&lt;BindingSet&gt;</span>ctrPeople<span class="tag">&lt;/BindingSet&gt;</span>
    <span class="tag">&lt;/From&gt;</span>
    <span class="tag">&lt;Filter</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.businesscode.de/schema/bcdui/filter-1.0.0</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;And&gt;</span>
        <span class="tag">&lt;Or&gt;</span>
          <span class="tag">&lt;Expression</span> <span class="attribute-name">bRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ctrName</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">op</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">=</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">DE</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
          <span class="tag">&lt;Expression</span> <span class="attribute-name">bRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ctrName</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">op</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">like</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">A%</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">escape</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">\\</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;/Or&gt;</span>
        <span class="tag">&lt;And&gt;</span>
          <span class="tag">&lt;Expression</span> <span class="attribute-name">bRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">yr</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">op</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">=</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">2010</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
          <span class="tag">&lt;Expression</span> <span class="attribute-name">bRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">cw</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">op</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">=</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;/And&gt;</span>
      <span class="tag">&lt;/And&gt;</span>
    <span class="tag">&lt;/Filter&gt;</span>
    <span class="tag">&lt;Grouping&gt;</span>
      <span class="tag">&lt;C</span> <span class="attribute-name">bRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ctrName</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;C</span> <span class="attribute-name">bRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">mo</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/Grouping&gt;</span>
    <span class="tag">&lt;Ordering&gt;</span>
      <span class="tag">&lt;C</span> <span class="attribute-name">bRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ctrName</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">order</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">desc</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/Ordering&gt;</span>
  <span class="tag">&lt;/Select&gt;</span>
<span class="tag">&lt;/WrsRequest&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_filter_format">Filter format</h4>
<div class="paragraph">
<p>Requests and per the output of choosers becoming filters follow BCD-UI&#8217;s filter format.
Filter conditions can be nested and are evaluated canonically.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;Filter</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.businesscode.de/schema/bcdui/filter-1.0.0</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;And&gt;</span>
    <span class="tag">&lt;Expression</span> <span class="attribute-name">bRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">val</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">op</span>=<span class="string"><span class="delimiter">&quot;</span><span class="entity">&amp;gt;</span><span class="content">=</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1000</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;Expression</span> <span class="attribute-name">bRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">val</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">op</span>=<span class="string"><span class="delimiter">&quot;</span><span class="entity">&amp;lt;</span><span class="content">=</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">2000</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
  <span class="tag">&lt;/And&gt;</span>
  <span class="tag">&lt;And&gt;</span>
    <span class="tag">&lt;Or&gt;</span>
      <span class="tag">&lt;Expression</span> <span class="attribute-name">bRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ctrName</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">op</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">=</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="comment">&lt;!-- No value means null, this filter means &quot;is null&quot; --&gt;</span>
      <span class="tag">&lt;Expression</span> <span class="attribute-name">bRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ctrName</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">op</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">like</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">A%</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">escape</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">\\</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/Or&gt;</span>
    <span class="tag">&lt;And&gt;</span>
      <span class="tag">&lt;Expression</span> <span class="attribute-name">bRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">yr</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">op</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">=</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">2010</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;Expression</span> <span class="attribute-name">bRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">cw</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">op</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">in</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1,2,3</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/And&gt;</span>
  <span class="tag">&lt;/And&gt;</span>
<span class="tag">&lt;/Filter&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Above leads to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">(val&gt;=? AND val &lt;=?) AND (ctrName IS NULL OR ctrName like ? ESCAPE ?) AND (yr=? AND cw IN (?,?,?)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that prepared statements are used for security and performance reasons.
Between operator is not available, please use &#8230;&#8203; &lt;= &#8230;&#8203; AND &#8230;&#8203; &gt;= &#8230;&#8203; instead.</p>
</div>
</div>
<div class="sect3">
<h4 id="_faults">Faults</h4>
<div class="paragraph">
<p>The server responses technical errors via SOAP 1.2 fault</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;Envelope</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2003/05/soap-envelope</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:bcd</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.businesscode.de/schema/bcdui/wrs-1.0.0</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;Fault&gt;</span>
    <span class="tag">&lt;Code&gt;</span>
      <span class="tag">&lt;Value&gt;</span>Sender<span class="tag">&lt;/Value&gt;</span>
    <span class="tag">&lt;/Code&gt;</span>
    <span class="tag">&lt;Subcode&gt;</span>
      <span class="tag">&lt;Value&gt;</span>sqlsoapfaultcode:InvalidXml<span class="tag">&lt;/Value&gt;</span>
    <span class="tag">&lt;/Subcode&gt;</span>
    <span class="tag">&lt;Reason&gt;</span>
      <span class="tag">&lt;Text</span> <span class="attribute-name">xml:lang</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">en-US</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>An error occurred, DB down<span class="tag">&lt;/Text&gt;</span>
    <span class="tag">&lt;/Reason&gt;</span>
    <span class="tag">&lt;Body&gt;</span>
      <span class="tag">&lt;bcd:WrsRequest&gt;</span>...<span class="tag">&lt;/bcd:WrsRequest&gt;</span>
      <span class="tag">&lt;bcd:Url&gt;</span>original URL<span class="tag">&lt;/bcd:Url&gt;</span>
      <span class="tag">&lt;bcd:more_info_in_XML_like_stacktrace_in_debug_case</span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/Body&gt;</span>
  <span class="tag">&lt;/Fault&gt;</span>
<span class="tag">&lt;/Envelope&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_cell_addressing">18.2. Cell addressing</h3>
<div class="paragraph">
<p>Identifying the right column can be done via its hard-coded position in an XPath</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="comment">/*/wrs:Data/wrs:R[1]/wrs:C[2]
</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This is easy but also easily breaks and is hard to read.
Thus, it is better to identify a column via its logical name 'CP_DESC', this will work in an XPath outside and inside of XSLT:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="comment">/*/wrs:Data/wrs:R[1]/wrs:C[number(/*/</span>wrs:Header/wrs:Columns/wrs:C[<span class="error">@</span>bRef=<span class="string"><span class="delimiter">'</span><span class="content">CP_DESC</span><span class="delimiter">'</span></span>]/<span class="error">@</span>pos)]/text()</code></pre>
</div>
</div>
<div class="paragraph">
<p>In an XSLT, a key can help to do this even faster and easier with the help of keys:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;xsl:stylesheet</span> <span class="attribute-name">xmlns:xsl</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/1999/XSL/Transform</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:wrs</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.businesscode.de/schema/bcdui/wrs-1.0.0</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">version</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1.0</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;xsl:key</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">colHeadById</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">match</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/*/wrs:Header/wrs:Columns/wrs:C</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">use</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">@id</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
  <span class="tag">&lt;xsl:template</span> <span class="attribute-name">match</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;xsl:value-of</span> <span class="attribute-name">select</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/*/wrs:Data/wrs:R[1]/wrs:C[number(key('colHeadById','CP_DESC')/@pos)]</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
  <span class="tag">&lt;/xsl:template&gt;</span>
<span class="tag">&lt;/xsl:stylesheet&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_xsd_schema_2">18.3. XSD Schema</h3>
<div class="sect3">
<h4 id="_details_2">Details</h4>
<div class="imageblock">
<div class="content">
<img src="images/xmlData_wrsSchema.png" alt="xmlData wrsSchema">
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="DocFilter">19. Servlets / Filters</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_6">19.1. Overview</h3>
<div class="sect3">
<h4 id="_bcd_ui_filters_and_servlets">BCD-UI Filters and Servlets</h4>
<div class="paragraph">
<p>BCD-UI comes with the following filters and servlets, which are already mapped to their places in the default web.xml of BCD-UI:</p>
</div>
<div class="paragraph">
<p>These the only servlets which the user of BCD-UI uses or configures directly under normal circumstances.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">WrsServlet</dt>
<dd>
<p>Serves data in the form of a <a href="#DocXmlData">Wrs web row set</a> as reponse to a webrow set request.
It is mapped twice to allow parts to be client side cached and other not to be cached.
This is the only servlet used directly by non-BCD-UI library code.
Maps to bcdui/servlets/wrsServlet and bcdui/servletsCached/WrsServlet.</p>
</dd>
<dt class="hdlist1">ClientCachingFilter</dt>
<dd>
<p>Allows to control <a href="#DocCaching">client-side caching</a>.
Can be instantiated multiple times to allow different caching starategies for different parts.
It is recommended to map to all static resources and to slow changing reference data served for example at bcdui/servletsCached/wrsServlet.
Maps to parts to be cached as per project need.</p>
</dd>
</dl>
</div>
<div class="sect4">
<h5 id="_backgound_servlets_and_filters">Backgound servlets and filters</h5>
<div class="paragraph">
<p>The following servlets do their work in background. Users of BCD-UI usually do not get in direct contact with them</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">RequestLiveCycleFilter</dt>
<dd>
<p>Manages livecycle of BCD-UI server objects. Maps to the full application.</p>
</dd>
<dt class="hdlist1">StaticResourceServlet</dt>
<dd>
<p>Severs static resources like js or img files from the library which are packaged in bcd.jar.
They are mapped to there logical places and appear to be located at WebContent/bcdui.
Maps to bcd-ui library parts.</p>
</dd>
<dt class="hdlist1">BCDUIConfig</dt>
<dd>
<p>Serves initial configuration information for BCD-UI frontend library.
Maps to bcdui/servlets/config.js.</p>
</dd>
<dt class="hdlist1">ZipLet</dt>
<dd>
<p>Allows the library a more efficient data exchange between client and server and prevents URLs becoming too long.
Maps to bcdui/servlets/ZipLet.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="DocVfs">20. Virtual File System (VFS)</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_virtual_file_system_vfs">20.1. Virtual File System (VFS)</h3>
<div class="paragraph">
<p>The Virtual File System (VFS) allows you to store resources in the database and make them available like real physical resources.</p>
</div>
<div class="paragraph">
<p>As an example you can take the cube template editor. It makes use of the VFS. The report layout is stored in the database as an XML file which can be
accessed at runtime via the path "/vfs/reports/myTestCube/layouts.xml".
You can even store, modify, reload <a href="#DocBinding">binding files</a> in the database. They will have a higher priority than static ones with the same id.</p>
</div>
<div class="sect3">
<h4 id="_vfs_setup">VFS Setup</h4>
<div class="paragraph">
<p>For the virtual file system you need a database table and a corresponding binding set with the well known id "bcd_virtualFileSystem",
see <a href="https://github.com/businesscode/BCD-UI/blob/master/Server/wellKnownBindingSets/bcd_virtualFileSystem.xml" target="_blank" rel="noopener">bcd_virtualFileSystem.xml</a></p>
</div>
<div class="paragraph">
<p>The columns in detail:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">path</dt>
<dd>
<p>The path under which the stored data is available. For example: "/vfs/reports/MyReport/MyReportLayouts.xml"</p>
</dd>
<dt class="hdlist1">resourceClob</dt>
<dd>
<p>A clob object holding the data. For example (cube template):</p>
</dd>
<dt class="hdlist1">resourceBlob</dt>
<dd>
<p>A blob object holding the data.</p>
</dd>
<dt class="hdlist1">isServer</dt>
<dd>
<p>A 0/1 value specifying is the data is a server-only (= 1) resource and won&#8217;t be available on client side.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_vfs_reading_writing_refreshing_and_vfs_bindings">VFS reading, writing, refreshing and VFS Bindings</h4>
<div class="paragraph">
<p>As mentioned, data from the VRS is accessible via the given path.
So you can e.g. create a model out of the stored data like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="keyword">new</span> bcdui.core.SimpleModel({<span class="key">url</span>: bcdui.contextPath + <span class="string"><span class="delimiter">'</span><span class="content">/vfs/reports/myTestCube/layouts.xml</span><span class="delimiter">'</span></span>})</code></pre>
</div>
</div>
<div class="paragraph">
<p>Writing can be achieved by sending a wrs request to the server, e.g. with the help of an automodel.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript"><span class="keyword">var</span> vfs = <span class="keyword">new</span> bcdui.core.AutoModel({<span class="key">bindingSetId</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">bcd_virtualFileSystem</span><span class="delimiter">&quot;</span></span>, <span class="key">bRefs</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">path resourceClob</span><span class="delimiter">&quot;</span></span> });
vfs.execute();
<span class="comment">/* now modify your path in that model (/*/</span>wrs:Data/wrs:R/wrs:C[<span class="integer">1</span>]) and resourceClob (<span class="comment">/*/wrs:Data/wrs:R/wrs:C[2]) */</span>
<span class="comment">/* and store it back via sendData*/</span>
vfs.sendData();</code></pre>
</div>
</div>
<div class="paragraph">
<p>After writing data to the VFS you might need to refresh the cache to make the changes active.
You can do this by calling the CacheManager servlet with an action parameter:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">jQuery.ajax({
  <span class="key">method</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">GET</span><span class="delimiter">&quot;</span></span>,
  <span class="key">url</span> : bcdui.contextPath+ <span class="string"><span class="delimiter">&quot;</span><span class="content">/bcdui/servlets/CacheManager?action=refreshVFS</span><span class="delimiter">&quot;</span></span>,
  <span class="function">success</span> : <span class="keyword">function</span> (data, successCode, jqXHR) { <span class="comment">/* do something */</span> }
});</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Available action values are: refreshVFS</dt>
<dd>
<p>clears the VFS cache.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="DocDebug">21. Debugging</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_debug_facilities">21.1. Debug facilities</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">Unzip gui status</dt>
<dd>
<p>To see the guiStatus used in requests in their uncompressed form, send it as  <code>data</code>  parameter to zipLet, for example  <code><a href="http://localhost:8080/webApp/bcdui/servlets/ZipLet?data=z2e-f7xPr3FQumlE&#8230;&#8203" class="bare">http://localhost:8080/webApp/bcdui/servlets/ZipLet?data=z2e-f7xPr3FQumlE&#8230;&#8203</a>;</code></p>
</dd>
<dt class="hdlist1">Monitor network traffic</dt>
<dd>
<p>Eclipse "TCP/IP Monitor" view as well as <a href="http://www.fiddler2.com/fiddler2" target="_blank" rel="noopener">Fiddler</a> can server as proxies to monitor network traffic exchanged between browser and server.</p>
</dd>
<dt class="hdlist1">Server side logging</dt>
<dd>
<p>log4j.propertes file in call path allows fine grained control of server side logging. Per default this is found in the /src/java folders of the template applications.</p>
</dd>
<dt class="hdlist1">Endless waiting renderers</dt>
<dd>
<p>use  <code>bcdui.factory.objectRegistry.getWaitingIds()</code>  to detect ids of renderer/wrapper, waiting for yet non-exisiting ids.</p>
</dd>
<dt class="hdlist1">Find out which BindingItems a binding set has</dt>
<dd>
<p>de.businesscode.bcdui.binding.Bindings.getInstance().get("b4_bsg_tte", java.util.Arrays.asList("cage_dy"))</p>
</dd>
<dt class="hdlist1">And to read information about a specific one</dt>
<dd>
<p>de.businesscode.bcdui.binding.Bindings.getInstance().get("b4_bsg_tte", java.util.Arrays.asList("cage_dy")).get("cage_dy").getJDBCDataTypeName()</p>
</dd>
<dt class="hdlist1">Use the browser developer console to examine client issues</dt>
<dd>
<p>Most modern browser have a console, where you can execute issue JavaScript commands to examine object status</p>
</dd>
<dt class="hdlist1">Use request parameter debug=true</dt>
<dd>
<p>The debug request parameter makes the application more picky about JavaScript parameters and turns on client logging that might help.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_common_error_messages">21.2. Common error messages</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">ERROR - Internal stylesheet error. this['node-set']= function (x) { return x; } 0 0 Unzip gui status</dt>
<dd>
<p>This error message occurs if an import of a stylesheet fails inside of an stylesheet. The nodeset function is usually the first
line after the include statement</p>
</dd>
<dt class="hdlist1">IE: An Invalid character was found in text content. Or: Switch from current encoding to specified encoding not supported.</dt>
<dd>
<p>Falsches encoding im xsl:output</p>
</dd>
<dt class="hdlist1">FF: XSLT error codes (note, in general in IE the XSLT errors are much easier to debug)</dt>
<dd>
<p><a href="https://developer.mozilla.org/en/Table_Of_Errors#XSLT_Errors" target="_blank" rel="noopener">FF XSLT error codes</a></p>
</dd>
<dt class="hdlist1">IE: stack overflow at line: 0</dt>
<dd>
<p>Is often related to an IE caching issue, in many cases it goes away with caching being enabled.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="DocBootstrap">22. Bootstrap</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter guides you through the steps of initially setting up your development environment for BCD-UI.</p>
</div>
<div class="sect2">
<h3 id="_get_the_tools">22.1. Get the tools</h3>
<div class="paragraph">
<p>To start development with BCD-UI, first get the tools:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Make sure you have JDK 11 or higher</p>
</li>
<li>
<p>Install an IDE of your preference, we assume Eclipse in our samples.</p>
</li>
<li>
<p>Install a Jakarta EE web server like Oracle WebLogic, IBM Websphere or JBoss, we assume Tomcat 8.5 in our examples</p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
For performance reasons you should allow compression for static resources.<br>
For Tomcat adjust in server.xml,
see <a href="https://github.com/businesscode/BCD-UI/blob/master/Server/configFiles/tomcat/server.xml" target="_blank" rel="noopener">BCD-UI/Server/configFiles/tomcat/server.xml</a>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_xml_schema_xsd_catalog">22.2. XML schema xsd catalog</h3>
<div class="paragraph">
<p>Adding the XML schema catalog of BCD-UI to your workspace will support you in creating XML configuration files for BCD-UI
by linking to <code><a href="https://businesscode.github.io/BCD-UI-Docu/xsd/bcduiCatalog.xml" class="bare">https://businesscode.github.io/BCD-UI-Docu/xsd/bcduiCatalog.xml</a></code></p>
</div>
<div class="paragraph">
<p>For Tomcat, follow these steps:</p>
</div>
<div class="paragraph">
<p><span class="menuseq"><b class="menu">File</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="submenu">Window</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="submenu">Preferences</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="submenu">XML</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="submenu">XML Catalog</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="submenu">Add&#8230;&#8203;</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">Next Catalog</b></span></p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/bootstrap_xmlCatalog.png" alt="bootstrap xmlCatalog">
</div>
</div>
<div class="paragraph">
<p>will bring you:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/bootstrap_xmlSupport.png" alt="bootstrap xmlSupport">
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="DocAppsetup">23. Application Setup</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A BCD-UI application is a regular Jakarta EE application. These steps are show how to add BCD-UI to an existing web application project.</p>
</div>
<div class="paragraph">
<p>There are many good tutorials for each IDE on how to set up a web application, for Eclipse you could follow <a href="https://medium.com/@zandra.harner/setting-up-the-develop-environment-for-lop-a-web-application-in-eclipse-ide-7f3a36eddf60">this</a> one on Medium.</p>
</div>
<div class="paragraph">
<p>We suggest to, before adding BCD-UI to it, test your web application without BCD-UI. Open a page, maybe call a test Servlet. If your application runs without BCD-UI then it will also run with BCD-UI.</p>
</div>
<div class="sect2">
<h3 id="_adding_bcd_ui">23.1. Adding BCD-UI</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add BCD-UI jars<br>
See <a href="https://github.com/businesscode/maven-repo" class="bare">https://github.com/businesscode/maven-repo</a> for maven and gradle.</p>
<div class="listingblock">
<div class="title">For example for gradle add</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="gradle">dependencies {
  repositories {
    mavenCentral()
    maven {
      url &quot;https://github.com/businesscode/maven-repo/raw/master&quot;
    }
    implementation 'de.businesscode.bcdui:bcd-ui-core:5.5.0-SNAPSHOT'
    implementation 'de.businesscode.bcdui:bcd-ui-theme-bcd:5.5.0-SNAPSHOT'
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you prefer you may also download the BCD-UI&#8217;s jars and their dependencies mentioned in <a href="https://github.com/businesscode/BCD-UI/blob/master/Docu/development/bcdui_dependencies.gradle">BCD-UI/Docu/development/bcdui_dependencies.gradle</a> and put them into WEB-INF/lib.<br></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
These two jars not only hold all Java classes for the server but also all client side sources of BCD-UI like JavaScript and XSLT. BCD-UI makes sure they are served to the client along with your client side sources which are placed were you would usually place them.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Add Entries to web.xml<br>
To register BCD-UI&#8217;s servlets and filters, add the entries from <a href="https://github.com/businesscode/BCD-UI/blob/master/Server/configFiles/web.xml" target="_blank" rel="noopener">BCD-UI/Server/configFiles/web.xml</a> to your web.xml.<br>
When you upgrade to a new version of BCD-UI check in <a href="https://github.com/businesscode/BCD-UI/blob/master/Docu/releaseNotes.adoc">release notes</a> whether it changed.</p>
</li>
<li>
<p>Create an empty WEB-INF/bcdui/bindings<br>
All configuration files for BCD-UI are located at WEB-INF/bcdui. Create an empty <code>WEB-INF/bcdui/bindings</code> folder, later you&#8217;ll add <a href="#DocBinding">Bindings</a> here.</p>
</li>
<li>
<p>Add logging configuration<br>
Copy <a href="https://github.com/businesscode/BCD-UI/blob/master/Server/configFiles/log4j2.xml" target="_blank" rel="noopener">BCD-UI/Server/configFiles/log4j2.xml</a>
to your project&#8217;s src/main/resources folder.</p>
</li>
<li>
<p>Add entries for the database<br>
See <a href="https://github.com/businesscode/BCD-UI/blob/master/Server/configFiles/tomcat/context.xml">context.xml</a> for entries for several databases for Tomcat.<br>
The jndi entry</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"> <span class="tag">&lt;Environment</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcdui/defaultConnection</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">java.lang.String</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">jdbc/connectionXX</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>is important as it denotes the connection used of none is explicitly given in a BindingSet.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_bcd_ui_folder_layout">23.2. BCD-UI folder layout</h3>
<div class="paragraph">
<p>BCD-UI follows standard Java Web Application layout.<br>
One thing less common though is that the JavaScript and other static sources come with the 2 BCD-UI jars mentioned. So they are in these jars in WEB-INF/lib and not in your web content folder next to WEB-INF.<br>
StaticResourceServlet of BCD-UI assures that for the client it looks as if they were there though.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 9.0909%;">
<col style="width: 9.0909%;">
<col style="width: 9.0909%;">
<col style="width: 9.0909%;">
<col style="width: 18.1818%;">
<col style="width: 45.4546%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code>Project/</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Eclipse project</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>src/main/</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>java/</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Project java sources</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>resources/</code></p></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code>log4j.properties</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Logging settings</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code>WebContent/</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Webapp itself</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&#8230;&#8203;</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Project&#8217;s HTML pages, JaavaScript etc</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bcdui/</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>BCD-UI&#8217;s virtual main folder, blended here by a Servlet</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>js/</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>JS library mapped from bcd-ui-core.jar</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>xslt/</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>XSLT library mapped from bcd-ui-core.jar</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>theme/</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Themes library mapped from bcd-ui-theme.jar</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>servlets/</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>BCD-UI&#8217;s servlets are mapped here</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top" colspan="2"><p class="tableblock"><code>WEB-INF/</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bcdui/</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Configuration for BCD-UI</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bindings/</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Project&#8217;s BCD-UI BindingSets are put here</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lib/</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>&#8230;&#8203;</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>3rd party and project libs</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bcd-ui-core.jar</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Java classes and static sources (js,xslt) mapped to /bcdui</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bcd-ui-theme.jar</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Themes, mapped to /bcdui/theme at runtime</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>web.xml</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Contains some BCD-UI library related entries</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top" colspan="3"><p class="tableblock"><code>META-INF/context.xml</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Containing JDBC database connections</strong></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="DocGradle">24. Use Gradle to set up a BCD-UI project</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_7">24.1. Overview</h3>
<div class="paragraph">
<p>This section it about building a simple BCD-UI project with <a href="https://gradle.org/" target="_blank" rel="noopener">gradle</a>.
All libraries required are
specified as dependencies and it is therefore easy to get the application setup.</p>
</div>
<div class="paragraph">
<p>The following steps are necessary in general:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add gradle.build to the project</p>
</li>
<li>
<p>Configure gradle support for the project</p>
</li>
<li>
<p>Refresh dependencies</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_step_by_step_4">24.2. Step by Step</h3>
<div class="sect3">
<h4 id="_gradle_plugin">Gradle plugin</h4>
<div class="paragraph">
<p>IDEA and eclipse come with gradle already. When using VC Code, install gradle and use it from command line.</p>
</div>
</div>
<div class="sect3">
<h4 id="_add_gradle_build_to_the_project">Add Gradle.build to the project</h4>
<div class="paragraph">
<p>Create a build.gradle file in the root directory of your project.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">apply plugin: <span class="string"><span class="delimiter">&quot;</span><span class="content">java</span><span class="delimiter">&quot;</span></span>
apply plugin: <span class="string"><span class="delimiter">&quot;</span><span class="content">war</span><span class="delimiter">&quot;</span></span>


webAppDirName = <span class="string"><span class="delimiter">&quot;</span><span class="content">WebContent</span><span class="delimiter">&quot;</span></span>

war {
  baseName   = <span class="string"><span class="delimiter">&quot;</span><span class="content">GettingStarted</span><span class="delimiter">&quot;</span></span>
  includeEmptyDirs = <span class="predefined-constant">false</span>
}
dependencies {
  repositories {
    mavenCentral()
dependencies {
  repositories {
    mavenCentral()
    maven {
      url <span class="string"><span class="delimiter">&quot;</span><span class="content">https://github.com/businesscode/maven-repo/raw/master</span><span class="delimiter">&quot;</span></span>
    }
    implementation <span class="string"><span class="delimiter">'</span><span class="content">de.businesscode.bcdui:bcd-ui-core:5.5.0-SNAPSHOT</span><span class="delimiter">'</span></span>
    implementation <span class="string"><span class="delimiter">'</span><span class="content">de.businesscode.bcdui:bcd-ui-theme-bcd:5.5.0-SNAPSHOT</span><span class="delimiter">'</span></span>
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_configure_gradle_support_for_the_project">Configure Gradle support for the project</h4>
<div class="paragraph">
<p>Before we can use the gradle file within eclipse, we have to add the "Gradle Nature" to the GettingStarted project. So select the project,
open the context menu and choose <span class="menuseq"><b class="menu">Configure</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">Add Gradle Nature</b></span>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_refresh_dependencies">Refresh dependencies</h4>
<div class="paragraph">
<p>Afterwards the context menu has a new entry for gradle. Use it to refresh the project.
This might take some time, because all libraries specified
by the dependencies above will be loaded.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/gradle_gradle_refresh_project.png" alt="gradle gradle refresh project">
</div>
</div>
<div class="paragraph">
<p>After gradle refresh, the project has its dependencies, and these can be found in the project tree as shown in the following image.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/gradle_references.png" alt="gradle references">
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="DocGeneralFeatures">25. General Features</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_general_features">25.1. General Features</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">Bookmark feature</dt>
<dd>
<p>Each page together with its settings like filter choosers or which parts are opened or hided can be bookmarked.
Such a bookmark can be used as the starting point to enter the application and as a quick navigation link including
previous settings.
Additionally the link can be passed to others in case they have sufficient rights to enter the page.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_transactions_and_connection_pooling">25.2. Transactions and connection pooling</h3>
<div class="paragraph">
<p>Per default each request is associated with a transaction.
Each server activity retrieves its connection from the request object, providing the data source name.
All activities within the same request get the same connection when retrieving it from the request.
The first database access in a request starts the transaction and the request finishes transaction with commit unless
a ServletException is uncatched or a SOAPFault is returned, in this case a roll-back is executed.
Still, each step may itself decide to commit or rollback its work.</p>
</div>
<div class="paragraph">
<p>In case the client wants multiple writes to become part of one database transaction, it will a multi-WRS document.</p>
</div>
</div>
<div class="sect2">
<h3 id="_xml_inclusion">25.3. XML Inclusion</h3>
<div class="paragraph">
<p>The BCD-UI library makes use of XML inclusion to support some advanced XML features. These includes
are allowed in XML files read on the server and also on the client. The main reasons to use XML
inclusion are as follows:</p>
</div>
<div class="sect3">
<h4 id="_use_cases">Use cases</h4>
<div class="dlist">
<dl>
<dt class="hdlist1">Reusing XML parts in different documents</dt>
<dd>
<p>XML inclusion is especially useful is some XML documents share common content.
Then this content can be put to a separate XML file. This use case is often applied in Binding
files when two binding files have the same column names (e.g. for common dimension columns like
period or geography).</p>
</dd>
<dt class="hdlist1">Merge different XML data sources</dt>
<dd>
<p>Some XML documents require information from other sources (like reference data in grids)
which can be implemented by defining a master document containing inclusions of other referenced
documents.</p>
</dd>
<dt class="hdlist1">Lazy loading</dt>
<dd>
<p>BCD-UI offers a special kind of include (bcdxml:include) for the client. This bcdxml:include
can be evaluated on demand rather that resolving it immediately on loading. It is the basis
for most lazy loading mechanism on the client.</p>
</dd>
<dt class="hdlist1">Structuring large documents</dt>
<dd>
<p>It can be useful to split very large XML documents into parts to make them more
readable.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_implementation_2">Implementation</h4>
<div class="paragraph">
<p>There are three kinds of XML inclusion supported by BCD-UI:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">XInclude without any XPointer</dt>
<dd>
<p>This basic xinclude type is available on the server and on the client. These includes
are replaced with the whole document available on the specified href.
Example:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;xi:include</span> <span class="attribute-name">xmlns:xi</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/XInclude</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:xsi</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/XMLSchema-instance</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">myDoc.xml</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span></code></pre>
</div>
</div>
</dd>
<dt class="hdlist1">XInclude with XPointer element() Scheme</dt>
<dd>
<p>This xinclude is also available on the server and client and it offers the selection
of one single XML element to be included.
Example:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;xi:include</span> <span class="attribute-name">xmlns:xi</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/XInclude</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:xsi</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/XMLSchema-instance</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">myDoc.xml</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xpointer</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">element(/1/2)</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span></code></pre>
</div>
</div>
</dd>
<dt class="hdlist1">XInclude with XPointer xpointer() Scheme</dt>
<dd>
<p>The BCD-UI client processor also supports xincludes with a limited set of the xpointer()
Scheme. It supports all XPointers corresponding to one single XPath. With this XPath the
target document is then filtered before it is inserted at the xinclude.
Example:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;xi:include</span> <span class="attribute-name">xmlns:xi</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/XInclude</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:xsi</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/XMLSchema-instance</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">myDoc.xml</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xpointer</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">xpointer(/*/Country[. = 'DE']/City)</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span></code></pre>
</div>
</div>
</dd>
<dt class="hdlist1">bcdxml:include</dt>
<dd>
<p>Another client-only feature is the bcdxml:include. This is an extension to the standard
XInclude in that it supports two additional features:
It can contain a request document inside its body. If this is present it is compressed and then appended to the href.
Example:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;bcdxml:include</span> <span class="attribute-name">xmlns:bcdxml</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.businesscode.de/schema/bcdui/bcdxml-1.0.0</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:xsi</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/XMLSchema-instance</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">myDoc.xml</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xpointer</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">xpointer(/*/*)</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Example with nested status document:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;bcdxml:include</span> <span class="attribute-name">xmlns:bcdxml</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.businesscode.de/schema/bcdui/bcdxml-1.0.0</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">xmlns:xsi</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/XMLSchema-instance</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">href</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">myDoc.xml</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;Status</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.businesscode.de/schema/bcdui/guiStatus-1.0.0</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;Filter</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.businesscode.de/schema/bcdui/filter-1.0.0</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;And</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">period</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;Expression</span> <span class="attribute-name">bRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">dy</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">op</span>=<span class="string"><span class="delimiter">&quot;</span><span class="entity">&amp;gt;</span><span class="content">=</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">2010-01-01</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;Expression</span> <span class="attribute-name">bRef</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">dy</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">op</span>=<span class="string"><span class="delimiter">&quot;</span><span class="entity">&amp;lt;</span><span class="content">=</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">2010-12-31</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;/And&gt;</span>
    <span class="tag">&lt;/Filter&gt;</span>
  <span class="tag">&lt;/Status&gt;</span>
<span class="tag">&lt;/bcdxml:include&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>TODO: verify</p>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="DocCompatibility">26. Compatibility</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_compatibility">26.1. Compatibility</h3>
<div class="paragraph">
<p>As of 2017 BCD-UI works without modifications within the following environments</p>
</div>
<div class="ulist">
<div class="title">Server</div>
<ul>
<li>
<p>JDK 8+ (= and later versions)</p>
</li>
<li>
<p>Application Server: Tomcat 7.0.63+, other servers please contact BusinessCode</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Browser</div>
<ul>
<li>
<p>Internet Explorer 11, previous versions on request</p>
</li>
<li>
<p>Edge please contact BusinessCode</p>
</li>
<li>
<p>Recent Firefox, Safari and Chrome</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Database</div>
<ul>
<li>
<p>Oracle 9i and up including Oracle 10g ExpressEdition</p>
</li>
<li>
<p>Postgres 9.2+</p>
</li>
<li>
<p>SQLServer 2016+</p>
</li>
<li>
<p>Teradata 10+ in EnterpriseEdition</p>
</li>
<li>
<p>MySQL with limitations, please contact BusinessCode</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">It makes use of current versions of technologies and specs</div>
<ul>
<li>
<p>JavaEE web profile, JDBC, Servlet, JSP and JAXB</p>
</li>
<li>
<p>ECMA/JS, DHTML, CSS, HTML and JSON</p>
</li>
<li>
<p>SVG and VML</p>
</li>
<li>
<p>XML, XSLT and XSD</p>
</li>
<li>
<p>Ajax, webservices and XForms architecture, EXSLT</p>
</li>
<li>
<p>Apache commons, jQuery and various other open source libraries</p>
</li>
<li>
<p>Gradle, Eclipse and IntelliJ IDEA, git</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_known_browser_incompatibilites">26.2. Known browser incompatibilites</h3>
<div class="ulist">
<ul>
<li>
<p>favicon.ico is picked up by FireFox when found in webapp root, ie does not do this</p>
</li>
<li>
<p>IE does not allow to set name attribute via DOM (helper function in corePackage.js)</p>
</li>
<li>
<p>FireFox throws exception when writing &lt;input&gt;text&lt;/input&gt;, this is in sync with the specs</p>
</li>
<li>
<p>IE ignores overflow when filter is set in css</p>
</li>
<li>
<p>IE: innerHTML (used by renderer) for &lt;script&gt; and &lt;style&gt; tags require both to start with a scoped element, like  <code>&lt;input type="hidden"/&gt;&lt;script defer="false"&#8230;&#8203;</code>  and the script tag in addition requires a defer="false" attribute</p>
</li>
<li>
<p>IE has a maximum URL length of 2083 bytes, others do not. When copying URLs from other browsers, they may be less compressed (because it was not necessary), so they may be too long.</p>
</li>
<li>
<p>FireFox: the bookmarks created with the bookmark tag open in a sidebar window by default, unless the bookmark property is adjusted manually by the user or if the bookmark is opened in a new tag</p>
</li>
<li>
<p>Chrome/WebKit: don&#8217;t support bookmark via JavaScript at all</p>
</li>
<li>
<p>IE seems to handle position() in xsl:key/@match expressions wrong. Sample: match="/*/Something[@pos&gt;3][position()&lt;2]". It will find an empty list instead of a lost with two elements.</p>
</li>
<li>
<p>Due to a well-known bug in FireFox (at-least 10-24), you need to enable 3rd-party cookies or better add an exception for a webpage with BCD-UI. This flag is per default off ("disabled") since version 22.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_working_with_webkit_browsers">26.3. Working with webkit browsers</h3>
<div class="paragraph">
<p>Webkit browsers like Safari, Chrome and Opera compatibility requires the following to be taken into account</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Declare all namespaces used by XSLT, since documents addressed via document() and xsl:import are included in the host XSLT and
elements with undeclared namespaces inherit the default namepace of the (possibly generated) host XSLT</p>
</li>
<li>
<p>When using createElementWithPrototype or similar, always work with an explicit namespace, do not use the empty namespace.</p>
</li>
<li>
<p>xsl:include is not supported (use xsl:import instead)</p>
</li>
<li>
<p>xsl:apply-imports is not supported. (normally xsl:apply-templates will be sufficient)</p>
</li>
<li>
<p>Do not use msxml:node-set(), declare and use exslt:node-set() even for IE.</p>
</li>
<li>
<p>When generating XSLT with the help of XSLT, use 'generateXSLT' as the generation mode</p>
</li>
<li>
<p>When generating XSLT and matching on an input template XSLT, be aware that those elements do not have xsl as namespace
because they are embedded, use select="*[local-name()='output']" and so on instead.
Also do not copy such elements into the output as they would keep the non-xsl namespace,
create these elements with &lt;xsl:element name="output" namespace="http://www.w3.org/1999/XSL/Transform"/&gt; instead</p>
</li>
<li>
<p>For webkit it is not allowed to use variables in template match attributes, like &lt;xsl:template match="*[@attr=$myVar/Values]"&gt;..</p>
</li>
<li>
<p>When a node is provided to the XSLT processor as input, that node becomes the document root, for Gecko and IE "/" remains the root.</p>
</li>
<li>
<p>Mix of constant strings and AVT (Attribute Value Template) is not allowed. So use attr="{concat('abc ', $var)}" instead ofattr="abc {$var}" for webkit."</p>
</li>
<li>
<p>For Webkit the imports are resolved by BCD-UI. This is done by including the imported stylesheet leaving out templates with the same
@match/@name and @mode values for which already a template in the importing stylesheet exists.
But since the others are included then an imported template with match="ns:E[@a]" will win over a template with match="ns:E" existing in the
importing stylesheet. This will let Webkit behave differently than other browsers. Make sure to prevent this situation by defining
exact matching templates in the importing stylesheet.</p>
</li>
<li>
<p>It is much faster if in wrs:C[indexExpr] indexExpr is a plain number (a variable holding a number) than an expression. Move such an expression to a helper variable.</p>
</li>
<li>
<p>Large documents slow Webkit down. Only provide the part of large documents, if possible.
Use xsl:stylesheet/@bcdxml:wrsHeaderIsEnough to minimize the input for example for generating stylesheets only needed the header.</p>
</li>
<li>
<p>All known namespace declarations are repeated on the highest node of each subtree of explicitly written elements.
For example &lt;wrs:C/&gt; will hold all such namespace-nodes if all elements above are created via xsl:element or xsl:copy.
As a workaround, write the root node (in this case wrs:Wrs) also explicitly &lt;wrs:Wrs&gt;&#8230;&#8203;&lt;/wrs:Wrs&gt;, then this is the highest and they will ony
appear once. Because Webkit is sensitive against documents with a large serialization representation this improves performance.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="DocConfiguration">27. Configuration</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_configuration_overview">27.1. Configuration overview</h3>
<div class="paragraph">
<p>BCD-UI obtains its configuration from the parameters from JNDI context (as specifided by servlet container) for the backend-part
and provides client configuration parameters for the client part. The de.businesscode.bcdui.toolbox.Configuration is the API to retrieve
that configuration. Additionally the Configuration class maintains de.businesscode.bcdui.toolbox.config.DbProperties instance for
well-known scopes: server and client allowing dynamic configuration.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">'server' scope</dt>
<dd>
<p>are JNDI defined parameters, additionally parameters from database (DbProperties) with scope "server", DbProperties parameters
have precedence over JDNI defined parameters. Please always define a TYPE for this scope and stick to same type as originally
defined in context.xml when overriding parameters.</p>
</dd>
<dt class="hdlist1">'client' scope</dt>
<dd>
<p>The only way to enable configuration to be set to client is to enable DbProperties, the client parameters are held in "client" scope.
These properties are emitted by the BCDUIConfig servlet and exposed into bcdui.config JS object. The TYPE for client-scope property is NOT evaluated,
and the property value is ALWAYS exposed as a String, hence the value must not be quoted.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_dbproperties_setup">27.2. DbProperties setup</h3>
<div class="paragraph">
<p>Setting up the DbProperties to be transparently reflected by the de.businesscode.bcdui.toolbox.Configuration API is a matter
of exposing the "bcd_db_properties" BindingSet. Configuration class will auto-detect this BindingSet upon initialization and if found, will
initialize the DbProperties instance. DbProperties may refresh the configuration from Database asynchronously every period given to
refresh or the refresh can be controlled programmatically. This class is NOT a singleton so may be reused in projects, it takes a
BindingSet of kind "bcd_db_properties" to initialize. The Configuration class yields an instance of DbProperties stuck to wellknown
BindingSet "bcd_db_properties".</p>
</div>
<div class="paragraph">
<p>Default configuration apply:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;Environment</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">bcdui/config/dbProperties/reloadFrequencySeconds</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">java.lang.Integer</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">30</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>the bcd_db_properties table has following column definition:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SCOPE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">this is a scope for this parameter. When working with de.businesscode.bcdui.toolbox.Configuration, the&#8217;re two well defined scopes: server, client.
While the server scope parameters are accessible through:</p>
<p class="tableblock">* de.businesscode.bcdui.toolbox.Configuration.getConfigurationParameter(String)
* de.businesscode.bcdui.toolbox.Configuration.getConfigurationParameter(String, T)
* de.businesscode.bcdui.toolbox.Configuration.getConfigurationParameterOrNull(String id)</p>
<p class="tableblock">the client scope parameters can be retrieved via de.businesscode.bcdui.toolbox.Configuration.getClientParameters(),
those are also exposed to the client and available in the bcdui.config JS object.</p>
<p class="tableblock">The TYPE is obligatory for the parameter in server scope, while for client scope parameters the TYPE is ignored and the
value is always exposed as a string.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">NAME</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parameter name. This is unique to the scope. For server scope the parameter names should follow JNDI naming convention like
the parameters defined in context.xml, because those parameters are merged while parameters from database overwrite those
defined statically. Pay attention to the TYPE here, as it has to be same as defined in context.xml</p>
<p class="tableblock">For client scope you may take any name adhering to JS veriable name syntax, so dots, spaces etc are not allowed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TYPE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The type of a parameter value. While client-scope parameters do not have typed values (the value is always exposed as a string),
server scope parameters values are parsed into given type (which is a fully qualified class name). The value evaluation happens
via reflection API and the only method target class has to expose is a static valueOf(String value) method.</p>
<p class="tableblock">Hence a type 'java.lang.Boolean' for parameter name 'myBoolean' would evaluate the value 'true' to Boolean.TRUE, such that
de.businesscode.bcdui.toolbox.Configuration.getConfigurationParameter('myBoolean', false) would return Boolean.TRUE wheras
de.businesscode.bcdui.toolbox.Configuration.getConfigurationParameter('myBoolean', "false") would throw a ClassCastException
trying to cast Boolean to a String.</p>
<p class="tableblock">Therefore, the type has to be really accurate and match types used in context.xml.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">VALUE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a value for this parameter. For client scope parameter this value will be exposed as a String, hence must not be further quoted.
The server scope value follows rules for its TYPE</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2021-05-31 13:48:31 +0200
</div>
</div>
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
pre.CodeRay{background:#f7f7f8}
.CodeRay .line-numbers{border-right:1px solid currentColor;opacity:.35;padding:0 .5em 0 0}
.CodeRay span.line-numbers{display:inline-block;margin-right:.75em}
.CodeRay .line-numbers strong{color:#000}
table.CodeRay{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.CodeRay td{vertical-align:top;line-height:inherit}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.code{padding:0 0 0 .75em}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</body>
</html>