<!DOCTYPE HTML>
<html lang="de">
<head>
<!-- Generated by javadoc (17) -->
<title>OAuthRealm (BCD-UI Api)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="declaration: package: de.businesscode.bcdui.subjectsettings.oauth2, class: OAuthRealm">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<div class="about-language"><b style="font-size: 20pt; color: #fff">BCD-UI</b></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li><a href="#nested-class-summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field-summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li><a href="#field-detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">de.businesscode.bcdui.subjectsettings.oauth2</a></div>
<h1 title="Class OAuthRealm" class="title">Class OAuthRealm</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">org.apache.shiro.realm.CachingRealm
<div class="inheritance">org.apache.shiro.realm.AuthenticatingRealm
<div class="inheritance">de.businesscode.bcdui.subjectsettings.oauth2.OAuthRealm</div>
</div>
</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Implemented Interfaces:</dt>
<dd><code>org.apache.shiro.authc.LogoutAware</code>, <code>org.apache.shiro.cache.CacheManagerAware</code>, <code>org.apache.shiro.lang.util.Initializable</code>, <code>org.apache.shiro.lang.util.Nameable</code>, <code>org.apache.shiro.realm.Realm</code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name type-name-label">OAuthRealm</span>
<span class="extends-implements">extends org.apache.shiro.realm.AuthenticatingRealm</span></div>
<div class="block">This Realm will accept logins from trusted oAuth authentication servers
 Per default we also require the user to be found in bcd_sec_user to not lose control, as bcdAuthc resources only need a session and no permissions!
 For permissions, which are added in BCD-UI JdbcRealm, entries in bcd_sec_user_settings are anyway necessary
 This one is an authenticating realm only as such we obtain identity from resource server and let other realms obtain authorization data from elsewhere</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<li>
<section class="nested-class-summary" id="nested-class-summary">
<h2>Nested Class Summary</h2>
<div class="caption"><span>Nested Classes</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Class</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>static final record&nbsp;</code></div>
<div class="col-second even-row-color"><code><a href="OAuthRealm.OAuthUserInfo.html" class="type-name-link" title="class in de.businesscode.bcdui.subjectsettings.oauth2">OAuthRealm.OAuthUserInfo</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>static final record&nbsp;</code></div>
<div class="col-second odd-row-color"><code><a href="OAuthRealm.PrincipalInfo.html" class="type-name-link" title="class in de.businesscode.bcdui.subjectsettings.oauth2">OAuthRealm.PrincipalInfo</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="caption"><span>Fields</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Field</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>protected static final <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color"><code><a href="#ACCESS_TOKEN_NAME" class="member-name-link">ACCESS_TOKEN_NAME</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>protected static final <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color"><code><a href="#ID_TOKEN_NAME" class="member-name-link">ID_TOKEN_NAME</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E()" class="member-name-link">OAuthRealm</a>()</code></div>
<div class="col-last even-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#assurePrincipleIsAllowed(de.businesscode.bcdui.subjectsettings.oauth2.OAuthRealm.OAuthUserInfo,de.businesscode.bcdui.subjectsettings.oauth2.OAuthRealm.PrincipalInfo)" class="member-name-link">assurePrincipleIsAllowed</a><wbr>(<a href="OAuthRealm.OAuthUserInfo.html" title="class in de.businesscode.bcdui.subjectsettings.oauth2">OAuthRealm.OAuthUserInfo</a>&nbsp;providedPrincipal,
 <a href="OAuthRealm.PrincipalInfo.html" title="class in de.businesscode.bcdui.subjectsettings.oauth2">OAuthRealm.PrincipalInfo</a>&nbsp;localPi)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Unless explicitly disabled, we do enforce existence of principal in bcd_sec_user here
 to avoid everybody getting a session who is known to the remote system but not ours
 Can also be used as an extension point for example test for an additional flag ncd bcd_sec_user etc by overwriting this class for an oAuth provider in shiro.ini</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#callTokenEndpoint(de.businesscode.bcdui.subjectsettings.oauth2.OAuthToken,java.lang.String)" class="member-name-link">callTokenEndpoint</a><wbr>(<a href="OAuthToken.html" title="class in de.businesscode.bcdui.subjectsettings.oauth2">OAuthToken</a>&nbsp;oauthToken,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;tokenProperty)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">call against oauth2.0 "/token" endpoint to obtain an access token</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected org.apache.shiro.authc.AuthenticationInfo</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#doGetAuthenticationInfo(org.apache.shiro.authc.AuthenticationToken)" class="member-name-link">doGetAuthenticationInfo</a><wbr>(org.apache.shiro.authc.AuthenticationToken&nbsp;authToken)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">creates access token via <a href="#callTokenEndpoint(de.businesscode.bcdui.subjectsettings.oauth2.OAuthToken,java.lang.String)"><code>callTokenEndpoint(OAuthToken, String)</code></a> and passes to <a href="#retrieveUserPrincipal(de.businesscode.bcdui.subjectsettings.oauth2.OAuthToken)"><code>retrieveUserPrincipal(OAuthToken)</code></a> then constructs <code>SimpleAuthenticationInfo</code> with returned principal
 if oauth AND bcd_sec_user exist:
 - local userId is being used
 - login_name is the same for local and oauth
 - fullName we use from oauth if configured (fullNamePropertyName is set), otherwise local
 - same for email.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="OAuthAuthenticatingFilter.html" title="class in de.businesscode.bcdui.subjectsettings.oauth2">OAuthAuthenticatingFilter</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getAuthenticator()" class="member-name-link">getAuthenticator</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getEmailPropertyName()" class="member-name-link">getEmailPropertyName</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getFullNamePropertyName()" class="member-name-link">getFullNamePropertyName</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getPrincipalPropertyName()" class="member-name-link">getPrincipalPropertyName</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="OAuthRealm.PrincipalInfo.html" title="class in de.businesscode.bcdui.subjectsettings.oauth2">OAuthRealm.PrincipalInfo</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getPrincipleInfo(de.businesscode.bcdui.subjectsettings.oauth2.OAuthRealm.OAuthUserInfo)" class="member-name-link">getPrincipleInfo</a><wbr>(<a href="OAuthRealm.OAuthUserInfo.html" title="class in de.businesscode.bcdui.subjectsettings.oauth2">OAuthRealm.OAuthUserInfo</a>&nbsp;ui)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Unless explicitly disabled, we do enforce existence of ui in bcd_sec_user here
 to avoid everybody getting a session who is known to the remote system but not ours
 Can also be used as an extension point for example test for an additional flag ncd bcd_sec_user etc by overwriting this class for an oAuth provider in shiro.ini</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getSkipBcdSecUserTest()" class="member-name-link">getSkipBcdSecUserTest</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getTokenEndpoint()" class="member-name-link">getTokenEndpoint</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getUserInfoEndpoint()" class="member-name-link">getUserInfoEndpoint</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="OAuthRealm.OAuthUserInfo.html" title="class in de.businesscode.bcdui.subjectsettings.oauth2">OAuthRealm.OAuthUserInfo</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getUserPrincipalFromIdToken(java.lang.String,java.lang.String)" class="member-name-link">getUserPrincipalFromIdToken</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;accessToken,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;origNonce)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Default.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="OAuthRealm.OAuthUserInfo.html" title="class in de.businesscode.bcdui.subjectsettings.oauth2">OAuthRealm.OAuthUserInfo</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getUserPrincipalFromUserInfoEndpoint(java.lang.String)" class="member-name-link">getUserPrincipalFromUserInfoEndpoint</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;accessToken)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Useful if overwriting this class to retrieve more properties of the principal than its unique name
 Derive name of the principal from an extra call to the user info endpoint like https://graph.microsoft.com/v1.0/me/
 Make sure the token we received earlier is allowed to access it, i.e. requested scope for example includes https://graph.microsoft.com/user.read</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected com.google.gson.JsonElement</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#readJsonProperty(java.lang.String,java.lang.String,boolean)" class="member-name-link">readJsonProperty</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;jsonString,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;propertyName,
 boolean&nbsp;isPropertyRequired)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">helper to access plain property of a json string, i.e. readJsonProperty('{ foo:"bar" }', "foo").getAsString() returns "bar"</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="OAuthRealm.OAuthUserInfo.html" title="class in de.businesscode.bcdui.subjectsettings.oauth2">OAuthRealm.OAuthUserInfo</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#retrieveUserPrincipal(de.businesscode.bcdui.subjectsettings.oauth2.OAuthToken)" class="member-name-link">retrieveUserPrincipal</a><wbr>(<a href="OAuthToken.html" title="class in de.businesscode.bcdui.subjectsettings.oauth2">OAuthToken</a>&nbsp;oauthToken)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">implements retrieving user principal from resource server
 First gets the id-token from the token endpoint
 and then either retrieves it from the token
 or does an extra call to the info endpoint, if that is configured, which allows extracting more info in case we are overwritten</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setAuthenticator(de.businesscode.bcdui.subjectsettings.oauth2.OAuthAuthenticatingFilter)" class="member-name-link">setAuthenticator</a><wbr>(<a href="OAuthAuthenticatingFilter.html" title="class in de.businesscode.bcdui.subjectsettings.oauth2">OAuthAuthenticatingFilter</a>&nbsp;authenticator)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Set in shiro.ini
 We need to set the instance of filter class to determine in realm if that should support processing, in case we have many realms bound with multiple authenticators for given token</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setClientSecret(java.lang.String)" class="member-name-link">setClientSecret</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;clientSecret)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Set in shiro.ini
 secret we need to obtain access token from /token endpoint, used in <a href="#callTokenEndpoint(de.businesscode.bcdui.subjectsettings.oauth2.OAuthToken,java.lang.String)"><code>callTokenEndpoint(OAuthToken, String)</code></a></div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setDisableSslValidation(boolean)" class="member-name-link">setDisableSslValidation</a><wbr>(boolean&nbsp;disableSslValidation)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setEmailPropertyName(java.lang.String)" class="member-name-link">setEmailPropertyName</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;emailPropertyName)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Overwrite default in shiro.ini
 this is the property we extract from JSON response and use as email</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setFullNamePropertyName(java.lang.String)" class="member-name-link">setFullNamePropertyName</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;principalNameName)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Overwrite default in shiro.ini
 this is the property we extract from JSON response and use as a full name "Jon Doe"</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setPrincipalPropertyName(java.lang.String)" class="member-name-link">setPrincipalPropertyName</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;principalPropertyName)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Overwrite default in shiro.ini
 this is the property we extract from JSON response and use as a principal</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setSkipBcdSecUserTest(boolean)" class="member-name-link">setSkipBcdSecUserTest</a><wbr>(boolean&nbsp;skipBcdSecUserTest)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">&nbsp;</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setTokenEndpoint(java.lang.String)" class="member-name-link">setTokenEndpoint</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;tokenEndpoint)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Set in shiro.ini
 sets the endpoint to /token API</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setUserInfoEndpoint(java.lang.String)" class="member-name-link">setUserInfoEndpoint</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;apiEndPoint)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Set in shiro.ini
 the API endpoint to obtain information about user basically providing JSON data containing <a href="#getPrincipalPropertyName()"><code>getPrincipalPropertyName()</code></a> to extract</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#supports(org.apache.shiro.authc.AuthenticationToken)" class="member-name-link">supports</a><wbr>(org.apache.shiro.authc.AuthenticationToken&nbsp;token)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">accepts <a href="OAuthToken.html" title="class in de.businesscode.bcdui.subjectsettings.oauth2"><code>OAuthToken</code></a> and only from given authenticator, if provided</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-org.apache.shiro.realm.AuthenticatingRealm">Methods inherited from class&nbsp;org.apache.shiro.realm.AuthenticatingRealm</h3>
<code>afterCacheManagerSet, assertCredentialsMatch, clearCachedAuthenticationInfo, doClearCache, getAuthenticationCache, getAuthenticationCacheKey, getAuthenticationCacheKey, getAuthenticationCacheName, getAuthenticationInfo, getAuthenticationTokenClass, getCredentialsMatcher, init, isAuthenticationCachingEnabled, isAuthenticationCachingEnabled, onInit, setAuthenticationCache, setAuthenticationCacheName, setAuthenticationCachingEnabled, setAuthenticationTokenClass, setCredentialsMatcher, setName</code></div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-org.apache.shiro.realm.CachingRealm">Methods inherited from class&nbsp;org.apache.shiro.realm.CachingRealm</h3>
<code>clearCache, getAvailablePrincipal, getCacheManager, getName, isCachingEnabled, onLogout, setCacheManager, setCachingEnabled</code></div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ FIELD DETAIL =========== -->
<li>
<section class="field-details" id="field-detail">
<h2>Field Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="ACCESS_TOKEN_NAME">
<h3>ACCESS_TOKEN_NAME</h3>
<div class="member-signature"><span class="modifiers">protected static final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">ACCESS_TOKEN_NAME</span></div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../../constant-values.html#de.businesscode.bcdui.subjectsettings.oauth2.OAuthRealm.ACCESS_TOKEN_NAME">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="ID_TOKEN_NAME">
<h3>ID_TOKEN_NAME</h3>
<div class="member-signature"><span class="modifiers">protected static final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">ID_TOKEN_NAME</span></div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../../constant-values.html#de.businesscode.bcdui.subjectsettings.oauth2.OAuthRealm.ID_TOKEN_NAME">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;()">
<h3>OAuthRealm</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">OAuthRealm</span>()</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="setDisableSslValidation(boolean)">
<h3>setDisableSslValidation</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setDisableSslValidation</span><wbr><span class="parameters">(boolean&nbsp;disableSslValidation)</span></div>
</section>
</li>
<li>
<section class="detail" id="setAuthenticator(de.businesscode.bcdui.subjectsettings.oauth2.OAuthAuthenticatingFilter)">
<h3>setAuthenticator</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setAuthenticator</span><wbr><span class="parameters">(<a href="OAuthAuthenticatingFilter.html" title="class in de.businesscode.bcdui.subjectsettings.oauth2">OAuthAuthenticatingFilter</a>&nbsp;authenticator)</span></div>
<div class="block">Set in shiro.ini
 We need to set the instance of filter class to determine in realm if that should support processing, in case we have many realms bound with multiple authenticators for given token</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>authenticator</code> - </dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getAuthenticator()">
<h3>getAuthenticator</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="OAuthAuthenticatingFilter.html" title="class in de.businesscode.bcdui.subjectsettings.oauth2">OAuthAuthenticatingFilter</a></span>&nbsp;<span class="element-name">getAuthenticator</span>()</div>
</section>
</li>
<li>
<section class="detail" id="setTokenEndpoint(java.lang.String)">
<h3>setTokenEndpoint</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setTokenEndpoint</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;tokenEndpoint)</span></div>
<div class="block">Set in shiro.ini
 sets the endpoint to /token API</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>tokenEndpoint</code> - </dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getTokenEndpoint()">
<h3>getTokenEndpoint</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">getTokenEndpoint</span>()</div>
</section>
</li>
<li>
<section class="detail" id="setUserInfoEndpoint(java.lang.String)">
<h3>setUserInfoEndpoint</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setUserInfoEndpoint</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;apiEndPoint)</span></div>
<div class="block">Set in shiro.ini
 the API endpoint to obtain information about user basically providing JSON data containing <a href="#getPrincipalPropertyName()"><code>getPrincipalPropertyName()</code></a> to extract</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>apiEndPoint</code> - The endpoint to get principal's JSON</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getUserInfoEndpoint()">
<h3>getUserInfoEndpoint</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">getUserInfoEndpoint</span>()</div>
</section>
</li>
<li>
<section class="detail" id="setClientSecret(java.lang.String)">
<h3>setClientSecret</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setClientSecret</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;clientSecret)</span></div>
<div class="block">Set in shiro.ini
 secret we need to obtain access token from /token endpoint, used in <a href="#callTokenEndpoint(de.businesscode.bcdui.subjectsettings.oauth2.OAuthToken,java.lang.String)"><code>callTokenEndpoint(OAuthToken, String)</code></a></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>clientSecret</code> - </dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setPrincipalPropertyName(java.lang.String)">
<h3>setPrincipalPropertyName</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setPrincipalPropertyName</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;principalPropertyName)</span></div>
<div class="block">Overwrite default in shiro.ini
 this is the property we extract from JSON response and use as a principal</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>principalPropertyName</code> - </dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getPrincipalPropertyName()">
<h3>getPrincipalPropertyName</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">getPrincipalPropertyName</span>()</div>
</section>
</li>
<li>
<section class="detail" id="setFullNamePropertyName(java.lang.String)">
<h3>setFullNamePropertyName</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setFullNamePropertyName</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;principalNameName)</span></div>
<div class="block">Overwrite default in shiro.ini
 this is the property we extract from JSON response and use as a full name "Jon Doe"</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>principalNameName</code> - </dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getFullNamePropertyName()">
<h3>getFullNamePropertyName</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">getFullNamePropertyName</span>()</div>
</section>
</li>
<li>
<section class="detail" id="setEmailPropertyName(java.lang.String)">
<h3>setEmailPropertyName</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setEmailPropertyName</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;emailPropertyName)</span></div>
<div class="block">Overwrite default in shiro.ini
 this is the property we extract from JSON response and use as email</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>emailPropertyName</code> - </dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getEmailPropertyName()">
<h3>getEmailPropertyName</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">getEmailPropertyName</span>()</div>
</section>
</li>
<li>
<section class="detail" id="getSkipBcdSecUserTest()">
<h3>getSkipBcdSecUserTest</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">getSkipBcdSecUserTest</span>()</div>
</section>
</li>
<li>
<section class="detail" id="setSkipBcdSecUserTest(boolean)">
<h3>setSkipBcdSecUserTest</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setSkipBcdSecUserTest</span><wbr><span class="parameters">(boolean&nbsp;skipBcdSecUserTest)</span></div>
</section>
</li>
<li>
<section class="detail" id="supports(org.apache.shiro.authc.AuthenticationToken)">
<h3>supports</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">supports</span><wbr><span class="parameters">(org.apache.shiro.authc.AuthenticationToken&nbsp;token)</span></div>
<div class="block">accepts <a href="OAuthToken.html" title="class in de.businesscode.bcdui.subjectsettings.oauth2"><code>OAuthToken</code></a> and only from given authenticator, if provided</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code>supports</code>&nbsp;in interface&nbsp;<code>org.apache.shiro.realm.Realm</code></dd>
<dt>Overrides:</dt>
<dd><code>supports</code>&nbsp;in class&nbsp;<code>org.apache.shiro.realm.AuthenticatingRealm</code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="doGetAuthenticationInfo(org.apache.shiro.authc.AuthenticationToken)">
<h3>doGetAuthenticationInfo</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">org.apache.shiro.authc.AuthenticationInfo</span>&nbsp;<span class="element-name">doGetAuthenticationInfo</span><wbr><span class="parameters">(org.apache.shiro.authc.AuthenticationToken&nbsp;authToken)</span></div>
<div class="block">creates access token via <a href="#callTokenEndpoint(de.businesscode.bcdui.subjectsettings.oauth2.OAuthToken,java.lang.String)"><code>callTokenEndpoint(OAuthToken, String)</code></a> and passes to <a href="#retrieveUserPrincipal(de.businesscode.bcdui.subjectsettings.oauth2.OAuthToken)"><code>retrieveUserPrincipal(OAuthToken)</code></a> then constructs <code>SimpleAuthenticationInfo</code> with returned principal
 if oauth AND bcd_sec_user exist:
 - local userId is being used
 - login_name is the same for local and oauth
 - fullName we use from oauth if configured (fullNamePropertyName is set), otherwise local
 - same for email. Whie standard bcd_sec_user does not local email, it may exists if getPrincipleInfo() is overwritten in a project</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code>doGetAuthenticationInfo</code>&nbsp;in class&nbsp;<code>org.apache.shiro.realm.AuthenticatingRealm</code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getPrincipleInfo(de.businesscode.bcdui.subjectsettings.oauth2.OAuthRealm.OAuthUserInfo)">
<h3>getPrincipleInfo</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="OAuthRealm.PrincipalInfo.html" title="class in de.businesscode.bcdui.subjectsettings.oauth2">OAuthRealm.PrincipalInfo</a></span>&nbsp;<span class="element-name">getPrincipleInfo</span><wbr><span class="parameters">(<a href="OAuthRealm.OAuthUserInfo.html" title="class in de.businesscode.bcdui.subjectsettings.oauth2">OAuthRealm.OAuthUserInfo</a>&nbsp;ui)</span>
                                             throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></span></div>
<div class="block">Unless explicitly disabled, we do enforce existence of ui in bcd_sec_user here
 to avoid everybody getting a session who is known to the remote system but not ours
 Can also be used as an extension point for example test for an additional flag ncd bcd_sec_user etc by overwriting this class for an oAuth provider in shiro.ini</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>ui</code> - </dd>
<dt>Returns:</dt>
<dd>null if no information in bcd_sec_user should be or can be found</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="assurePrincipleIsAllowed(de.businesscode.bcdui.subjectsettings.oauth2.OAuthRealm.OAuthUserInfo,de.businesscode.bcdui.subjectsettings.oauth2.OAuthRealm.PrincipalInfo)">
<h3>assurePrincipleIsAllowed</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">assurePrincipleIsAllowed</span><wbr><span class="parameters">(<a href="OAuthRealm.OAuthUserInfo.html" title="class in de.businesscode.bcdui.subjectsettings.oauth2">OAuthRealm.OAuthUserInfo</a>&nbsp;providedPrincipal,
 <a href="OAuthRealm.PrincipalInfo.html" title="class in de.businesscode.bcdui.subjectsettings.oauth2">OAuthRealm.PrincipalInfo</a>&nbsp;localPi)</span>
                                    throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></span></div>
<div class="block">Unless explicitly disabled, we do enforce existence of principal in bcd_sec_user here
 to avoid everybody getting a session who is known to the remote system but not ours
 Can also be used as an extension point for example test for an additional flag ncd bcd_sec_user etc by overwriting this class for an oAuth provider in shiro.ini</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>localPi</code> - </dd>
<dt>Returns:</dt>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="retrieveUserPrincipal(de.businesscode.bcdui.subjectsettings.oauth2.OAuthToken)">
<h3>retrieveUserPrincipal</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="OAuthRealm.OAuthUserInfo.html" title="class in de.businesscode.bcdui.subjectsettings.oauth2">OAuthRealm.OAuthUserInfo</a></span>&nbsp;<span class="element-name">retrieveUserPrincipal</span><wbr><span class="parameters">(<a href="OAuthToken.html" title="class in de.businesscode.bcdui.subjectsettings.oauth2">OAuthToken</a>&nbsp;oauthToken)</span>
                                                  throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></span></div>
<div class="block">implements retrieving user principal from resource server
 First gets the id-token from the token endpoint
 and then either retrieves it from the token
 or does an extra call to the info endpoint, if that is configured, which allows extracting more info in case we are overwritten</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>oauthToken</code> - - which is already obtained from authority server and ready to be used as a bearer</dd>
<dt>Returns:</dt>
<dd>user principal, OAuthUserInfo</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getUserPrincipalFromIdToken(java.lang.String,java.lang.String)">
<h3>getUserPrincipalFromIdToken</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="OAuthRealm.OAuthUserInfo.html" title="class in de.businesscode.bcdui.subjectsettings.oauth2">OAuthRealm.OAuthUserInfo</a></span>&nbsp;<span class="element-name">getUserPrincipalFromIdToken</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;accessToken,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;origNonce)</span>
                                                        throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></span></div>
<div class="block">Default. Derive name of the principal from the ID token</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>accessToken</code> - </dd>
<dt>Returns:</dt>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getUserPrincipalFromUserInfoEndpoint(java.lang.String)">
<h3>getUserPrincipalFromUserInfoEndpoint</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="OAuthRealm.OAuthUserInfo.html" title="class in de.businesscode.bcdui.subjectsettings.oauth2">OAuthRealm.OAuthUserInfo</a></span>&nbsp;<span class="element-name">getUserPrincipalFromUserInfoEndpoint</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;accessToken)</span>
                                                                 throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></span></div>
<div class="block">Useful if overwriting this class to retrieve more properties of the principal than its unique name
 Derive name of the principal from an extra call to the user info endpoint like https://graph.microsoft.com/v1.0/me/
 Make sure the token we received earlier is allowed to access it, i.e. requested scope for example includes https://graph.microsoft.com/user.read</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>accessToken</code> - </dd>
<dt>Returns:</dt>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Exception.html" title="class or interface in java.lang" class="external-link">Exception</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="callTokenEndpoint(de.businesscode.bcdui.subjectsettings.oauth2.OAuthToken,java.lang.String)">
<h3>callTokenEndpoint</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">callTokenEndpoint</span><wbr><span class="parameters">(<a href="OAuthToken.html" title="class in de.businesscode.bcdui.subjectsettings.oauth2">OAuthToken</a>&nbsp;oauthToken,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;tokenProperty)</span>
                            throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">call against oauth2.0 "/token" endpoint to obtain an access token</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>oauthToken</code> - </dd>
<dt>Returns:</dt>
<dd>The access token</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="readJsonProperty(java.lang.String,java.lang.String,boolean)">
<h3>readJsonProperty</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">com.google.gson.JsonElement</span>&nbsp;<span class="element-name">readJsonProperty</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;jsonString,
 <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;propertyName,
 boolean&nbsp;isPropertyRequired)</span></div>
<div class="block">helper to access plain property of a json string, i.e. readJsonProperty('{ foo:"bar" }', "foo").getAsString() returns "bar"</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>jsonString</code> - </dd>
<dd><code>propertyName</code> - </dd>
<dd><code>isPropertyRequired</code> - </dd>
<dt>Returns:</dt>
<dd>The property</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</div>
</body>
</html>
